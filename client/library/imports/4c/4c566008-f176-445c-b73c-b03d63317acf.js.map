{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\sssgame/assets\\scripts\\sssgame\\setType.js"],"names":["PaiType","require","cc","Class","extends","Component","properties","onLoad","children","node","posX","i","length","getChildByName","tag","preBtnTag","thisBtnTag","Compare","getType","touchCom","parent","getComponent","myPaiCom","myPai","arrPai","getMyPaiData","arrType","console","log","bActive","j","active","vv","sssNetMgr","specialType","THS","onBtnClicked","event","audioMgr","playSFX","target","WT","shezhipaiCom","shezhiPai","reset","sssNet","send","YD","bSame","b_obtainType","Duizi","getDuiZi","setUp","ED","Duizi0","getLiangDui","Duizi1","push","ST","sanTiao","getSanTiao","SZ","shunZi","getShunZi","TH","tongHua","getTongHua","HL","huLu","getHuLu","TZ","tieZhi","getTieZhi","tongHuaShun","wutong","getWuTong"],"mappings":"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","file":"setType.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sssgame","sourcesContent":["var PaiType = require(\"define\").PaiType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var children = this.node.children;\r\n        var posX = -520;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var node = this.node.getChildByName(\"type\"+i);\r\n            node.tag = i+2;\r\n        }\r\n        this.preBtnTag = 0;\r\n        this.thisBtnTag = 0;\r\n        this.Compare = require(\"Compare\");\r\n    },\r\n\r\n    //获取到百变或者普通\r\n    getType:function(){\r\n        var touchCom = this.node.parent.getComponent(\"touch\");\r\n        var myPaiCom = touchCom.myPai.getComponent(\"myPai\");\r\n        var arrPai = myPaiCom.getMyPaiData();\r\n        var arrType = [];\r\n\r\n        arrType = this.Compare.getType(arrPai);\r\n\r\n        console.log('arrType: '+arrType);\r\n        //把牌型对应的按钮显示\r\n        for(var i = 0;i < this.node.children.length;i++){\r\n            var children = this.node.getChildByName(\"type\"+i);\r\n            var bActive = false;\r\n            if(arrType){\r\n                for(var j = 0;j<arrType.length;j++){\r\n                    if(children.tag === arrType[j]){\r\n                        bActive = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            children.active = bActive;\r\n        }\r\n        \r\n        //如果是特殊牌，则显示报道\r\n        if(cc.vv.sssNetMgr.specialType > PaiType.THS){\r\n            var children = this.node.getChildByName(\"type9\");\r\n            children.active = true;\r\n        }\r\n    },\r\n\r\n    onBtnClicked:function(event){\r\n        var touchCom = this.node.parent.getComponent(\"touch\");\r\n        var myPaiCom = touchCom.myPai.getComponent(\"myPai\");\r\n        var arrPai = myPaiCom.getMyPaiData();\r\n        cc.vv.audioMgr.playSFX(\"sssMusic/fangpai.mp3\");\r\n\r\n        //特殊牌处理\r\n        if(event.target.tag > PaiType.WT){\r\n            var touchCom = this.node.parent.getComponent(\"touch\");\r\n            var shezhipaiCom = touchCom.shezhiPai.getComponent(\"shezhipai\");\r\n            shezhipaiCom.reset();\r\n            cc.vv.sssNet.send('special_card');\r\n            return;\r\n        }\r\n        \r\n        switch(event.target.tag){\r\n            case PaiType.YD:\r\n                console.log(\"onBtnClicked type0\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.YD;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var Duizi = this.Compare.getDuiZi(arrPai,bSame);\r\n                touchCom.setUp(Duizi);\r\n                this.preBtnTag = PaiType.YD;\r\n                break;\r\n            case PaiType.ED:\r\n                console.log(\"onBtnClicked type1\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.ED;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var Duizi0 = this.Compare.getLiangDui(arrPai,bSame);\r\n                var Duizi1 = this.Compare.getLiangDui(arrPai,true);\r\n                for(var i = 0;i<Duizi0.length;i++){\r\n                    Duizi1.push(Duizi0[i]);\r\n                }\r\n                touchCom.setUp(Duizi1);\r\n                this.preBtnTag = PaiType.ED;\r\n                break;\r\n            case PaiType.ST:\r\n                console.log(\"onBtnClicked type2\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.ST;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var sanTiao = this.Compare.getSanTiao(arrPai,bSame);\r\n                touchCom.setUp(sanTiao);\r\n                this.preBtnTag = PaiType.ST;\r\n                break;\r\n            case PaiType.SZ:\r\n                console.log(\"onBtnClicked type3\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.SZ;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var shunZi = this.Compare.getShunZi(arrPai,bSame,false);\r\n                touchCom.setUp(shunZi);\r\n                this.preBtnTag = PaiType.SZ;\r\n                break;\r\n            case PaiType.TH:\r\n                console.log(\"onBtnClicked type4\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.TH;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var tongHua = this.Compare.getTongHua(arrPai,bSame);\r\n                touchCom.setUp(tongHua);\r\n                \r\n                this.preBtnTag = PaiType.TH;\r\n                break;\r\n            case PaiType.HL:\r\n                console.log(\"onBtnClicked type5\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.HL;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var huLu = this.Compare.getHuLu(arrPai,bSame);\r\n                touchCom.setUp(huLu);\r\n                \r\n                this.preBtnTag = PaiType.HL;\r\n                break;\r\n            case PaiType.TZ:\r\n                console.log(\"onBtnClicked type6\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.TZ;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var tieZhi = this.Compare.getTieZhi(arrPai,bSame);\r\n                touchCom.setUp(tieZhi);\r\n                \r\n                this.preBtnTag = PaiType.TZ;\r\n                break;\r\n            case PaiType.THS:\r\n                console.log(\"onBtnClicked type7\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.THS;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var tongHuaShun = this.Compare.getShunZi(arrPai,bSame,true);\r\n                touchCom.setUp(tongHuaShun);\r\n                \r\n                this.preBtnTag = PaiType.THS;\r\n                break;\r\n            case PaiType.WT:\r\n                console.log(\"onBtnClicked type8\");\r\n                var bSame = false;\r\n                this.thisBtnTag = PaiType.WT;\r\n                bSame = this.thisBtnTag === this.preBtnTag;\r\n                if(!bSame){\r\n                    this.Compare.b_obtainType = true;\r\n                }\r\n                var wutong = this.Compare.getWuTong(arrPai,bSame);\r\n                touchCom.setUp(wutong);\r\n                \r\n                this.preBtnTag = PaiType.WT;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}