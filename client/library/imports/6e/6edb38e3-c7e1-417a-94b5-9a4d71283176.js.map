{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Hall.js"],"names":["Net","require","Global","cc","Class","extends","Component","properties","lblName","Label","lblMoney","lblGems","lblID","lblNotice","joinGameWin","Node","settingsWin","xiaoxiWin","sprHeadImg","Sprite","roomModeWin","sssCreateRoomWin","sspCreateRoomWin","modeNameImg","modeNameAtlas","default","type","SpriteAtlas","sspmodeNameAtlas","onShare","vv","anysdkMgr","share","onLoad","console","log","sys","isNative","isMobile","cvs","node","getComponent","Canvas","fitHeight","fitWidth","director","loadScene","initLabels","shareJoinRoom","roomId","userMgr","oldRoomId","localStorage","setItem","enterRoom","userId","imgLoader","setUserID","utils","addClickEvent","addComponent","initButtonHandler","notice","version","msg","gemstip","control","string","refreshInfo","refreshNotice","refreshGemsTip","refreshControl","audioMgr","playBGM","addEscEvent","browserType","getAccess_token","os","OS_ANDROID","OS_IOS","args","getItem","self","onGet","ret","errcode","errmsg","gems","data","account","sign","http","sendRequest","bind","replace","value","btnPath","btn","find","name","userName","len","length","str","substring","coins","onBtnClicked","event","target","active","userinfoShow","show","sex","ip","onBtnShare","onBtnShareCloseClicked","onBtnShareHaoyou","shareUrlEvent","onBtnSharePengyouquan","onBtnNothing","onBtnHideWebShare","onBtnUserinfo","userinfo","getChildByName","onJoinGameClicked","onBtnAddGemsClicked","alert","onBtnTaobaoClicked","onBtnXiaoxiCloseClicked","xiaoxi","onBtnShopClicked","PayUrl","Application","getInstance","openURL","window","location","href","onBtnShopCloseClicked","shop","onBtnKefuClicked","kefu","onBtnKefuCloseClicked","onBtnWanfaCloseClicked","wanfa","onCreateRoomClicked","gameType","sssNetMgr","sspNetMgr","onBtnFzsssClicked","changeModeNameImg","onBtnFzsspClicked","onBtnEnterRoomClicked","limitLogin","roomid","isLogin","userid","serverType","wc","onBtnObserverClicked","bObserver","onBtnCloseClicked","observed","onBtnBack","removeItem","onBtnWanfa","viewlist","content","ScrollView","sss","ssp","spriteFrame","getSpriteFrame","modeName","update","dt","x","width","roomData"],"mappings":"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","file":"Hall.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["var Net = require(\"Net\")\r\nvar Global = require(\"Global\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lblName:cc.Label,\r\n        lblMoney:cc.Label,\r\n        lblGems:cc.Label,\r\n        lblID:cc.Label,\r\n        lblNotice:cc.Label,\r\n        joinGameWin:cc.Node,\r\n        settingsWin:cc.Node,\r\n        //helpWin:cc.Node,\r\n        xiaoxiWin:cc.Node,\r\n        //btnJoinGame:cc.Node,\r\n        //btnReturnGame:cc.Node,\r\n        sprHeadImg:cc.Sprite,\r\n        roomModeWin:cc.Node,\r\n        sssCreateRoomWin:cc.Node,\r\n        sspCreateRoomWin:cc.Node,\r\n\r\n        modeNameImg:cc.Sprite,\r\n        modeNameAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        sspmodeNameAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    // initNetHandlers:function(){\r\n    //     var self = this;\r\n    // },\r\n    \r\n    onShare:function(){\r\n        cc.vv.anysdkMgr.share(\"\");   \r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        console.log(\"Hall onload:\" + cc.vv);\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        this.initLabels();\r\n        this.shareJoinRoom();//通过分享加入游戏\r\n        var roomId = cc.vv.userMgr.oldRoomId;\r\n        if( roomId != null){\r\n            cc.sys.localStorage.setItem(\"roomId\",null);\r\n            cc.vv.userMgr.oldRoomId = null;\r\n            cc.vv.userMgr.enterRoom(roomId);\r\n        }\r\n        \r\n        console.log(\"Hall setUserID:\" + cc.vv.userMgr.userId);\r\n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\r\n        imgLoader.setUserID(cc.vv.userMgr.userId);\r\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,\"Hall\",\"onBtnClicked\");\r\n        \r\n        \r\n        this.addComponent(\"UserInfoShow\");\r\n        \r\n        this.initButtonHandler(\"Canvas/bottom_center/btn_shezhi\");\r\n        this.initButtonHandler(\"Canvas/bottom_center/btn_xiaoxi\");\r\n        \r\n        if(!cc.vv.userMgr.notice){\r\n            cc.vv.userMgr.notice = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        if(!cc.vv.userMgr.gemstip){\r\n            cc.vv.userMgr.gemstip = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n\r\n        if(!cc.vv.userMgr.control){\r\n            cc.vv.userMgr.control = {\r\n                version:null,\r\n                msg:0,\r\n            }\r\n        }\r\n        \r\n        this.lblNotice.string = '珍爱生命，远离赌博';\r\n        \r\n        this.refreshInfo();\r\n        this.refreshNotice();\r\n        this.refreshGemsTip();\r\n        this.refreshControl();\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n\r\n        cc.vv.utils.addEscEvent(this.node);\r\n\t\r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            cc.vv.anysdkMgr.getAccess_token('斗斗棋牌，包含了福州麻将、十三水等多种玩法。');\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            \r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            \r\n        }\r\n        \r\n        \r\n        \r\n    },\r\n\r\n    shareJoinRoom:function(){//通过分享加入游戏\r\n        var roomId = cc.args[\"roomId\"];\r\n        if(roomId){\r\n            //存\r\n            cc.vv.userMgr.oldRoomId = roomId;\r\n            cc.sys.localStorage.setItem(\"roomId\",roomId);\r\n        }\r\n        else{//取\r\n            roomId = cc.sys.localStorage.getItem(\"roomId\");\r\n            cc.vv.userMgr.oldRoomId = roomId;\r\n        }  \r\n    },\r\n    \r\n    refreshInfo:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                if(ret.gems != null){\r\n                    this.lblGems.string = ret.gems;    \r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_user_status\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshGemsTip:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.gemstip.version = ret.version;\r\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\",\"\\n\");\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"fkgm\",\r\n            version:cc.vv.userMgr.gemstip.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    //控制是否显示微信登录\r\n    refreshControl:function(){\r\n        var self = this;\r\n        if(cc.sys.os != cc.sys.OS_IOS){\r\n            cc.vv.userMgr.control.value = 1;    //显示微信\r\n            return;\r\n        }\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.control.version = ret.version;\r\n                cc.vv.userMgr.control.value = ret.msg;\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"control\",\r\n            version:20161128\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n\r\n    refreshNotice:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.notice.version = ret.version;\r\n                cc.vv.userMgr.notice.msg = ret.msg;\r\n                this.lblNotice.string = '珍爱生命，远离赌博';\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"notice\",\r\n            version:cc.vv.userMgr.notice.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    initButtonHandler:function(btnPath){\r\n        var btn = cc.find(btnPath);\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"Hall\",\"onBtnClicked\");        \r\n    },\r\n    \r\n    \r\n    \r\n    initLabels:function(){\r\n        var name = cc.vv.userMgr.userName;\r\n        var len = name.length;\r\n        if (len > 8) {\r\n            var str = name.substring(0,8);\r\n            this.lblName.string = str + '...';\r\n        }\r\n        else {\r\n            this.lblName.string = name;\r\n        }\r\n        \r\n        this.lblMoney.string = cc.vv.userMgr.coins;\r\n        this.lblGems.string = cc.vv.userMgr.gems;\r\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_shezhi\"){\r\n            this.settingsWin.active = true;\r\n        }\r\n        else if(event.target.name == \"btn_xiaoxi\"){\r\n            this.xiaoxiWin.active = true;\r\n        }\r\n        else if(event.target.name == \"head\"){\r\n            cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.ip);\r\n        }\r\n    },\r\n    \r\n\r\n    onBtnShare:function(){\r\n        //分享至微信\r\n        //微信分享监听\r\n        console.log('分享至微信: ');\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = true;\r\n    },\r\n    onBtnShareCloseClicked:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n    },\r\n    onBtnShareHaoyou:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false; \r\n        console.log(\"onBtnShareHaoyou117\");      \r\n\r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n           // cc.vv.anysdkMgr.getsignature();\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            cc.vv.anysdkMgr.shareUrlEvent('0');\r\n            console.log(\"cc.vv.anysdkMgr.shareUrlEvent('0');\");\r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n            //cc.vv.anysdkMgr.H5share('好玩的棋牌游戏',\"icon.png\",0);\r\n        }\r\n    },\r\n    onBtnSharePengyouquan:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n        console.log(\"onBtnSharePengyouquan117\");   \r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            console.log(\"H5分享朋友圈\");\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n           // cc.vv.anysdkMgr.H5share('好玩的棋牌游戏',\"icon.png\",1);\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            cc.vv.anysdkMgr.shareUrlEvent('1');\r\n            console.log(\"cc.vv.anysdkMgr.shareUrlEvent('1');\");\r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            console.log(\"H5分享朋友圈\");\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n           // cc.vv.anysdkMgr.H5share('好玩的棋牌游戏',\"icon.png\",1);\r\n        }\r\n    },\r\n\r\n\r\n    onBtnNothing:function(){\r\n\r\n    },\r\n\r\n    onBtnHideWebShare:function(){\r\n        cc.find(\"Canvas/WebShare\").active = false;\r\n    },\r\n\r\n    onBtnUserinfo:function(){\r\n        var userinfo = this.node.getChildByName('userinfo');\r\n        userinfo.active = false;\r\n    },\r\n    \r\n    onJoinGameClicked:function(){\r\n        this.joinGameWin.active = true;\r\n    },\r\n    \r\n    onBtnAddGemsClicked:function(){\r\n        cc.vv.alert.show(\"提示\",cc.vv.userMgr.gemstip.msg,function(){\r\n            this.onBtnTaobaoClicked();\r\n        }.bind(this));\r\n        this.refreshInfo();\r\n    },\r\n\r\n    onBtnXiaoxiCloseClicked:function(){\r\n        var xiaoxi = cc.find(\"Canvas/xiaoxi\");\r\n        xiaoxi.active = false;\r\n    },\r\n\r\n    onBtnShopClicked:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode.PayUrl){\r\n                console.log(\"ret.errcode.PayUrl:\"+ret.errcode.PayUrl);\r\n                if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n                    cc.Application.getInstance().openURL(ret.errcode.PayUrl);\r\n                }\r\n                else{\r\n                    window.location.href = ret.errcode.PayUrl;//跳转到支付网站\r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            userId:cc.vv.userMgr.userId,\r\n        };\r\n        cc.vv.http.sendRequest(\"/getPayUrl\",data,onGet.bind(this));\r\n    },\r\n\r\n    onBtnShopCloseClicked:function(){\r\n        var shop = cc.find(\"Canvas/shop\");\r\n        shop.active = false;\r\n    },\r\n\r\n    onBtnKefuClicked:function(){\r\n        var kefu = cc.find(\"Canvas/kefu\");\r\n        kefu.active = true;\r\n    },\r\n\r\n    onBtnKefuCloseClicked:function(){\r\n        var kefu = cc.find(\"Canvas/kefu\");\r\n        kefu.active = false;\r\n    },\r\n\r\n    onBtnWanfaCloseClicked:function(){\r\n        var wanfa = cc.find(\"Canvas/wanfa\");\r\n        wanfa.active = false;\r\n    },\r\n\r\n    onCreateRoomClicked:function(){\r\n        var gameType = cc.vv.userMgr.gameType;\r\n        if('SSS_SERVER_TYPE' === gameType){\r\n            if(cc.vv.sssNetMgr.roomId != null){\r\n                cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\r\n                return;\r\n            }\r\n            console.log(\"onCreateRoomClicked\");\r\n            this.sssCreateRoomWin.active = true;\r\n        }\r\n        else if('SSP_SERVER_TYPE' === gameType){\r\n            if(cc.vv.sspNetMgr.roomId != null){\r\n                cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\r\n                return;\r\n            }\r\n            console.log(\"onCreateRoomClicked\");\r\n            this.sspCreateRoomWin.active = true;\r\n        }\r\n    },\r\n    \r\n    onBtnTaobaoClicked:function(){\r\n        //cc.sys.openURL('https://shop596732896.taobao.com/');\r\n    },\r\n\r\n\r\n    onBtnFzsssClicked:function(){\r\n        this.roomModeWin.active = true;\r\n        cc.vv.userMgr.gameType = 'SSS_SERVER_TYPE';\r\n        this.changeModeNameImg('SSS_SERVER_TYPE');\r\n    },\r\n\r\n    onBtnFzsspClicked:function(){\r\n        this.roomModeWin.active = true;\r\n        cc.vv.userMgr.gameType = 'SSP_SERVER_TYPE';\r\n        this.changeModeNameImg('SSP_SERVER_TYPE');\r\n    },\r\n\r\n    onBtnEnterRoomClicked:function(){\r\n        var self = this;\r\n        var limitLogin = function(ret){\r\n            var roomid = ret.errcode;\r\n            if(roomid != null){\r\n                cc.vv.userMgr.enterRoom(roomid);\r\n            }else{\r\n                console.log('进入房间失败');\r\n            }\r\n        };\r\n        var isLogin = function (ret) {\r\n            console.log('进到 isLogin');\r\n            var roomid = ret.errcode;\r\n            if (roomid != null) {\r\n                //roomId已存在\r\n                var data = {};\r\n                data.roomid = roomid;\r\n                data.userid = cc.vv.userMgr.userId;\r\n                if(roomid >= 200000 && roomid < 300000){\r\n                    data.serverType = \"SSS_SERVER_TYPE\";\r\n                }\r\n                else if(roomid >= 300000 && roomid < 400000){\r\n                    data.serverType = \"SSP_SERVER_TYPE\";\r\n                }\r\n                cc.vv.http.sendRequest(\"/limit_login\", data, limitLogin.bind(this));\r\n            }\r\n            else {\r\n                if(!roomid){\r\n                    cc.vv.sssNetMgr.roomId = null;\r\n                    cc.vv.sspNetMgr.roomId = null;\r\n                }\r\n                if(cc.vv.sssNetMgr.roomId != null){\r\n                    cc.vv.wc.show('正在返回游戏房间');\r\n                    cc.director.loadScene(\"sssgame\"); \r\n                }\r\n                else if(cc.vv.sspNetMgr.roomId != null){\r\n                    cc.vv.wc.show('正在返回游戏房间');\r\n                    cc.director.loadScene(\"sspgame\"); \r\n                }\r\n                else{\r\n                    self.joinGameWin.active = true;\r\n                }\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account\r\n        };\r\n        console.log('点击了加入房间按钮');\r\n        cc.vv.http.sendRequest(\"/is_login\", data, isLogin.bind(this));\r\n    },\r\n\r\n    //观察者进入房间\r\n    onBtnObserverClicked:function(){\r\n        if(cc.vv.sssNetMgr.roomId != null){\r\n            cc.vv.wc.show('正在返回游戏房间');\r\n            cc.director.loadScene(\"sssgame\"); \r\n        }\r\n        else if(cc.vv.sspNetMgr.roomId != null){\r\n            cc.vv.wc.show('正在返回游戏房间');\r\n            cc.director.loadScene(\"sspgame\"); \r\n        }\r\n        else{\r\n            cc.vv.userMgr.bObserver = true;\r\n            this.joinGameWin.active = true; \r\n        }\r\n    },\r\n\r\n    onBtnCloseClicked:function(){\r\n        var observed = this.roomModeWin.getChildByName('btn_observedEnter');\r\n        observed.active = false;\r\n        this.roomModeWin.active = false;\r\n        this.sssCreateRoomWin.active = false;\r\n        this.sspCreateRoomWin.active = false;\r\n    },\r\n\r\n    onBtnBack:function(){\r\n        //退出游戏\r\n        cc.sys.localStorage.removeItem(\"wx_account\");\r\n        cc.sys.localStorage.removeItem(\"wx_sign\");\r\n        cc.director.loadScene(\"login\");\r\n    },\r\n\r\n    onBtnWanfa:function(){\r\n        var wanfa = this.node.getChildByName('wanfa');\r\n        wanfa.active = true;\r\n        var gameType = cc.vv.userMgr.gameType;\r\n        var viewlist = wanfa.getChildByName('viewlist');\r\n        var content = viewlist.getComponent(cc.ScrollView).content;\r\n\r\n        var sss = viewlist.getChildByName('view').getChildByName('content').getChildByName('sss');\r\n        var ssp = viewlist.getChildByName('view').getChildByName('content').getChildByName('ssp');\r\n\r\n        sss.active = false;\r\n        ssp.active = false;\r\n        if('SSS_SERVER_TYPE' === gameType){\r\n            sss.active = true;            \r\n            //content = sss;\r\n        }\r\n        else if('SSP_SERVER_TYPE' === gameType){\r\n            ssp.active = true;            \r\n        }\r\n    },\r\n\r\n    changeModeNameImg:function(gameType){\r\n        var spriteFrame = null;\r\n        switch(gameType){\r\n            case 'SSS_SERVER_TYPE':\r\n                spriteFrame = this.modeNameAtlas.getSpriteFrame(\"jryx-sss\");\r\n                break;\r\n            case 'SSP_SERVER_TYPE':\r\n                spriteFrame = this.sspmodeNameAtlas.getSpriteFrame(\"biaoti\");\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        var modeName = this.modeNameImg.node.getComponent(cc.Sprite);\r\n        modeName.spriteFrame = spriteFrame;\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        var x = this.lblNotice.node.x;\r\n        x -= dt*100;\r\n        if(x + this.lblNotice.node.width < -1000){\r\n            x = 500;\r\n        }\r\n        this.lblNotice.node.x = x;\r\n        \r\n        if(cc.vv && cc.vv.userMgr.roomData != null){\r\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\r\n            cc.vv.userMgr.roomData = null;\r\n        }\r\n    },\r\n});\r\n"]}