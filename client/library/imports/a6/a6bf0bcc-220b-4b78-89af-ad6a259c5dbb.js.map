{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\sssgame/assets\\scripts\\sssgame\\game_over.js"],"names":["cc","Class","extends","Component","properties","onLoad","ScrollView","node","getChildByName","victory","lose","pingju","view","content","_seats","i","s","sn","active","viewdata","username","getComponent","Label","imgLoader","score","arrPaiNode","tdPai","zdPai","wdPai","teshuPai","string","push","reset","showOver","data","len","length","name","userName","nameLen","str","substring","userId","setUserID","vv","userMgr","win","audioMgr","playSFX","flat","arrPai","arrpai","m","paiNode","paiCom","setInfo","n","k","hiddenPai","isHidd","find","btnClick","event","target","window","sssGame","showTotalResult"],"mappings":"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","file":"game_over.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sssgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.ScrollView = this.node.getChildByName('ScrollView');\r\n        this.victory = this.node.getChildByName('shengli');\r\n        this.lose = this.node.getChildByName('shibai');\r\n        this.pingju = this.node.getChildByName('pingju');\r\n\r\n        this.view = this.ScrollView.getChildByName('view');\r\n        this.content = this.view.getChildByName('content');\r\n        this._seats = [];\r\n        for(var i = 0; i < 6; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.content.getChildByName(s);\r\n            sn.active = false;\r\n            var viewdata = {};\r\n            viewdata.username = sn.getChildByName('userName').getComponent(cc.Label);\r\n            viewdata.imgLoader = sn.getChildByName(\"headBox\").getComponent(\"ImageLoader\");\r\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\r\n            var arrPaiNode = sn.getChildByName('comparPai');\r\n\r\n            viewdata.tdPai = arrPaiNode.getChildByName('tdPai');\r\n            viewdata.zdPai = arrPaiNode.getChildByName('zdPai');\r\n            viewdata.wdPai = arrPaiNode.getChildByName('wdPai');\r\n            viewdata.teshuPai = sn.getChildByName('teshuPai');\r\n\r\n            viewdata.username.string = \"\";\r\n            this._seats.push(viewdata);\r\n            sn.getChildByName('comparPai').active = true;\r\n            sn.getChildByName('teshuPai').active = false;\r\n        }\r\n    },\r\n\r\n    reset:function(){\r\n            this.node.active = false;\r\n            this.victory.active = false;\r\n            this.pingju.active = false;\r\n            this.lose.active = false;\r\n            for(var i = 0; i < 6; ++i){\r\n                var s = \"s\" + i;\r\n                var sn = this.content.getChildByName(s);\r\n                sn.active = false;\r\n                sn.getChildByName('comparPai').active = true;\r\n                sn.getChildByName('teshuPai').active = false;\r\n            }\r\n    },\r\n\r\n    showOver:function(data){\r\n        var len = data.length;\r\n        this.victory.active = false;\r\n        this.pingju.active = false;\r\n        this.lose.active = false;\r\n        //显示牌\r\n        for(var i = 0; i < len; i++){\r\n            var s = \"s\" + i;\r\n            var sn = this.content.getChildByName(s);\r\n            sn.active = true;\r\n\r\n            var name = data[i].userName;\r\n            var nameLen = name.length;\r\n            if (nameLen > 4) {\r\n                var str = name.substring(0,4);\r\n                this._seats[i].username.string = str +'...';\r\n            }\r\n            else {\r\n                this._seats[i].username.string = name;\r\n            }\r\n            this._seats[i].score.string = data[i].score;\r\n            if(this._seats[i].imgLoader && data[i].userId){\r\n                this._seats[i].imgLoader.setUserID(data[i].userId);\r\n            }\r\n            if(cc.vv.userMgr.userId === data[i].userId){\r\n                if(data[i].win === 1)\r\n                {\r\n                    this.victory.active = true;\r\n                    cc.vv.audioMgr.playSFX(\"sssMusic/shengli.mp3\");\r\n                }\r\n                else if(data[i].flat === 1)\r\n                {\r\n                    this.pingju.active = true;\r\n                    cc.vv.audioMgr.playSFX(\"sssMusic/pingju.mp3\");\r\n                }\r\n                else if(data[i].lose === 1)\r\n                {\r\n                    this.lose.active = true;\r\n                    cc.vv.audioMgr.playSFX(\"sssMusic/sibai.mp3\");\r\n                }\r\n            }\r\n\r\n            //特殊牌\r\n            if(data[i].arrPai.length == 13)\r\n            {\r\n                sn.getChildByName('comparPai').active = false;\r\n                sn.getChildByName('teshuPai').active = true;\r\n                var arrpai = data[i].arrPai;\r\n\r\n                for(let m = 0; m < arrpai.length; m++){\r\n                    var paiNode = this._seats[i].teshuPai.getChildByName(\"pai\" + m);\r\n                    var paiCom = paiNode.getComponent('pai');\r\n                    paiCom.setInfo(arrpai[m]);\r\n                }\r\n            }\r\n            else{\r\n                var tdPai = data[i].arrPai[0];\r\n                var zdPai = data[i].arrPai[1];\r\n                var wdPai = data[i].arrPai[2];\r\n                \r\n\r\n                //显示相关的牌\r\n                for(let m = 0; m < tdPai.length; m++){\r\n                    var paiNode = this._seats[i].tdPai.getChildByName(\"pai\" + m);\r\n                    var paiCom = paiNode.getComponent('pai');\r\n                    paiCom.setInfo(tdPai[m]);\r\n                }\r\n                for(let n = 0; n < zdPai.length; n++){\r\n                    var paiNode = this._seats[i].zdPai.getChildByName(\"pai\" + n);\r\n                    var paiCom = paiNode.getComponent('pai');\r\n                    paiCom.setInfo(zdPai[n]);\r\n                }\r\n                for(let k = 0; k < wdPai.length; k++){\r\n                    var paiNode = this._seats[i].wdPai.getChildByName(\"pai\" + k);\r\n                    var paiCom = paiNode.getComponent('pai');\r\n                    paiCom.setInfo(wdPai[k]);\r\n                }\r\n            }\r\n        }\r\n        \r\n    },\r\n\r\n    hiddenPai:function(isHidd){  //隐藏牌\r\n        for(var i = 0; i < 6; ++i){\r\n            cc.find(\"Canvas/gameStart/gameSeats/seat\"+i+\"/comparPai\").active = isHidd;\r\n            cc.find(\"Canvas/gameStart/gameSeats/seat\"+i+\"/teshupai\").active = false;\r\n            cc.find(\"Canvas/gameStart/gameSeats/seat\"+i+\"/paiBei\").active = isHidd;\r\n            cc.find(\"Canvas/gameStart/gameSeats/seat\"+i+\"/dankong\").active = false;\r\n         }\r\n    },\r\n\r\n    btnClick:function(event){\r\n        if(event.target.name === \"btn_close\"){\r\n            this.reset();\r\n            if(!window.sssGame.showTotalResult()){\r\n                this.hiddenPai(false);\r\n            }\r\n        }\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}