{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\sspgame/assets\\scripts\\sspgame\\sspGameSeats.js"],"names":["PaiType","require","cc","Class","extends","Component","properties","_chupaiSprite","_mopaiSprite","_chupaiPic","_mopaiPic","_opts","_options","_mySSPArr","onLoad","gameChild","find","sides","i","length","side","sideChild","getChildByName","push","children","getComponent","Sprite","opt","active","sprite","data","node","holds","j","childrenCount","opts","chiTargetPai","start","initSSP","seats","vv","sspNetMgr","seatIndex","seatData","sortHolds","lackingNum","liangPai","sspid","sspId","y","setSpriteFrameByPai","spriteFrame","len","suopai","pre","pai","SSPMgr","getSpriteFrameByPai","sortSSP","onGameBeign","reset","hideChupai","hideOptions","resetHolds","gamestate","getParent","hidden_tuoguan","hidden_tishi","begin","Animation","window","sspGame","fapai","console","log","PlaneLen","userid","index","getShowIndexByIndex","nc","holdsEmpty","replayMgr","isReplay","localIndex","getLocalIndexByIndex","initOtherSSP","curaction","scheduleOnce","suokuang","child","hidePai","numOfPlayers","hideprompt","dipai","game","sideName","sideRoot","foldRoot","n","name","hideChi","onGameHolds","self","setPosition","play","setHolds","seatindex","showIndex","getSide","sideHolds","num","arrChi","chupaiNum","idx","getSSPIndex","getFoldPre","scaleX","scaleY","CheckCanChi","Pai","Child","chiNode","bingchiNode","value","arrchi","Node","arr","arrpaiNode","k","chiNode0","chiNode1","num1","leftPai","rightPai","midPai","button","havePai","showMopai","mopaiIndex","showChupai","chupai","chupaiIndex","userMgr","userId","getIndexof","kuangIndex","pai1","type","showAction","hu","gang","peng","chi","addOption","btnName","btn"],"mappings":";;;;;;AAAA,IAAIA,UAAUC,QAAQ,QAAR,EAAkBD,OAAhC;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,uBAAc,EADN;AAERC,sBAAa,EAFL;AAGRC,oBAAW,EAHH;AAIRC,mBAAU,EAJF;AAKRC,eAAO,EALC;AAMRC,kBAAS,IAND;AAORC,mBAAU;AAPF,KAHP;;AAaL;AACAC,YAAQ,kBAAY;AAChB,YAAIC,YAAYb,GAAGc,IAAH,CAAQ,aAAR,CAAhB;AACA,YAAIC,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAIE,OAAOH,MAAMC,CAAN,CAAX;;AAEA,gBAAIG,YAAYN,UAAUO,cAAV,CAAyBF,IAAzB,CAAhB;AACA,iBAAKb,aAAL,CAAmBgB,IAAnB,CAAwBF,UAAUC,cAAV,CAAyB,QAAzB,EAAmCE,QAAnC,CAA4C,CAA5C,EAA+CC,YAA/C,CAA4DvB,GAAGwB,MAA/D,CAAxB;AACA,iBAAKjB,UAAL,CAAgBc,IAAhB,CAAqBF,UAAUC,cAAV,CAAyB,QAAzB,EAAmCE,QAAnC,CAA4C,CAA5C,EAA+CC,YAA/C,CAA4DvB,GAAGwB,MAA/D,CAArB;AACA,iBAAKjB,UAAL,CAAgBc,IAAhB,CAAqBF,UAAUC,cAAV,CAAyB,QAAzB,EAAmCE,QAAnC,CAA4C,CAA5C,EAA+CC,YAA/C,CAA4DvB,GAAGwB,MAA/D,CAArB;;AAEA,iBAAKlB,YAAL,CAAkBe,IAAlB,CAAuBF,UAAUC,cAAV,CAAyB,OAAzB,EAAkCE,QAAlC,CAA2C,CAA3C,EAA8CC,YAA9C,CAA2DvB,GAAGwB,MAA9D,CAAvB;AACA,iBAAKhB,SAAL,CAAea,IAAf,CAAoBF,UAAUC,cAAV,CAAyB,OAAzB,EAAkCE,QAAlC,CAA2C,CAA3C,EAA8CC,YAA9C,CAA2DvB,GAAGwB,MAA9D,CAApB;AACA,iBAAKhB,SAAL,CAAea,IAAf,CAAoBF,UAAUC,cAAV,CAAyB,OAAzB,EAAkCE,QAAlC,CAA2C,CAA3C,EAA8CC,YAA9C,CAA2DvB,GAAGwB,MAA9D,CAApB;;AAEA,gBAAIC,MAAMN,UAAUC,cAAV,CAAyB,KAAzB,CAAV;AACAK,gBAAIC,MAAJ,GAAa,KAAb;AACA,gBAAIC,SAASF,IAAIL,cAAJ,CAAmB,KAAnB,EAA0BG,YAA1B,CAAuCvB,GAAGwB,MAA1C,CAAb;AACA,gBAAII,OAAO;AACPC,sBAAKJ,GADE;AAEPE,wBAAOA;AAFA,aAAX;AAIA,iBAAKlB,KAAL,CAAWY,IAAX,CAAgBO,IAAhB;AACA,gBAAIZ,IAAI,CAAR,EAAW;AACP,oBAAIc,QAAQX,UAAUC,cAAV,CAAyB,OAAzB,CAAZ;AACA,qBAAK,IAAIW,IAAI,CAAb,EAAgBA,IAAID,MAAME,aAA1B,EAAyC,EAAED,CAA3C,EAA8C;AAC1C,wBAAIF,OAAOC,MAAMR,QAAN,CAAeS,CAAf,CAAX;AACAF,yBAAKH,MAAL,GAAc,KAAd;AACH;AACJ;AACJ;AACD,YAAIO,OAAOpB,UAAUO,cAAV,CAAyB,KAAzB,CAAX;AACA,aAAKV,QAAL,GAAgBuB,IAAhB;AACA,aAAKC,YAAL;AACH,KAhDI;;AAkDLC,WAAM,iBAAU;AACZ,YAAItB,YAAYb,GAAGc,IAAH,CAAQ,aAAR,CAAhB;AACA,YAAIC,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAIE,OAAOH,MAAMC,CAAN,CAAX;;AAEA,gBAAIG,YAAYN,UAAUO,cAAV,CAAyBF,IAAzB,CAAhB;AACA,iBAAKb,aAAL,CAAmBgB,IAAnB,CAAwBF,UAAUC,cAAV,CAAyB,QAAzB,EAAmCE,QAAnC,CAA4C,CAA5C,EAA+CC,YAA/C,CAA4DvB,GAAGwB,MAA/D,CAAxB;AACA,iBAAKjB,UAAL,CAAgBc,IAAhB,CAAqBF,UAAUC,cAAV,CAAyB,QAAzB,EAAmCE,QAAnC,CAA4C,CAA5C,EAA+CC,YAA/C,CAA4DvB,GAAGwB,MAA/D,CAArB;AACA,iBAAKjB,UAAL,CAAgBc,IAAhB,CAAqBF,UAAUC,cAAV,CAAyB,QAAzB,EAAmCE,QAAnC,CAA4C,CAA5C,EAA+CC,YAA/C,CAA4DvB,GAAGwB,MAA/D,CAArB;;AAEA,iBAAKlB,YAAL,CAAkBe,IAAlB,CAAuBF,UAAUC,cAAV,CAAyB,OAAzB,EAAkCE,QAAlC,CAA2C,CAA3C,EAA8CC,YAA9C,CAA2DvB,GAAGwB,MAA9D,CAAvB;AACA,iBAAKhB,SAAL,CAAea,IAAf,CAAoBF,UAAUC,cAAV,CAAyB,OAAzB,EAAkCE,QAAlC,CAA2C,CAA3C,EAA8CC,YAA9C,CAA2DvB,GAAGwB,MAA9D,CAApB;AACA,iBAAKhB,SAAL,CAAea,IAAf,CAAoBF,UAAUC,cAAV,CAAyB,OAAzB,EAAkCE,QAAlC,CAA2C,CAA3C,EAA8CC,YAA9C,CAA2DvB,GAAGwB,MAA9D,CAApB;;AAEA,gBAAIC,MAAMN,UAAUC,cAAV,CAAyB,KAAzB,CAAV;AACAK,gBAAIC,MAAJ,GAAa,KAAb;AACA,gBAAIC,SAASF,IAAIL,cAAJ,CAAmB,KAAnB,EAA0BG,YAA1B,CAAuCvB,GAAGwB,MAA1C,CAAb;AACA,gBAAII,OAAO;AACPC,sBAAKJ,GADE;AAEPE,wBAAOA;AAFA,aAAX;AAIA,iBAAKlB,KAAL,CAAWY,IAAX,CAAgBO,IAAhB;AACA,gBAAIZ,IAAI,CAAR,EAAW;AACP,oBAAIc,QAAQX,UAAUC,cAAV,CAAyB,OAAzB,CAAZ;AACH;AACJ;AACD,YAAIa,OAAOpB,UAAUO,cAAV,CAAyB,KAAzB,CAAX;AACA,aAAKV,QAAL,GAAgBuB,IAAhB;AACA,aAAKC,YAAL;AACH,KAhFI;;AAkFLE,aAAQ,iBAASzB,SAAT,EAAmB;AAAE;AACzB,aAAKA,SAAL,GAAiBA,SAAjB;AACA,YAAI0B,QAAQrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBF,KAA5B;AACA,YAAGrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBC,SAAhB,KAA8B,CAAC,CAAlC,EAAoC;AAChCxC,eAAGsC,EAAH,CAAMC,SAAN,CAAgBC,SAAhB,GAA4B,CAA5B;AACH;AACD,YAAIC,WAAWJ,MAAMrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBC,SAAtB,CAAf;AACA,YAAIV,QAAQ,KAAKY,SAAL,CAAeD,QAAf,CAAZ;AACA,YAAGX,SAAS,IAAZ,EAAiB;AACb;AACH;;AAED;AACA,YAAIa,aAAa,CAAjB;AACAA,sBAAcF,SAASG,QAAT,CAAkB3B,MAAhC;;AAEA,aAAI,IAAID,IAAI,CAAZ,EAAeA,IAAIc,MAAMb,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAI6B,QAAQf,MAAMd,CAAN,CAAZ;AACA,gBAAIW,SAAS,KAAKhB,SAAL,CAAe,KAAGK,CAAlB,CAAb;AACAW,mBAAOE,IAAP,CAAYiB,KAAZ,GAAoBD,KAApB;AACAlB,mBAAOE,IAAP,CAAYkB,CAAZ,GAAgB,CAAhB;AACA,iBAAKC,mBAAL,CAAyB,IAAzB,EAA8BrB,MAA9B,EAAqCkB,KAArC;AACH;;AAED,aAAI,IAAI7B,IAAI,CAAZ,EAAeA,IAAI2B,UAAnB,EAA+B,EAAE3B,CAAjC,EAAmC;AAC/B,gBAAIW,SAAShB,UAAUK,CAAV,CAAb;AACAW,mBAAOE,IAAP,CAAYiB,KAAZ,GAAoB,IAApB;AACAnB,mBAAOsB,WAAP,GAAqB,IAArB;AACAtB,mBAAOE,IAAP,CAAYH,MAAZ,GAAqB,KAArB;AACH;AACD,YAAIwB,MAAMvC,UAAUM,MAAV,GAAmBa,MAAMb,MAAnC,CA9BuB,CA8BmB;AAC1C,aAAI,IAAID,IAAI,CAAZ,EAAeA,IAAIkC,GAAnB,EAAwB,EAAElC,CAA1B,EAA4B;AACxB,gBAAIW,SAAShB,UAAUK,CAAV,CAAb;AACAW,mBAAOE,IAAP,CAAYiB,KAAZ,GAAoB,IAApB;AACAnB,mBAAOsB,WAAP,GAAqB,IAArB;AACAtB,mBAAOE,IAAP,CAAYH,MAAZ,GAAqB,KAArB;AACH;AACD,aAAKyB,MAAL;AACH,KAxHI;AAyHLH,yBAAoB,6BAASI,GAAT,EAAazB,MAAb,EAAoB0B,GAApB,EAAwB;AACxC1B,eAAOsB,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiCH,GAAjC,EAAqCC,GAArC,CAArB;AACA1B,eAAOE,IAAP,CAAYH,MAAZ,GAAqB,IAArB;AACH,KA5HI;AA6HLgB,eAAU,mBAASD,QAAT,EAAkB;AACxB,YAAIX,QAAQW,SAASX,KAArB;AACA,YAAGA,SAAS,IAAZ,EAAiB;AACb,mBAAO,IAAP;AACH;;AAED9B,WAAGsC,EAAH,CAAMgB,MAAN,CAAaE,OAAb,CAAqB1B,KAArB;AACA,eAAOA,KAAP;AACH,KArII;;AAuIL2B,iBAAY,qBAAS9C,SAAT,EAAmB;AAC3B,aAAK+C,KAAL;;AAEA,aAAKC,UAAL;AACA,aAAKC,WAAL;AACA,aAAKC,UAAL;;AAEA,YAAI7D,GAAGsC,EAAH,CAAMC,SAAN,CAAgBuB,SAAhB,KAA8B,SAAlC,EAA6C;AACzC,iBAAKjC,IAAL,CAAUkC,SAAV,GAAsB3C,cAAtB,CAAqC,MAArC,EAA6CM,MAA7C,GAAsD,KAAtD;AACA,iBAAKG,IAAL,CAAUkC,SAAV,GAAsB3C,cAAtB,CAAqC,SAArC,EAAgDM,MAAhD,GAAyD,IAAzD;AACH,SAHD,MAIK,IAAG1B,GAAGsC,EAAH,CAAMC,SAAN,CAAgBuB,SAAnB,EAA6B;AAC9B,iBAAKjC,IAAL,CAAUkC,SAAV,GAAsB3C,cAAtB,CAAqC,MAArC,EAA6CM,MAA7C,GAAsD,IAAtD;AACA,iBAAKG,IAAL,CAAUkC,SAAV,GAAsB3C,cAAtB,CAAqC,SAArC,EAAgDM,MAAhD,GAAyD,KAAzD;AACH;AACD,aAAKG,IAAL,CAAUkC,SAAV,GAAsBxC,YAAtB,CAAmC,SAAnC,EAA8CyC,cAA9C;AACA,aAAKnC,IAAL,CAAUkC,SAAV,GAAsBxC,YAAtB,CAAmC,SAAnC,EAA8C0C,YAA9C;;AAEA,aAAKC,KAAL,GAAY,YAAU;AAClB,gBAAIC,YAAYC,OAAOC,OAAP,CAAeF,SAA/B,CADkB,CACuB;AACzC,iBAAI,IAAInD,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACtB,oBAAIsD,QAAQH,UAAUG,KAAV,CAAgBtD,CAAhB,CAAZ;AACAsD,sBAAM5C,MAAN,GAAe,KAAf;AACH;AACD6C,oBAAQC,GAAR,CAAY,aAAZ;;AAEA,gBAAInC,QAAQrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBF,KAA5B;AACA,gBAAIoC,WAAW,CAAf,CATkB,CASD;AACjB,iBAAI,IAAIzD,IAAI,CAAZ,EAAeA,IAAIqB,MAAMpB,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,oBAAGqB,MAAMrB,CAAN,EAAS0D,MAAT,GAAkB,CAArB,EAAuB;AACnBD;AACH;AACJ;;AAED,gBAAI1D,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,gBAAIF,YAAYb,GAAGc,IAAH,CAAQ,aAAR,CAAhB;AACA,iBAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,oBAAIA,IAAIyD,QAAR,EAAkB;AACd;AACH;AACD,oBAAIE,QAAQ3E,GAAGsC,EAAH,CAAMC,SAAN,CAAgBqC,mBAAhB,CAAoC5D,CAApC,CAAZ;AACA,oBAAIG,YAAYN,UAAUO,cAAV,CAAyBL,MAAM4D,KAAN,CAAzB,CAAhB;AACA,oBAAI7C,QAAQX,UAAUC,cAAV,CAAyB,OAAzB,CAAZ;AACA,qBAAI,IAAIW,IAAI,CAAZ,EAAeA,IAAID,MAAME,aAAzB,EAAwC,EAAED,CAA1C,EAA4C;AACxC,wBAAI8C,KAAK/C,MAAMR,QAAN,CAAeS,CAAf,CAAT;AACA8C,uBAAGnD,MAAH,GAAY,IAAZ;AACA,wBAAIC,SAASkD,GAAGtD,YAAH,CAAgBvB,GAAGwB,MAAnB,CAAb;AACAG,2BAAOsB,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAawB,UAAb,CAAwBH,KAAxB,CAArB;AACA,wBAAG5C,MAAM,EAAN,IAAYA,MAAM,EAArB,EAAwB;AACpB8C,2BAAGnD,MAAH,GAAY,KAAZ;AACH;AACJ;AACJ;;AAED,gBAAG1B,GAAGsC,EAAH,CAAMC,SAAN,CAAgBuB,SAAhB,IAA6B,SAA7B,IAA0C9D,GAAGsC,EAAH,CAAMyC,SAAN,CAAgBC,QAAhB,MAA8B,KAA3E,EAAiF;AAC7E;AACH;;AAED,iBAAK5C,OAAL,CAAazB,SAAb;AACA,gBAAI0B,QAAQrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBF,KAA5B;AACA,iBAAI,IAAIrB,CAAR,IAAaqB,KAAb,EAAmB;AACf,oBAAII,WAAWJ,MAAMrB,CAAN,CAAf;AACA,oBAAGqB,MAAMrB,CAAN,EAAS0D,MAAT,IAAmB,CAAtB,EAAwB;AACpB;AACH;AACD,oBAAIO,aAAajF,GAAGsC,EAAH,CAAMC,SAAN,CAAgB2C,oBAAhB,CAAqClE,CAArC,CAAjB;AACA,oBAAGiE,cAAc,CAAjB,EAAmB;AACf,yBAAKE,YAAL,CAAkB1C,QAAlB;AACH;AACJ;;AAED,gBAAGzC,GAAGsC,EAAH,CAAMC,SAAN,CAAgB6C,SAAhB,IAA6B,IAAhC,EAAqC;AACjCpF,mBAAGsC,EAAH,CAAMC,SAAN,CAAgB6C,SAAhB,GAA4B,IAA5B;AACH;AACJ,SAxDD;;AA0DA,aAAKC,YAAL,CAAkB,KAAKnB,KAAvB,EAA6B,GAA7B;AAEH,KArNI;;AAuNLR,WAAM,iBAAU;AACZ,YAAI4B,WAAWtF,GAAGc,IAAH,CAAQ,6BAAR,CAAf;AACA,aAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAGsE,SAAStD,aAA3B,EAA0C,EAAEhB,CAA5C,EAA8C;AAC1C,gBAAIuE,QAAQD,SAAShE,QAAT,CAAkBN,CAAlB,CAAZ;AACAuE,kBAAM7D,MAAN,GAAe,KAAf;AACH;AACD,aAAKiC,UAAL;AACA,aAAK6B,OAAL;AACH,KA/NI;;AAiOLA,aAAQ,mBAAU;AACd,YAAIzE,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,YAAIF,YAAYb,GAAGc,IAAH,CAAQ,aAAR,CAAhB;AACA,aAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAIA,IAAIhB,GAAGsC,EAAH,CAAMC,SAAN,CAAgBkD,YAAxB,EAAsC;AAClC;AACH;AACD,gBAAId,QAAQ3E,GAAGsC,EAAH,CAAMC,SAAN,CAAgBqC,mBAAhB,CAAoC5D,CAApC,CAAZ;AACA,gBAAIG,YAAYN,UAAUO,cAAV,CAAyBL,MAAM4D,KAAN,CAAzB,CAAhB;AACA,gBAAI7C,QAAQX,UAAUC,cAAV,CAAyB,OAAzB,CAAZ;AACA,iBAAI,IAAIW,IAAI,CAAZ,EAAeA,IAAID,MAAME,aAAzB,EAAwC,EAAED,CAA1C,EAA4C;AACxC,oBAAI8C,KAAK/C,MAAMR,QAAN,CAAeS,CAAf,CAAT;AACA8C,mBAAGnD,MAAH,GAAY,KAAZ;AACH;AACJ;AACJ,KAhPI;;AAkPLmC,gBAAW,sBAAU;AACjB,YAAIhD,YAAYb,GAAGc,IAAH,CAAQ,aAAR,CAAhB;AACA,YAAIC,QAAQ,CAAC,OAAD,EAAS,IAAT,EAAc,MAAd,CAAZ;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAIE,OAAOH,MAAMC,CAAN,CAAX;;AAEA,gBAAIG,YAAYN,UAAUO,cAAV,CAAyBF,IAAzB,CAAhB;AACA,gBAAIY,QAAQX,UAAUC,cAAV,CAAyB,OAAzB,CAAZ;AACA,iBAAK,IAAIW,IAAI,CAAb,EAAgBA,IAAID,MAAME,aAA1B,EAAyC,EAAED,CAA3C,EAA8C;AAC1C,oBAAIF,OAAOC,MAAMR,QAAN,CAAeS,CAAf,CAAX;AACAF,qBAAKH,MAAL,GAAc,KAAd;AACH;AACJ;AACD,aAAKgE,UAAL;AACA,YAAIC,QAAQ3F,GAAGc,IAAH,CAAQ,mBAAR,CAAZ;AACA6E,cAAMjE,MAAN,GAAe,KAAf;AACH,KAlQI;AAmQLgE,gBAAW,sBAAU;AACjB,YAAIE,OAAO5F,GAAGc,IAAH,CAAQ,aAAR,CAAX;AACA,YAAIC,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAI6E,WAAW9E,MAAMC,CAAN,CAAf;AACA,gBAAI8E,WAAWF,KAAKxE,cAAL,CAAoByE,QAApB,CAAf;AACA,gBAAIE,WAAWD,SAAS1E,cAAT,CAAwB,OAAxB,CAAf;AACA,gBAAI4E,IAAID,SAASzE,QAAT,CAAkByE,SAASzE,QAAT,CAAkBL,MAAlB,GAAyB,CAA3C,CAAR;AACA+E,cAAEtE,MAAF,GAAW,KAAX;AACH;;AAED1B,WAAGc,IAAH,CAAQ,qBAAR,EAA+BY,MAA/B,GAAwC,KAAxC;AACA1B,WAAGc,IAAH,CAAQ,qBAAR,EAA+BY,MAA/B,GAAwC,KAAxC;AACA1B,WAAGc,IAAH,CAAQ,qBAAR,EAA+BY,MAA/B,GAAwC,KAAxC;AACA1B,WAAGc,IAAH,CAAQ,qBAAR,EAA+BY,MAA/B,GAAwC,KAAxC;AACH,KAlRI;;AAqRLiC,gBAAW,sBAAU;AACjB,aAAI,IAAI3C,IAAI,CAAZ,EAAeA,IAAI,KAAKX,aAAL,CAAmBY,MAAtC,EAA8C,EAAED,CAAhD,EAAkD;AAC9C,iBAAKX,aAAL,CAAmBW,CAAnB,EAAsBa,IAAtB,CAA2BH,MAA3B,GAAoC,KAApC;AACH;AACD,aAAI,IAAIV,IAAI,CAAZ,EAAeA,IAAI,KAAKT,UAAL,CAAgBU,MAAnC,EAA2C,EAAED,CAA7C,EAA+C;AAC3C,iBAAKT,UAAL,CAAgBS,CAAhB,EAAmBa,IAAnB,CAAwBH,MAAxB,GAAiC,KAAjC;AACH;AACD,aAAI,IAAIV,IAAI,CAAZ,EAAeA,IAAI,KAAKV,YAAL,CAAkBW,MAArC,EAA6C,EAAED,CAA/C,EAAiD;AAC7C,iBAAKV,YAAL,CAAkBU,CAAlB,EAAqBa,IAArB,CAA0BH,MAA1B,GAAmC,KAAnC;AACH;AACD,aAAI,IAAIV,IAAI,CAAZ,EAAeA,IAAI,KAAKR,SAAL,CAAeS,MAAlC,EAA0C,EAAED,CAA5C,EAA8C;AAC1C,iBAAKR,SAAL,CAAeQ,CAAf,EAAkBa,IAAlB,CAAuBH,MAAvB,GAAgC,KAAhC;AACH;AACJ,KAlSI;AAmSLkC,iBAAY,qBAAShC,IAAT,EAAc;AACtB,aAAKlB,QAAL,CAAcgB,MAAd,GAAuB,KAAvB;AACA,aAAI,IAAIV,IAAI,CAAZ,EAAeA,IAAI,KAAKN,QAAL,CAAcsB,aAAjC,EAAgD,EAAEhB,CAAlD,EAAoD;AAChD,gBAAIuE,QAAQ,KAAK7E,QAAL,CAAcY,QAAd,CAAuBN,CAAvB,CAAZ;AACA,gBAAGuE,MAAMU,IAAN,IAAc,IAAjB,EAAsB;AAClBV,sBAAM7D,MAAN,GAAe,KAAf;AACA6D,sBAAMnE,cAAN,CAAqB,SAArB,EAAgCM,MAAhC,GAAyC,KAAzC;AACA6D,sBAAMnE,cAAN,CAAqB,SAArB,EAAgCM,MAAhC,GAAyC,KAAzC;AACA6D,sBAAMnE,cAAN,CAAqB,OAArB,EAA8BM,MAA9B,GAAuC,KAAvC;AACA6D,sBAAMnE,cAAN,CAAqB,QAArB,EAA+BM,MAA/B,GAAwC,KAAxC;AACH;AACJ;AACJ,KA/SI;AAgTLwE,aAAQ,mBAAU;AACd,aAAI,IAAIlF,IAAI,CAAZ,EAAeA,IAAI,KAAKN,QAAL,CAAcsB,aAAjC,EAAgD,EAAEhB,CAAlD,EAAoD;AAChD,gBAAIuE,QAAQ,KAAK7E,QAAL,CAAcY,QAAd,CAAuBN,CAAvB,CAAZ;AACA,gBAAGuE,MAAMU,IAAN,IAAc,IAAjB,EAAsB;AAClBV,sBAAMnE,cAAN,CAAqB,QAArB,EAA+BM,MAA/B,GAAwC,KAAxC;AACH;AACJ;AACJ,KAvTI;AAwTLyE,iBAAY,qBAASxF,SAAT,EAAmBwD,SAAnB,EAA6B;AACrC;AACA,YAAIiC,OAAO,IAAX;AACA,YAAI/D,QAAQrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBF,KAA5B;AACA8B,kBAAUtC,IAAV,CAAewE,WAAf,CAA2B,CAA3B,EAA6B,CAA7B;AACA,YAAI5B,WAAW,CAAf,CALqC,CAKpB;AACjB,aAAI,IAAIzD,IAAI,CAAZ,EAAeA,IAAIqB,MAAMpB,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAGqB,MAAMrB,CAAN,EAAS0D,MAAT,GAAkB,CAArB,EAAuB;AACnB,oBAAIC,QAAQ3E,GAAGsC,EAAH,CAAMC,SAAN,CAAgBqC,mBAAhB,CAAoC5D,CAApC,CAAZ;AACA,oBAAIsD,QAAQH,UAAUG,KAAV,CAAgBK,KAAhB,CAAZ;AACAL,sBAAM5C,MAAN,GAAe,IAAf;AACA4C,sBAAM/C,YAAN,CAAmBvB,GAAGmE,SAAtB,EAAiCmC,IAAjC,CAAsC,OAAtC;AACH;AACJ;;AAED,aAAKC,QAAL,GAAe,YAAU;AACrBH,iBAAKhE,OAAL,CAAazB,SAAb;AACH,SAFD;;AAIA,aAAK0E,YAAL,CAAkB,KAAKkB,QAAvB,EAAgC,GAAhC;AACH,KA5UI;AA6ULpB,kBAAa,sBAAS1C,QAAT,EAAkB;AAC3B,YAAIwC,aAAajF,GAAGsC,EAAH,CAAMC,SAAN,CAAgB2C,oBAAhB,CAAqCzC,SAAS+D,SAA9C,CAAjB;AACA,YAAIC,YAAYzG,GAAGsC,EAAH,CAAMC,SAAN,CAAgBqC,mBAAhB,CAAoCK,UAApC,CAAhB;AACA,YAAGwB,aAAa,CAAhB,EAAkB;AACd;AACH;AACD,YAAIvF,OAAOlB,GAAGsC,EAAH,CAAMgB,MAAN,CAAaoD,OAAb,CAAqBD,SAArB,CAAX;AACA,YAAIb,OAAO5F,GAAGc,IAAH,CAAQ,aAAR,CAAX;AACA,YAAIgF,WAAWF,KAAKxE,cAAL,CAAoBF,IAApB,CAAf;AACA,YAAIyF,YAAYb,SAAS1E,cAAT,CAAwB,OAAxB,CAAhB;;AAEA,YAAIwF,MAAM,CAAV;AACA,YAAIC,SAASpE,SAASG,QAAtB,CAZ2B,CAYI;AAC/B,YAAGiE,MAAH,EAAU;AACN,iBAAI,IAAI7F,IAAG,CAAX,EAAaA,IAAI6F,OAAO5F,MAAxB,EAA+BD,GAA/B,EAAmC;AAC/B,oBAAG6F,OAAO7F,CAAP,EAAUqC,GAAb,EAAiB;AACb,wBAAIH,MAAM2D,OAAO7F,CAAP,EAAUqC,GAAV,CAAcpC,MAAd,GAAuB,CAAjC;AACH,iBAFD,MAGI;AACD,wBAAIiC,MAAM2D,OAAO7F,CAAP,EAAUC,MAAV,GAAmB,CAA7B;AACF;AACD2F,uBAAO1D,GAAP;AACH;AACJ;;AAED,YAAGT,SAASqE,SAAZ,EAAsB;AAClBF,mBAAOnE,SAASqE,SAAhB;AACH,SAFD,MAGI;AACA,gBAAGD,MAAH,EAAU;AACND,uBAAOC,OAAO5F,MAAd;AACH;AACJ;;AAGD,aAAI,IAAID,IAAI,CAAZ,EAAeA,IAAI4F,GAAnB,EAAwB,EAAE5F,CAA1B,EAA4B;AACxB,gBAAI+F,MAAM,KAAKC,WAAL,CAAiB9F,IAAjB,EAAsBF,CAAtB,EAAwByB,SAAS+D,SAAjC,CAAV;AACAG,sBAAUrF,QAAV,CAAmByF,GAAnB,EAAwBrF,MAAxB,GAAiC,KAAjC;AACH;;AAED,YAAI0B,MAAMpD,GAAGsC,EAAH,CAAMgB,MAAN,CAAa2D,UAAb,CAAwBR,SAAxB,CAAV;AACA,YAAI3E,QAAQ,KAAKY,SAAL,CAAeD,QAAf,CAAZ;AACA,YAAGX,SAAS,IAAT,IAAiBA,MAAMb,MAAN,GAAe,CAAnC,EAAqC;AACjC,iBAAI,IAAID,IAAI,CAAZ,EAAeA,IAAIc,MAAMb,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,oBAAI+F,MAAM/F,CAAV;AACA,oBAAGE,QAAQ,MAAX,EAAkB;AACd6F,0BAAM,KAAG/F,CAAT;AACH;AACD,oBAAIW,SAASgF,UAAUrF,QAAV,CAAmBN,CAAnB,EAAsBO,YAAtB,CAAmCvB,GAAGwB,MAAtC,CAAb;AACA,oBAAGN,QAAQ,IAAX,EAAgB;AACZS,2BAAOE,IAAP,CAAYqF,MAAZ,GAAqB,GAArB;AACAvF,2BAAOE,IAAP,CAAYsF,MAAZ,GAAqB,GAArB;AACH;AACDxF,uBAAOsB,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiCH,GAAjC,EAAqCtB,MAAMd,CAAN,CAArC,CAArB;AACH;AACJ;AACJ,KArYI;AAsYL;AACAoG,iBAAa,qBAAUC,GAAV,EAAe;AACxB,YAAI,CAACA,GAAL,EAAU;AACN;AACH;;AAED,YAAIxG,YAAYb,GAAGc,IAAH,CAAQ,aAAR,CAAhB;AACA,YAAIwG,QAAQzG,UAAUO,cAAV,CAAyB,SAAzB,CAAZ;AACA,YAAImG,UAAUD,MAAMlG,cAAN,CAAqB,KAArB,CAAd,CAPwB,CAOkB;AAC1C,YAAIoG,cAAcF,MAAMlG,cAAN,CAAqB,SAArB,CAAlB,CARwB,CAQ0B;;AAElD,YAAGiG,IAAIhE,GAAJ,CAAQoE,KAAR,KAAkB,CAArB,EAAuB;AACnBD,wBAAY9F,MAAZ,GAAqB,IAArB;AACA6F,oBAAQ7F,MAAR,GAAiB,KAAjB;;AAEA,gBAAIgG,SAAS,EAAb;AACA,iBAAI,IAAI1G,IAAI,CAAZ,EAAgBA,IAAI,CAApB,EAAsBA,GAAtB,EAA0B;AACtB,oBAAI2G,OAAOH,YAAYpG,cAAZ,CAA2B,YAAUJ,CAArC,CAAX;AACA2G,qBAAKjG,MAAL,GAAc,KAAd;AACAgG,uBAAOrG,IAAP,CAAYsG,IAAZ;AACH;AACD,iBAAI,IAAI3G,IAAI,CAAZ,EAAcA,IAAIqG,IAAIO,GAAJ,CAAQ3G,MAA1B,EAAiCD,GAAjC,EAAqC;AACjC0G,uBAAO1G,CAAP,EAAUU,MAAV,GAAmB,IAAnB;AACA,oBAAIwB,MAAMmE,IAAIO,GAAJ,CAAQ5G,CAAR,EAAWC,MAArB,CAFiC,CAEL;;AAE5B,oBAAI4G,aAAa,EAAjB;AACA,qBAAI,IAAI9F,IAAI,CAAZ,EAAgBA,IAAI,CAApB,EAAsBA,GAAtB,EAA0B;AACtB,wBAAI4F,OAAOD,OAAO1G,CAAP,EAAUI,cAAV,CAAyB,QAAMW,CAA/B,CAAX;AACA4F,yBAAKjG,MAAL,GAAc,KAAd;AACAmG,+BAAWxG,IAAX,CAAgBsG,IAAhB;AACH;;AAED,qBAAI,IAAIG,IAAI,CAAZ,EAAgBA,IAAIT,IAAIO,GAAJ,CAAQ5G,CAAR,EAAWC,MAA/B,EAAsC6G,GAAtC,EAA0C;AACtCD,+BAAWC,CAAX,EAAcpG,MAAd,GAAuB,IAAvB;AACAmG,+BAAWC,CAAX,EAAcvG,YAAd,CAA2BvB,GAAGwB,MAA9B,EAAsCyB,WAAtC,GAAoDjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAuC8D,IAAIO,GAAJ,CAAQ5G,CAAR,EAAW8G,CAAX,CAAvC,CAApD;AACH;AAEJ;AACJ,SA3BD,MA4BI;AACAN,wBAAY9F,MAAZ,GAAqB,KAArB;AACA6F,oBAAQ7F,MAAR,GAAiB,IAAjB;AACA,gBAAIqG,WAAWR,QAAQnG,cAAR,CAAuB,UAAvB,CAAf;AACA,gBAAI4G,WAAWT,QAAQnG,cAAR,CAAuB,UAAvB,CAAf;;AAEA,gBAAGiG,IAAIO,GAAJ,CAAQ,CAAR,EAAW3G,MAAX,KAAsB,CAAzB,EAA2B;AACvB,oBAAI2F,MAAM,CAAV;AACA,oBAAIqB,OAAO,CAAX;AACH,aAHD,MAIK,IAAGZ,IAAIO,GAAJ,CAAQ,CAAR,EAAW3G,MAAX,KAAsB,CAAzB,EAA2B;AAC5B,oBAAI2F,MAAM,CAAV;AACA,oBAAIqB,OAAO,CAAX;AACH;AACD,gBAAIC,UAAUH,SAAS3G,cAAT,CAAwB,SAAxB,EAAmCG,YAAnC,CAAgDvB,GAAGwB,MAAnD,CAAd;AACA0G,oBAAQjF,WAAR,GAAsBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAuC8D,IAAIO,GAAJ,CAAQhB,GAAR,EAAa,CAAb,CAAvC,CAAtB;AACA,gBAAIuB,WAAWJ,SAAS3G,cAAT,CAAwB,UAAxB,EAAoCG,YAApC,CAAiDvB,GAAGwB,MAApD,CAAf;AACA2G,qBAASlF,WAAT,GAAuBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAuC8D,IAAIO,GAAJ,CAAQhB,GAAR,EAAa,CAAb,CAAvC,CAAvB;;AAEA,gBAAIsB,UAAUF,SAAS5G,cAAT,CAAwB,SAAxB,EAAmCG,YAAnC,CAAgDvB,GAAGwB,MAAnD,CAAd;AACA0G,oBAAQjF,WAAR,GAAsBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAuC8D,IAAIO,GAAJ,CAAQK,IAAR,EAAc,CAAd,CAAvC,CAAtB;AACA,gBAAIE,WAAWH,SAAS5G,cAAT,CAAwB,UAAxB,EAAoCG,YAApC,CAAiDvB,GAAGwB,MAApD,CAAf;AACA2G,qBAASlF,WAAT,GAAuBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAuC8D,IAAIO,GAAJ,CAAQK,IAAR,EAAc,CAAd,CAAvC,CAAvB;AACA,gBAAIG,SAASJ,SAAS5G,cAAT,CAAwB,QAAxB,EAAkCG,YAAlC,CAA+CvB,GAAGwB,MAAlD,CAAb;AACA4G,mBAAOnF,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAuC8D,IAAIO,GAAJ,CAAQK,IAAR,EAAc,CAAd,CAAvC,CAArB;AACH;AACJ,KAvcI;AAwcLjB,iBAAY,qBAAS9F,IAAT,EAAcyD,KAAd,EAAoB6B,SAApB,EAA8B;AACtC,YAAGtF,QAAQ,OAAR,IAAmBA,QAAQ,IAA9B,EAAmC;AAC/B,gBAAGsF,cAAcxG,GAAGsC,EAAH,CAAMC,SAAN,CAAgB8F,MAAjC,EAAwC;AACpC,uBAAO,KAAK1D,KAAZ;AACH;AACD,mBAAO,KAAKA,KAAZ;AACH;AACD,eAAOA,KAAP;AACH,KAhdI;AAidL2D,aAAS,iBAAUjF,GAAV,EAAe;AACpB,YAAI4B,aAAajF,GAAGsC,EAAH,CAAMC,SAAN,CAAgBC,SAAjC;AACA,aAAK,IAAIxB,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwB,EAAEA,CAA1B,EAA6B;AACzB,gBAAIhB,GAAGsC,EAAH,CAAMC,SAAN,CAAgBF,KAAhB,CAAsB4C,UAAtB,EAAkCnD,KAAlC,CAAwCd,CAAxC,KAA8CqC,GAAlD,EAAuD;AACnD,uBAAO,IAAP;AACH;AACJ;AACD,eAAO,KAAP;AACH,KAzdI;;AA2dLkF,eAAU,mBAAS3G,IAAT,EAAc;AACpB,YAAIA,KAAKyB,GAAL,CAASoE,KAAT,IAAkB,CAAtB,EAAyB;AACrB,gBAAIxC,aAAajF,GAAGsC,EAAH,CAAMC,SAAN,CAAgB2C,oBAAhB,CAAqClF,GAAGsC,EAAH,CAAMC,SAAN,CAAgBiG,UAArD,CAAjB;AACA,gBAAI/B,YAAYzG,GAAGsC,EAAH,CAAMC,SAAN,CAAgBqC,mBAAhB,CAAoCK,UAApC,CAAhB;AACA,gBAAItD,SAAS,KAAKrB,YAAL,CAAkBmG,SAAlB,CAAb;AACA9E,mBAAOsB,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAsC3B,KAAKyB,GAA3C,CAArB;AACA1B,mBAAOE,IAAP,CAAYH,MAAZ,GAAqB,IAArB;AACA,gBAAG+E,cAAc,CAAjB,EAAmB;AAAC;AAChB,qBAAKjG,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACA,qBAAKlB,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACH,aAHD,MAIK,IAAG+E,cAAc,CAAjB,EAAmB;AACpB,qBAAKjG,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACA,qBAAKlB,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACH,aAHI,MAIA,IAAG+E,cAAc,CAAjB,EAAmB;AACpB,qBAAKjG,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACA,qBAAKlB,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACH,aAHI,MAIA,IAAG+E,cAAc,CAAjB,EAAmB;AACpB,qBAAKjG,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACA,qBAAKlB,SAAL,CAAe,CAAf,EAAkBqB,IAAlB,CAAuBH,MAAvB,GAAgC,IAAhC;AACH;AACJ;AACJ,KAnfI;AAofL+G,gBAAW,sBAAU;AACjB,YAAIpF,MAAMrD,GAAGsC,EAAH,CAAMC,SAAN,CAAgBmG,MAA1B;AACA,YAAIrF,IAAIoE,KAAJ,IAAa,CAAjB,EAAoB;AAChB;AACA,gBAAIxC,aAAajF,GAAGsC,EAAH,CAAMC,SAAN,CAAgB2C,oBAAhB,CAAqClF,GAAGsC,EAAH,CAAMC,SAAN,CAAgBoG,WAArD,CAAjB;AACA,gBAAIlC,YAAYzG,GAAGsC,EAAH,CAAMC,SAAN,CAAgBqC,mBAAhB,CAAoCK,UAApC,CAAhB;;AAEA,gBAAG,KAAK5E,aAAL,CAAmBY,MAAnB,IAA6B,CAAhC,EAAkC;AAC9B,qBAAKL,MAAL;AACH;AACD,gBAAIe,SAAS,KAAKtB,aAAL,CAAmBoG,SAAnB,CAAb;AACA9E,mBAAOsB,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAsCF,GAAtC,CAArB;AACA1B,mBAAOE,IAAP,CAAYH,MAAZ,GAAqB,IAArB;AACA,gBAAG+E,cAAc,CAAjB,EAAmB;AAAC;AAChB,qBAAKlG,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACA,qBAAKnB,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACH,aAHD,MAIK,IAAG+E,cAAc,CAAjB,EAAmB;AACpB,qBAAKlG,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACA,qBAAKnB,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACH,aAHI,MAIA,IAAG+E,cAAc,CAAjB,EAAmB;AACpB,qBAAKlG,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACA,qBAAKnB,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACH,aAHI,MAIA,IAAG+E,cAAc,CAAjB,EAAmB;AACpB,qBAAKlG,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACA,qBAAKnB,UAAL,CAAgB,CAAhB,EAAmBsB,IAAnB,CAAwBH,MAAxB,GAAiC,IAAjC;AACH;AACJ;AACJ,KAlhBI;AAmhBLyB,YAAO,kBAAU;AACb,YAAImC,WAAWtF,GAAGc,IAAH,CAAQ,6BAAR,CAAf;AACA,aAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAGsE,SAAStD,aAA3B,EAA0C,EAAEhB,CAA5C,EAA8C;AAC1C,gBAAIuE,QAAQD,SAAShE,QAAT,CAAkBN,CAAlB,CAAZ;AACAuE,kBAAM7D,MAAN,GAAe,KAAf;AACH;;AAED,YAAIW,QAAQrC,GAAGsC,EAAH,CAAMC,SAAN,CAAgBF,KAA5B;AACA,aAAI,IAAIrB,IAAI,CAAZ,EAAeA,IAAIqB,MAAMpB,MAAzB,EAAiC,EAAED,CAAnC,EAAqC;AACjC,gBAAGqB,MAAMrB,CAAN,EAAS0D,MAAT,KAAoB1E,GAAGsC,EAAH,CAAMsG,OAAN,CAAcC,MAArC,EAA4C;AACxC,oBAAGxG,MAAMrB,CAAN,EAASc,KAAT,IAAkBO,MAAMrB,CAAN,EAASmC,MAA9B,EAAqC;AACjC,yBAAI,IAAIpB,IAAI,CAAZ,EAAcA,IAAIM,MAAMrB,CAAN,EAASmC,MAAT,CAAgBlC,MAAlC,EAAyCc,GAAzC,EAA6C;AACzC,4BAAIgF,MAAM,KAAK+B,UAAL,CAAgBzG,MAAMrB,CAAN,EAASc,KAAzB,EAA+BO,MAAMrB,CAAN,EAASmC,MAAT,CAAgBpB,CAAhB,EAAmB,CAAnB,CAA/B,CAAV;AACA,4BAAGgF,OAAO,CAAC,CAAX,EAAa;AACT,gCAAIgC,aAAa,KAAKhC,GAAtB;AACAzB,qCAAShE,QAAT,CAAkByH,UAAlB,EAA8BrH,MAA9B,GAAuC,IAAvC;AACH;AACJ;AACJ;AACJ;AACJ;AACJ,KAxiBI;AAyiBLoH,gBAAW,oBAAShH,KAAT,EAAekH,IAAf,EAAoB;AAAE;AAC7B,aAAI,IAAIhI,IAAI,CAAZ,EAAcA,IAAIc,MAAMb,MAAxB,EAA+BD,GAA/B,EAAmC;AAC/B,gBAAGc,MAAMd,CAAN,EAASiI,IAAT,KAAkBD,KAAKC,IAAvB,IAA+BnH,MAAMd,CAAN,EAASyG,KAAT,KAAmBuB,KAAKvB,KAA1D,EAAgE;AAC5D,uBAAOzG,CAAP;AACH;AACJ;AACD,eAAO,CAAC,CAAR;AACH,KAhjBI;AAijBLkI,gBAAW,oBAAStH,IAAT,EAAc;AACrB2C,gBAAQC,GAAR,CAAY,YAAZ;AACA,YAAG,KAAK9D,QAAL,CAAcgB,MAAjB,EAAwB;AACpB,iBAAKkC,WAAL;AACH;AACD5D,WAAGc,IAAH,CAAQ,wBAAR,EAAkCY,MAAlC,GAA2C,IAA3C;;AAEA,YAAGE,SAASA,KAAKuH,EAAL,IAAWvH,KAAKwH,IAAhB,IAAwBxH,KAAKyH,IAA7B,IAAqCzH,KAAK0H,GAAnD,CAAH,EAA2D;AACvD,iBAAK5I,QAAL,CAAcgB,MAAd,GAAuB,IAAvB;AACA,gBAAGE,KAAKuH,EAAR,EAAW;AACP,qBAAKI,SAAL,CAAe,OAAf,EAAuB3H,KAAKyB,GAA5B;AACArD,mBAAGc,IAAH,CAAQ,wBAAR,EAAkCY,MAAlC,GAA2C,KAA3C;AACH,aAHD,MAII;AACA,oBAAGE,KAAKyH,IAAR,EAAa;AACT,yBAAKE,SAAL,CAAe,SAAf,EAAyB3H,KAAKyB,GAA9B;AACH;;AAED,oBAAGzB,KAAKwH,IAAR,EAAa;AACT,yBAAKG,SAAL,CAAe,SAAf,EAAyB3H,KAAKyB,GAA9B;AACH;AACD,oBAAIzB,KAAK0H,GAAT,EAAe;AACX,yBAAKC,SAAL,CAAe,QAAf,EAAyB3H,KAAKyB,GAA9B;AACH;AACJ;AACJ;AACJ,KA3kBI;AA4kBLkG,eAAU,mBAASC,OAAT,EAAiBnG,GAAjB,EAAqB;AAC3B,aAAI,IAAIrC,IAAI,CAAZ,EAAeA,IAAI,KAAKN,QAAL,CAAcsB,aAAjC,EAAgD,EAAEhB,CAAlD,EAAoD;AAChD,gBAAIuE,QAAQ,KAAK7E,QAAL,CAAcY,QAAd,CAAuBN,CAAvB,CAAZ;AACA,gBAAGuE,MAAMU,IAAN,IAAc,IAAd,IAAsBV,MAAM7D,MAAN,IAAgB,KAAzC,EAA+C;AAC3C6D,sBAAM7D,MAAN,GAAe,IAAf;AACA,oBAAIC,SAAS4D,MAAMnE,cAAN,CAAqB,UAArB,EAAiCG,YAAjC,CAA8CvB,GAAGwB,MAAjD,CAAb;AACAG,uBAAOsB,WAAP,GAAqBjD,GAAGsC,EAAH,CAAMgB,MAAN,CAAaC,mBAAb,CAAiC,IAAjC,EAAsCF,GAAtC,CAArB;AACA,oBAAIoG,MAAMlE,MAAMnE,cAAN,CAAqBoI,OAArB,CAAV;AACAC,oBAAI/H,MAAJ,GAAa,IAAb;AACA+H,oBAAIpG,GAAJ,GAAUA,GAAV;AACA;AACH;AACJ;AACJ;AAzlBI,CAAT","file":"sspGameSeats.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sspgame","sourcesContent":["var PaiType = require(\"define\").PaiType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _chupaiSprite:[],\r\n        _mopaiSprite:[],\r\n        _chupaiPic:[],\r\n        _mopaiPic:[],\r\n        _opts: [],\r\n        _options:null,\r\n        _mySSPArr:[],\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var gameChild = cc.find(\"Canvas/game\");\r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var side = sides[i];\r\n            \r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[1].getComponent(cc.Sprite));\r\n            this._chupaiPic.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            this._chupaiPic.push(sideChild.getChildByName(\"ChuPai\").children[2].getComponent(cc.Sprite));\r\n\r\n            this._mopaiSprite.push(sideChild.getChildByName(\"MoPai\").children[1].getComponent(cc.Sprite));\r\n            this._mopaiPic.push(sideChild.getChildByName(\"MoPai\").children[0].getComponent(cc.Sprite));\r\n            this._mopaiPic.push(sideChild.getChildByName(\"MoPai\").children[2].getComponent(cc.Sprite));\r\n\r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node:opt,\r\n                sprite:sprite\r\n            };\r\n            this._opts.push(data);\r\n            if (i > 0) {\r\n                var holds = sideChild.getChildByName('holds');\r\n                for (let j = 0; j < holds.childrenCount; ++j) {\r\n                    let node = holds.children[j];\r\n                    node.active = false;\r\n                }\r\n            }\r\n        }\r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        this.chiTargetPai;\r\n    },\r\n\r\n    start:function(){\r\n        var gameChild = cc.find(\"Canvas/game\");\r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var side = sides[i];\r\n            \r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[1].getComponent(cc.Sprite));\r\n            this._chupaiPic.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            this._chupaiPic.push(sideChild.getChildByName(\"ChuPai\").children[2].getComponent(cc.Sprite));\r\n\r\n            this._mopaiSprite.push(sideChild.getChildByName(\"MoPai\").children[1].getComponent(cc.Sprite));\r\n            this._mopaiPic.push(sideChild.getChildByName(\"MoPai\").children[0].getComponent(cc.Sprite));\r\n            this._mopaiPic.push(sideChild.getChildByName(\"MoPai\").children[2].getComponent(cc.Sprite));\r\n\r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node:opt,\r\n                sprite:sprite\r\n            };\r\n            this._opts.push(data);\r\n            if (i > 0) {\r\n                var holds = sideChild.getChildByName('holds');\r\n            }\r\n        }\r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        this.chiTargetPai;\r\n    },\r\n\r\n    initSSP:function(_mySSPArr){ //手牌\r\n        this._mySSPArr = _mySSPArr;\r\n        var seats = cc.vv.sspNetMgr.seats;\r\n        if(cc.vv.sspNetMgr.seatIndex === -1){\r\n            cc.vv.sspNetMgr.seatIndex = 0;\r\n        }\r\n        var seatData = seats[cc.vv.sspNetMgr.seatIndex];\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds == null){\r\n            return;\r\n        }\r\n        \r\n        //初始化手牌\r\n        var lackingNum = 0;\r\n        lackingNum += seatData.liangPai.length;\r\n\r\n        for(var i = 0; i < holds.length; ++i){\r\n            var sspid = holds[i];\r\n            var sprite = this._mySSPArr[21-i];\r\n            sprite.node.sspId = sspid;\r\n            sprite.node.y = 0;\r\n            this.setSpriteFrameByPai(\"M_\",sprite,sspid);\r\n        }\r\n\r\n        for(var i = 0; i < lackingNum; ++i){\r\n            var sprite = _mySSPArr[i]; \r\n            sprite.node.sspId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        var len = _mySSPArr.length - holds.length;//空的牌有几个\r\n        for(var i = 0; i < len; ++i){\r\n            var sprite = _mySSPArr[i]; \r\n            sprite.node.sspId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        this.suopai();\r\n    },\r\n    setSpriteFrameByPai:function(pre,sprite,pai){\r\n        sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(pre,pai);\r\n        sprite.node.active = true;\r\n    },\r\n    sortHolds:function(seatData){\r\n        var holds = seatData.holds;\r\n        if(holds == null){\r\n            return null;\r\n        }\r\n        \r\n        cc.vv.SSPMgr.sortSSP(holds);\r\n        return holds;\r\n    },\r\n\r\n    onGameBeign:function(_mySSPArr){\r\n        this.reset();\r\n\r\n        this.hideChupai();\r\n        this.hideOptions();\r\n        this.resetHolds();\r\n\r\n        if (cc.vv.sspNetMgr.gamestate === 'prepare') {\r\n            this.node.getParent().getChildByName(\"game\").active = false;\r\n            this.node.getParent().getChildByName(\"prepare\").active = true;\r\n        }\r\n        else if(cc.vv.sspNetMgr.gamestate){\r\n            this.node.getParent().getChildByName(\"game\").active = true;\r\n            this.node.getParent().getChildByName(\"prepare\").active = false;\r\n        }\r\n        this.node.getParent().getComponent(\"sspgame\").hidden_tuoguan();\r\n        this.node.getParent().getComponent(\"sspgame\").hidden_tishi();\r\n\r\n        this.begin =function(){\r\n            var Animation = window.sspGame.Animation;//隐藏发牌动画\r\n            for(var i = 0; i < 4; i++){\r\n                var fapai = Animation.fapai[i];\r\n                fapai.active = false;\r\n            }\r\n            console.log(\"onGameBegin\");\r\n            \r\n            var seats = cc.vv.sspNetMgr.seats;\r\n            var PlaneLen = 0;//游戏人数\r\n            for(var i = 0; i < seats.length; ++i){\r\n                if(seats[i].userid > 0){\r\n                    PlaneLen++;\r\n                }\r\n            }\r\n\r\n            var sides = ['myself',\"right\",\"up\",\"left\"];\r\n            var gameChild = cc.find(\"Canvas/game\");\r\n            for(var i = 0; i < sides.length; ++i){\r\n                if (i > PlaneLen) {\r\n                    continue;\r\n                }\r\n                var index = cc.vv.sspNetMgr.getShowIndexByIndex(i);\r\n                var sideChild = gameChild.getChildByName(sides[index]);\r\n                var holds = sideChild.getChildByName(\"holds\");\r\n                for(var j = 0; j < holds.childrenCount; ++j){\r\n                    var nc = holds.children[j];\r\n                    nc.active = true;\r\n                    var sprite = nc.getComponent(cc.Sprite);\r\n                    sprite.spriteFrame = cc.vv.SSPMgr.holdsEmpty[index];\r\n                    if(j === 20 || j === 21){\r\n                        nc.active = false;\r\n                    }\r\n                }\r\n            }\r\n          \r\n            if(cc.vv.sspNetMgr.gamestate == \"prepare\" && cc.vv.replayMgr.isReplay() == false){\r\n                return;\r\n            }\r\n\r\n            this.initSSP(_mySSPArr);\r\n            var seats = cc.vv.sspNetMgr.seats;\r\n            for(var i in seats){\r\n                var seatData = seats[i];\r\n                if(seats[i].userid <= 0){\r\n                    continue;\r\n                }\r\n                var localIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(i);\r\n                if(localIndex != 0){\r\n                    this.initOtherSSP(seatData);\r\n                }\r\n            }\r\n            \r\n            if(cc.vv.sspNetMgr.curaction != null){\r\n                cc.vv.sspNetMgr.curaction = null;\r\n            }\r\n        }\r\n        \r\n        this.scheduleOnce(this.begin,0.5);\r\n        \r\n    },\r\n\r\n    reset:function(){\r\n        var suokuang = cc.find(\"Canvas/game/myself/suokuang\");\r\n        for(var i = 0; i <suokuang.childrenCount; ++i){\r\n            var child = suokuang.children[i]; \r\n            child.active = false;\r\n        }\r\n        this.hideChupai();\r\n        this.hidePai();\r\n    },\r\n\r\n    hidePai:function(){\r\n        var sides = ['myself',\"right\",\"up\",\"left\"];\r\n        var gameChild = cc.find(\"Canvas/game\");\r\n        for(var i = 0; i < sides.length; ++i){\r\n            if (i > cc.vv.sspNetMgr.numOfPlayers) {\r\n                continue;\r\n            }\r\n            var index = cc.vv.sspNetMgr.getShowIndexByIndex(i);\r\n            var sideChild = gameChild.getChildByName(sides[index]);\r\n            var holds = sideChild.getChildByName(\"holds\");\r\n            for(var j = 0; j < holds.childrenCount; ++j){\r\n                var nc = holds.children[j];\r\n                nc.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    resetHolds:function(){\r\n        var gameChild = cc.find(\"Canvas/game\");\r\n        var sides = [\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var side = sides[i];\r\n            \r\n            var sideChild = gameChild.getChildByName(side);\r\n            var holds = sideChild.getChildByName('holds');\r\n            for (let j = 0; j < holds.childrenCount; ++j) {\r\n                let node = holds.children[j];\r\n                node.active = false;\r\n            }\r\n        }\r\n        this.hideprompt();\r\n        var dipai = cc.find(\"Canvas/game/dipai\");\r\n        dipai.active = false;\r\n    },\r\n    hideprompt:function(){\r\n        var game = cc.find(\"Canvas/game\");\r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideName = sides[i];\r\n            var sideRoot = game.getChildByName(sideName);\r\n            var foldRoot = sideRoot.getChildByName(\"folds\");\r\n            var n = foldRoot.children[foldRoot.children.length-1];\r\n            n.active = false;\r\n        }\r\n        \r\n        cc.find(\"Canvas/game/promptM\").active = false;\r\n        cc.find(\"Canvas/game/promptR\").active = false;\r\n        cc.find(\"Canvas/game/promptU\").active = false;\r\n        cc.find(\"Canvas/game/promptL\").active = false;\r\n    },\r\n\r\n\r\n    hideChupai:function(){\r\n        for(var i = 0; i < this._chupaiSprite.length; ++i){\r\n            this._chupaiSprite[i].node.active = false;\r\n        }   \r\n        for(var i = 0; i < this._chupaiPic.length; ++i){\r\n            this._chupaiPic[i].node.active = false;\r\n        } \r\n        for(var i = 0; i < this._mopaiSprite.length; ++i){\r\n            this._mopaiSprite[i].node.active = false;\r\n        } \r\n        for(var i = 0; i < this._mopaiPic.length; ++i){\r\n            this._mopaiPic[i].node.active = false;\r\n        } \r\n    },\r\n    hideOptions:function(data){\r\n        this._options.active = false;\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\"){\r\n                child.active = false;\r\n                child.getChildByName(\"btnPeng\").active = false;\r\n                child.getChildByName(\"btnGang\").active = false;\r\n                child.getChildByName(\"btnHu\").active = false;\r\n                child.getChildByName(\"btnChi\").active = false;\r\n            }\r\n        }\r\n    },\r\n    hideChi:function(){\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\"){\r\n                child.getChildByName(\"btnChi\").active = false;\r\n            }\r\n        }\r\n    },\r\n    onGameHolds:function(_mySSPArr,Animation){\r\n        //发牌动画\r\n        var self = this;\r\n        var seats = cc.vv.sspNetMgr.seats;\r\n        Animation.node.setPosition(0,0);\r\n        var PlaneLen = 0;//游戏人数\r\n        for(var i = 0; i < seats.length; ++i){\r\n            if(seats[i].userid > 0){\r\n                var index = cc.vv.sspNetMgr.getShowIndexByIndex(i);\r\n                var fapai = Animation.fapai[index];\r\n                fapai.active = true;\r\n                fapai.getComponent(cc.Animation).play('fapai');\r\n            }\r\n        }\r\n        \r\n        this.setHolds =function(){\r\n            self.initSSP(_mySSPArr);\r\n        }\r\n        \r\n        this.scheduleOnce(this.setHolds,1.0);\r\n    },\r\n    initOtherSSP:function(seatData){\r\n        var localIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(seatData.seatindex);\r\n        var showIndex = cc.vv.sspNetMgr.getShowIndexByIndex(localIndex);\r\n        if(showIndex == 0){\r\n            return;\r\n        }\r\n        var side = cc.vv.SSPMgr.getSide(showIndex);\r\n        var game = cc.find(\"Canvas/game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var sideHolds = sideRoot.getChildByName(\"holds\");\r\n        \r\n        var num = 0;\r\n        var arrChi = seatData.liangPai;//获取总共出了多少牌\r\n        if(arrChi){\r\n            for(var i =0;i < arrChi.length;i++){\r\n                if(arrChi[i].pai){\r\n                    var len = arrChi[i].pai.length - 1;\r\n                }\r\n                else{\r\n                   var len = arrChi[i].length - 1; \r\n                }\r\n                num += len;\r\n            }\r\n        }\r\n\r\n        if(seatData.chupaiNum){\r\n            num += seatData.chupaiNum;\r\n        }\r\n        else{\r\n            if(arrChi){\r\n                num += arrChi.length;\r\n            }  \r\n        }\r\n        \r\n\r\n        for(var i = 0; i < num; ++i){\r\n            var idx = this.getSSPIndex(side,i,seatData.seatindex);\r\n            sideHolds.children[idx].active = false;\r\n        }\r\n\r\n        var pre = cc.vv.SSPMgr.getFoldPre(showIndex);\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds != null && holds.length > 0){\r\n            for(var i = 0; i < holds.length; ++i){\r\n                var idx = i;\r\n                if(side == \"left\"){\r\n                    idx = 21-i;\r\n                }\r\n                var sprite = sideHolds.children[i].getComponent(cc.Sprite); \r\n                if(side == \"up\"){\r\n                    sprite.node.scaleX = 0.5;\r\n                    sprite.node.scaleY = 0.5;                    \r\n                }\r\n                sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(pre,holds[i]);\r\n            }\r\n        }\r\n    },\r\n    //点击吃按钮会判断左吃右吃中吃\r\n    CheckCanChi: function (Pai) {\r\n        if (!Pai) {\r\n            return;\r\n        }\r\n\r\n        var gameChild = cc.find(\"Canvas/game\");\r\n        var Child = gameChild.getChildByName(\"ChiNode\");\r\n        var chiNode = Child.getChildByName(\"chi\");//普通的吃\r\n        var bingchiNode = Child.getChildByName(\"bingchi\");//兵的吃\r\n\r\n        if(Pai.pai.value === 7){\r\n            bingchiNode.active = true;\r\n            chiNode.active = false;\r\n\r\n            var arrchi = [];\r\n            for(var i = 0 ; i < 5;i++){\r\n                var Node = bingchiNode.getChildByName(\"ChiNode\"+i);\r\n                Node.active = false;\r\n                arrchi.push(Node);\r\n            }\r\n            for(var i = 0;i < Pai.arr.length;i++){\r\n                arrchi[i].active = true;\r\n                var len = Pai.arr[i].length;//第i个有几张牌\r\n\r\n                var arrpaiNode = [];\r\n                for(var j = 0 ; j < 4;j++){\r\n                    var Node = arrchi[i].getChildByName(\"Pai\"+j);\r\n                    Node.active = false;\r\n                    arrpaiNode.push(Node);\r\n                }\r\n\r\n                for(var k = 0 ; k < Pai.arr[i].length;k++){\r\n                    arrpaiNode[k].active = true;\r\n                    arrpaiNode[k].getComponent(cc.Sprite).spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\", Pai.arr[i][k]);\r\n                }\r\n\r\n            }\r\n        }\r\n        else{\r\n            bingchiNode.active = false;\r\n            chiNode.active = true;\r\n            var chiNode0 = chiNode.getChildByName(\"ChiNode0\");\r\n            var chiNode1 = chiNode.getChildByName(\"ChiNode1\");\r\n\r\n            if(Pai.arr[0].length === 2){\r\n                var num = 0;\r\n                var num1 = 1;\r\n            }\r\n            else if(Pai.arr[0].length === 3){\r\n                var num = 1;\r\n                var num1 = 0;\r\n            }\r\n            var leftPai = chiNode0.getChildByName(\"leftPai\").getComponent(cc.Sprite);\r\n            leftPai.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\", Pai.arr[num][0]);\r\n            var rightPai = chiNode0.getChildByName(\"rightPai\").getComponent(cc.Sprite);\r\n            rightPai.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\", Pai.arr[num][1]);\r\n\r\n            var leftPai = chiNode1.getChildByName(\"leftPai\").getComponent(cc.Sprite);\r\n            leftPai.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\", Pai.arr[num1][0]);\r\n            var rightPai = chiNode1.getChildByName(\"rightPai\").getComponent(cc.Sprite);\r\n            rightPai.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\", Pai.arr[num1][1]);\r\n            var midPai = chiNode1.getChildByName(\"midPai\").getComponent(cc.Sprite);\r\n            midPai.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\", Pai.arr[num1][2]);\r\n        }\r\n    },\r\n    getSSPIndex:function(side,index,seatindex){\r\n        if(side == \"right\" || side == \"up\"){\r\n            if(seatindex === cc.vv.sspNetMgr.button){\r\n                return 20 - index;\r\n            }\r\n            return 19 - index;\r\n        }\r\n        return index;\r\n    },\r\n    havePai: function (pai) {\r\n        var localIndex = cc.vv.sspNetMgr.seatIndex;\r\n        for (var i = 0; i < 22; ++i) {\r\n            if (cc.vv.sspNetMgr.seats[localIndex].holds[i] == pai) {\r\n                return true;  \r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    showMopai:function(data){\r\n        if( data.pai.value >= 0 ){\r\n            var localIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(cc.vv.sspNetMgr.mopaiIndex);\r\n            var showIndex = cc.vv.sspNetMgr.getShowIndexByIndex(localIndex);\r\n            var sprite = this._mopaiSprite[showIndex];\r\n            sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",data.pai);\r\n            sprite.node.active = true;  \r\n            if(showIndex === 0){//显示出牌图片\r\n                this._mopaiPic[0].node.active = true;\r\n                this._mopaiPic[1].node.active = true;\r\n            }\r\n            else if(showIndex === 1){\r\n                this._mopaiPic[2].node.active = true;\r\n                this._mopaiPic[3].node.active = true;\r\n            }\r\n            else if(showIndex === 2){\r\n                this._mopaiPic[4].node.active = true;\r\n                this._mopaiPic[5].node.active = true;\r\n            }\r\n            else if(showIndex === 3){\r\n                this._mopaiPic[6].node.active = true;\r\n                this._mopaiPic[7].node.active = true;\r\n            }\r\n        }\r\n    },\r\n    showChupai:function(){\r\n        var pai = cc.vv.sspNetMgr.chupai; \r\n        if( pai.value >= 0 ){\r\n            //\r\n            var localIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(cc.vv.sspNetMgr.chupaiIndex);\r\n            var showIndex = cc.vv.sspNetMgr.getShowIndexByIndex(localIndex);\r\n\r\n            if(this._chupaiSprite.length <= 0){\r\n                this.onLoad();\r\n            }\r\n            var sprite = this._chupaiSprite[showIndex];\r\n            sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",pai);\r\n            sprite.node.active = true;  \r\n            if(showIndex === 0){//显示出牌图片\r\n                this._chupaiPic[0].node.active = true;\r\n                this._chupaiPic[1].node.active = true;\r\n            }\r\n            else if(showIndex === 1){\r\n                this._chupaiPic[2].node.active = true;\r\n                this._chupaiPic[3].node.active = true;\r\n            }\r\n            else if(showIndex === 2){\r\n                this._chupaiPic[4].node.active = true;\r\n                this._chupaiPic[5].node.active = true;\r\n            }\r\n            else if(showIndex === 3){\r\n                this._chupaiPic[6].node.active = true;\r\n                this._chupaiPic[7].node.active = true;\r\n            }\r\n        }\r\n    },\r\n    suopai:function(){\r\n        var suokuang = cc.find(\"Canvas/game/myself/suokuang\");\r\n        for(var i = 0; i <suokuang.childrenCount; ++i){\r\n            var child = suokuang.children[i]; \r\n            child.active = false;\r\n        }\r\n\r\n        var seats = cc.vv.sspNetMgr.seats;\r\n        for(var i = 0; i < seats.length; ++i){\r\n            if(seats[i].userid === cc.vv.userMgr.userId){\r\n                if(seats[i].holds && seats[i].suopai){\r\n                    for(var j = 0;j < seats[i].suopai.length;j++){\r\n                        var idx = this.getIndexof(seats[i].holds,seats[i].suopai[j][0]);\r\n                        if(idx != -1){\r\n                            var kuangIndex = 19 - idx;\r\n                            suokuang.children[kuangIndex].active = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    getIndexof:function(holds,pai1){ //返回手牌里面这张牌的索引\r\n        for(var i = 0;i < holds.length;i++){\r\n            if(holds[i].type === pai1.type && holds[i].value === pai1.value){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    showAction:function(data){\r\n        console.log(\"showAction\");\r\n        if(this._options.active){\r\n            this.hideOptions();\r\n        }\r\n        cc.find(\"Canvas/game/ops/btnGuo\").active = true;\r\n        \r\n        if(data && (data.hu || data.gang || data.peng || data.chi)){\r\n            this._options.active = true;\r\n            if(data.hu){\r\n                this.addOption(\"btnHu\",data.pai);\r\n                cc.find(\"Canvas/game/ops/btnGuo\").active = false;\r\n            }\r\n            else{\r\n                if(data.peng){\r\n                    this.addOption(\"btnPeng\",data.pai);\r\n                }\r\n                \r\n                if(data.gang){\r\n                    this.addOption(\"btnGang\",data.pai);\r\n                }\r\n                if (data.chi ) {\r\n                    this.addOption(\"btnChi\", data.pai);\r\n                }\r\n            }   \r\n        }\r\n    },\r\n    addOption:function(btnName,pai){\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\" && child.active == false){\r\n                child.active = true;\r\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",pai);\r\n                var btn = child.getChildByName(btnName); \r\n                btn.active = true;\r\n                btn.pai = pai;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}