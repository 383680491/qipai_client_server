{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\JoinGameInput.js"],"names":["cc","Class","extends","Component","properties","nums","default","type","Sprite","_inputIndex","numAtlas","SpriteAtlas","onLoad","onEnable","onResetClicked","onInputFinished","roomId","vv","userMgr","enterRoom","ret","console","log","errcode","node","active","content","alert","show","bind","onInput","num","length","spriteFrame","getSpriteFrame","name","parseRoomID","onN0Clicked","onN1Clicked","onN2Clicked","onN3Clicked","onN4Clicked","onN5Clicked","onN6Clicked","onN7Clicked","onN8Clicked","onN9Clicked","i","onDelClicked","onCloseClicked","bObserver","str"],"mappings":"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","file":"JoinGameInput.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        nums:{\r\n            default:[],\r\n            type:cc.Sprite\r\n        },\r\n        _inputIndex:0,\r\n        numAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        \r\n    },\r\n    \r\n    onEnable:function(){\r\n        this.onResetClicked();\r\n    },\r\n    \r\n    onInputFinished:function(roomId){\r\n        cc.vv.userMgr.enterRoom(roomId,function(ret){\r\n            console.log(\"ret:\" + ret);\r\n            if(ret.errcode == 0){\r\n                this.node.active = false;\r\n            }\r\n            else{\r\n                var content = \"房间[\"+ roomId +\"]不存在，请重新输入!\";\r\n                if(ret.errcode == 4){\r\n                    content = \"房间[\"+ roomId + \"]已满!\";\r\n                }\r\n                if(ret.errcode == 555){\r\n                    content = \"该房间房费aa，钻石不足\";\r\n                }\r\n                cc.vv.alert.show(\"提示\",content);\r\n                this.onResetClicked();\r\n            }\r\n        }.bind(this)); \r\n    },\r\n    \r\n    onInput:function(num){\r\n        if(this._inputIndex >= this.nums.length){\r\n            return;\r\n        }\r\n        var spriteFrame = this.numAtlas.getSpriteFrame(num);\r\n        this.nums[this._inputIndex].spriteFrame = spriteFrame;\r\n        this.nums[this._inputIndex].name = num;\r\n        this._inputIndex += 1;\r\n        \r\n        if(this._inputIndex == this.nums.length){\r\n            var roomId = this.parseRoomID();\r\n            console.log(\"ok:\" + roomId);\r\n            this.onInputFinished(roomId);\r\n        }\r\n    },\r\n    \r\n    onN0Clicked:function(){\r\n        this.onInput(\"0\");  \r\n    },\r\n    onN1Clicked:function(){\r\n        this.onInput(\"1\");  \r\n    },\r\n    onN2Clicked:function(){\r\n        this.onInput(\"2\");\r\n    },\r\n    onN3Clicked:function(){\r\n        this.onInput(\"3\");\r\n    },\r\n    onN4Clicked:function(){\r\n        this.onInput(\"4\");\r\n    },\r\n    onN5Clicked:function(){\r\n        this.onInput(\"5\");\r\n    },\r\n    onN6Clicked:function(){\r\n        this.onInput(\"6\");\r\n    },\r\n    onN7Clicked:function(){\r\n        this.onInput(\"7\");\r\n    },\r\n    onN8Clicked:function(){\r\n        this.onInput(\"8\");\r\n    },\r\n    onN9Clicked:function(){\r\n        this.onInput(\"9\");\r\n    },\r\n    onResetClicked:function(){\r\n        for(var i = 0; i < this.nums.length; ++i){\r\n            this.nums[i].spriteFrame = null;\r\n            //this.nums[this._inputIndex].name = null;\r\n        }\r\n        this._inputIndex = 0;\r\n    },\r\n    onDelClicked:function(){\r\n        if(this._inputIndex > 0){\r\n            this._inputIndex -= 1;\r\n            this.nums[this._inputIndex].spriteFrame = null;\r\n            //this.nums[this._inputIndex].name = null;\r\n        }\r\n    },\r\n    onCloseClicked:function(){\r\n        this.node.active = false;\r\n        cc.vv.userMgr.bObserver = false;\r\n    },\r\n    \r\n    parseRoomID:function(){\r\n        var str = \"\";\r\n        for(var i = 0; i < this.nums.length; ++i){\r\n            str += this.nums[i].name;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}