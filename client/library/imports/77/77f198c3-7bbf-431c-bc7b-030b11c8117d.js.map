{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\SSPMgr.js"],"names":["mahjongSprites","cc","Class","extends","Component","properties","leftAtlas","default","type","SpriteAtlas","rightAtlas","bottomAtlas","bottomFoldAtlas","upAtlas","pengPrefabSelf","Prefab","pengPrefabLeft","holdsEmpty","SpriteFrame","_sides","_pres","_foldPres","onLoad","vv","SSPMgr","getMahjongSpriteByID","data","value","getSSPType","i","getSpriteFrameByPai","pre","pai","spriteFrameName","getSpriteFrame","getAudioURLByPai","id","realId","getEmptySpriteFrame","side","getHoldsEmptySpriteFrame","sortSSP","arrPai","self","sort","a","b","t1","t2","sortSSPF","getSide","localIndex","getPre","getFoldPre"],"mappings":"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","file":"SSPMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var mahjongSprites = [];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        leftAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        rightAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        bottomAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        bottomFoldAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        upAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n\r\n        pengPrefabSelf:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        \r\n        pengPrefabLeft:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        \r\n        holdsEmpty:{\r\n            default:[],\r\n            type:[cc.SpriteFrame]\r\n        },\r\n        \r\n        _sides:null,\r\n        _pres:null,\r\n        _foldPres:null,\r\n    },\r\n    \r\n    onLoad:function(){\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        this._sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        this._pres = [\"M_\",\"R_\",\"M_\",\"L_\"];\r\n        this._foldPres = [\"M_\",\"R_\",\"M_\",\"L_\"];//改\r\n        cc.vv.SSPMgr = this; \r\n\r\n    },\r\n    \r\n    getMahjongSpriteByID:function(data){\r\n        //type: 0红,1白,2绿,3黄,4公侯伯子男\r\n        //value: 1:将,2:士,3:象,4:车,5:马,6:炮,7:兵,8:公,9:候,10:伯,11:子,12:男\r\n        return data.type + \"_\" + data.value;\r\n    },\r\n    \r\n    getSSPType:function(data){\r\n      if(data.type === 4){\r\n        for(var i = 0;i < 5;i++){\r\n            if(data.value === i + 8)\r\n            {\r\n                return i;\r\n            }\r\n        } \r\n      }\r\n      else if(data.type === 0){\r\n        for(var i = 5;i < 11;i++){\r\n            if(data.value === i - 4)\r\n            {\r\n                return i;\r\n            }\r\n        }\r\n        if(data.value === 7)\r\n        {\r\n            return 29;\r\n        }\r\n      }\r\n      else if(data.type === 1){\r\n        for(var i = 11;i < 17;i++){\r\n            if(data.value === i - 10)\r\n            {\r\n                return i;\r\n            }\r\n        } \r\n        if(data.value === 7)\r\n        {\r\n            return 30;\r\n        }\r\n      }\r\n      else if(data.type === 2){\r\n        for(var i = 17;i < 23;i++){\r\n            if(data.value === i - 16)\r\n            {\r\n                return i;\r\n            }\r\n        }\r\n        if(data.value === 7)\r\n        {\r\n            return 31;\r\n        }\r\n      }\r\n      else if(data.type === 3){\r\n        for(var i = 23;i < 29;i++){\r\n            if(data.value === i - 22)\r\n            {\r\n                return i;\r\n            }\r\n        }\r\n        if(data.value === 7)\r\n        {\r\n            return 32;\r\n        }\r\n      }\r\n    },\r\n    \r\n    getSpriteFrameByPai:function(pre,pai){\r\n        var spriteFrameName = this.getMahjongSpriteByID(pai);\r\n        spriteFrameName = pre + spriteFrameName;\r\n        if(pre == \"M_\"){\r\n            return this.bottomAtlas.getSpriteFrame(spriteFrameName);            \r\n        }\r\n        else if(pre == \"M_\"){\r\n            return this.bottomFoldAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n        else if(pre == \"L_\"){\r\n            return this.leftAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n        else if(pre == \"R_\"){\r\n            return this.rightAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n        else if(pre == \"M_\"){\r\n            return this.upAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n    },\r\n    \r\n    getAudioURLByPai:function(id){\r\n        var realId = 0;\r\n        if(id >= 0 && id < 9){\r\n            realId = id + 21;\r\n        }\r\n        else if(id >= 9 && id < 18){\r\n            realId = id - 8;\r\n        }\r\n        else if(id >= 18 && id < 27){\r\n            realId = id - 7;\r\n        }\r\n        return \"nv/\" + realId + \".mp3\";\r\n    },\r\n    \r\n    getEmptySpriteFrame:function(side){\r\n        if(side == \"up\"){\r\n            return this.bottomAtlas.getSpriteFrame(\"paibei-s\");\r\n        }   \r\n        else if(side == \"myself\"){\r\n            return this.bottomAtlas.getSpriteFrame(\"paibei-s\");\r\n        }\r\n        else if(side == \"left\"){\r\n            return this.leftAtlas.getSpriteFrame(\"paibei-left\");\r\n        }\r\n        else if(side == \"right\"){\r\n            return this.rightAtlas.getSpriteFrame(\"paibei-right\");\r\n        }\r\n    },\r\n    \r\n    getHoldsEmptySpriteFrame:function(side){\r\n        if(side == \"up\"){\r\n            return this.bottomAtlas.getSpriteFrame(\"paibei-s\");\r\n        }   \r\n        else if(side == \"myself\"){\r\n            return null;\r\n        }\r\n        else if(side == \"left\"){\r\n            return this.leftAtlas.getSpriteFrame(\"paibei-left\");\r\n        }\r\n        else if(side == \"right\"){\r\n            return this.rightAtlas.getSpriteFrame(\"paibei-right\");\r\n        }\r\n    },\r\n\r\n    sortSSP:function(arrPai){\r\n        var self = this;\r\n        if(arrPai){\r\n            arrPai.sort(function(a,b){\r\n                var t1 = self.getSSPType(a);\r\n                var t2 = self.getSSPType(b);\r\n                return t2 - t1;\r\n            });\r\n        }\r\n    },\r\n\r\n    sortSSPF:function(arrPai){\r\n        var self = this;\r\n        if(arrPai){\r\n            arrPai.sort(function(a,b){\r\n                var t1 = self.getSSPType(a);\r\n                var t2 = self.getSSPType(b);\r\n                return t1 - t2;\r\n            });\r\n        }\r\n    },\r\n    \r\n    getSide:function(localIndex){\r\n        return this._sides[localIndex];\r\n    },\r\n    \r\n    getPre:function(localIndex){\r\n        return this._pres[localIndex];\r\n    },\r\n    \r\n    getFoldPre:function(localIndex){\r\n        return this._foldPres[localIndex];\r\n    }\r\n});\r\n"]}