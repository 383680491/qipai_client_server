{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\sspgame/assets\\scripts\\sspgame\\SSPPengGangs.js"],"names":["cc","Class","extends","Component","properties","onLoad","vv","gameChild","node","getChildByName","myself","pengangroot","realwidth","director","getVisibleSize","width","scale","scaleX","scaleY","self","on","data","detail","type","seatData","redundantPai","onPengGangChanged","mySch","scheduleOnce","onGameBein","seats","sspNetMgr","i","m_paiLen","r_paiLen","u_paiLen","l_paiLen","deviationL","deviationR","deviationU","deviationM","initView","_folds","game","sides","length","sideName","sideRoot","folds","foldRoot","j","children","n","active","sprite","getComponent","Sprite","spriteFrame","moveUp","moveBy","p","moveDown","seq","sequence","runAction","repeatForever","push","hideAllFolds","find","promptM","promptR","promptU","promptL","k","f","hideSide","side","childrenCount","liangPai","tempIndex","getLocalIndexByIndex","seatindex","localIndex","getShowIndexByIndex","SSPMgr","getSide","pre","getFoldPre","console","log","pgroot","instantiate","pengPrefabLeft","pengPrefabSelf","sprites","getComponentsInChildren","index","liangpais","pai","sspid","sortSSPF","BeforeLen","TYPE","jinlongLen","initliangpais","prompt","Pai","foldsSprites","cutLen","y","x","paiNum","clearance","paiindex","value","setPosition","flag","paiLen","addChild","Before","s","spritesIndex","getEmptySpriteFrame","getSpriteFrameByPai"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATQ,KAHP;;AAeL;AACAC,YAAQ,kBAAY;AAChB,YAAG,CAACL,GAAGM,EAAP,EAAU;AACN;AACH;;AAED,YAAIC,YAAY,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAhB;AACA,YAAIC,SAASH,UAAUE,cAAV,CAAyB,QAAzB,CAAb;AACA,YAAIE,cAAcD,OAAOD,cAAP,CAAsB,WAAtB,CAAlB;AACA,YAAIG,YAAYZ,GAAGa,QAAH,CAAYC,cAAZ,GAA6BC,KAA7C;AACA,YAAIC,QAAQJ,YAAY,IAAxB;AACAD,oBAAYM,MAAZ,IAAsBD,KAAtB;AACAL,oBAAYO,MAAZ,IAAsBF,KAAtB;;AAEA,YAAIG,OAAO,IAAX;AACA,aAAKX,IAAL,CAAUY,EAAV,CAAa,iBAAb,EAA+B,UAASC,IAAT,EAAc;AACzC,gBAAIA,OAAOA,KAAKC,MAAhB;AACA,gBAAGD,KAAKE,IAAL,IAAa,KAAhB,EAAsB;AAClB,oBAAIC,WAAWH,KAAKG,QAApB;AACA,oBAAIC,eAAeJ,KAAKI,YAAxB,CAFkB,CAEmB;AACrCN,qBAAKO,iBAAL,CAAuBF,QAAvB,EAAgCH,KAAKE,IAArC,EAA0CE,YAA1C;AACH,aAJD,MAKI;AACA,oBAAIE,QAAO,SAAPA,KAAO,GAAU;AACjB,wBAAIH,WAAWH,KAAKG,QAApB;AACA,wBAAIC,eAAeJ,KAAKI,YAAxB,CAFiB,CAEoB;AACrCN,yBAAKO,iBAAL,CAAuBF,QAAvB,EAAgCH,KAAKE,IAArC,EAA0CE,YAA1C;AACH,iBAJD;AAKAN,qBAAKS,YAAL,CAAkBD,KAAlB,EAAwB,GAAxB;AACH;AACJ,SAfD;AAgBA,aAAKnB,IAAL,CAAUY,EAAV,CAAa,wBAAb,EAAsC,UAASC,IAAT,EAAc;AAChD,gBAAIA,OAAOA,KAAKC,MAAhB;AACA,gBAAIE,WAAWH,KAAKG,QAApB;AACAL,iBAAKO,iBAAL,CAAuBF,QAAvB,EAAgCH,KAAKE,IAArC;AACH,SAJD;;AAMA,aAAKf,IAAL,CAAUY,EAAV,CAAa,YAAb,EAA0B,UAASC,IAAT,EAAc;AACpCF,iBAAKU,UAAL;AACH,SAFD;;AAIA,YAAIC,QAAQ9B,GAAGM,EAAH,CAAMyB,SAAN,CAAgBD,KAA5B;AACA,aAAI,IAAIE,CAAR,IAAaF,KAAb,EAAmB;AACf,iBAAKJ,iBAAL,CAAuBI,MAAME,CAAN,CAAvB;AACH;;AAED,aAAKC,QAAL,GAAgB,CAAhB,CA7CgB,CA6CE;AAClB,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,QAAL,GAAgB,CAAhB;;AAEA,aAAKC,UAAL,GAAkB,CAAlB,CAlDgB,CAkDI;AACpB,aAAKC,UAAL,GAAkB,CAAlB;AACA,aAAKC,UAAL,GAAkB,CAAlB;AACA,aAAKC,UAAL,GAAkB,CAAlB;;AAEA,aAAKC,QAAL;AACH,KAxEI;;AA0ELA,cAAS,oBAAU;AACf,aAAKC,MAAL,GAAc,EAAd;AACA,YAAIC,OAAO,KAAKnC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAX;AACA,YAAImC,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,aAAI,IAAIZ,IAAI,CAAZ,EAAeA,IAAIY,MAAMC,MAAzB,EAAiC,EAAEb,CAAnC,EAAqC;AACjC,gBAAIc,WAAWF,MAAMZ,CAAN,CAAf;AACA,gBAAIe,WAAWJ,KAAKlC,cAAL,CAAoBqC,QAApB,CAAf;AACA,gBAAIE,QAAQ,EAAZ;AACA,gBAAIC,WAAWF,SAAStC,cAAT,CAAwB,OAAxB,CAAf;AACA,iBAAI,IAAIyC,IAAI,CAAZ,EAAeA,IAAID,SAASE,QAAT,CAAkBN,MAArC,EAA6C,EAAEK,CAA/C,EAAiD;AAC7C,oBAAIE,IAAIH,SAASE,QAAT,CAAkBD,CAAlB,CAAR;AACAE,kBAAEC,MAAF,GAAW,KAAX;AACA,oBAAIC,SAASF,EAAEG,YAAF,CAAevD,GAAGwD,MAAlB,CAAb;AACA,oBAAIN,KAAKD,SAASE,QAAT,CAAkBN,MAAlB,GAAyB,CAAlC,EAAqC;AACjCS,2BAAOG,WAAP,GAAqB,IAArB;AACH,iBAFD,MAGK;AACDH,2BAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACA,wBAAIK,SAAS1D,GAAG2D,MAAH,CAAU,CAAV,EAAY3D,GAAG4D,CAAH,CAAK,CAAL,EAAO,EAAP,CAAZ,CAAb;AACA,wBAAIC,WAAW7D,GAAG2D,MAAH,CAAU,CAAV,EAAY3D,GAAG4D,CAAH,CAAK,CAAL,EAAO,CAAC,EAAR,CAAZ,CAAf;AACA,wBAAIE,MAAM9D,GAAG+D,QAAH,CAAYL,MAAZ,EAAmBG,QAAnB,CAAV;AACAP,2BAAO9C,IAAP,CAAYwD,SAAZ,CAAsBhE,GAAGiE,aAAH,CAAiBH,GAAjB,CAAtB;AACH;AACDd,sBAAMkB,IAAN,CAAWZ,MAAX;AACH;AACD,iBAAKZ,MAAL,CAAYI,QAAZ,IAAwBE,KAAxB;AACH;;AAED,aAAKmB,YAAL;;AAEA,aAAI,IAAIjB,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACtB,gBAAGA,KAAK,CAAR,EAAU;AACN,oBAAIE,IAAIpD,GAAGoE,IAAH,CAAQ,qBAAR,CAAR;AACH,aAFD,MAGK,IAAGlB,KAAK,CAAR,EAAU;AACX,oBAAIE,IAAIpD,GAAGoE,IAAH,CAAQ,qBAAR,CAAR;AACH,aAFI,MAGA,IAAGlB,KAAK,CAAR,EAAU;AACX,oBAAIE,IAAIpD,GAAGoE,IAAH,CAAQ,qBAAR,CAAR;AACH,aAFI,MAGA,IAAGlB,KAAK,CAAR,EAAU;AACX,oBAAIE,IAAIpD,GAAGoE,IAAH,CAAQ,qBAAR,CAAR;AACH;AACDhB,cAAEC,MAAF,GAAW,KAAX;AACA,gBAAIC,SAASF,EAAEG,YAAF,CAAevD,GAAGwD,MAAlB,CAAb;AACAF,mBAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACA,gBAAIK,SAAS1D,GAAG2D,MAAH,CAAU,CAAV,EAAY3D,GAAG4D,CAAH,CAAK,CAAL,EAAO,EAAP,CAAZ,CAAb;AACA,gBAAIC,WAAW7D,GAAG2D,MAAH,CAAU,CAAV,EAAY3D,GAAG4D,CAAH,CAAK,CAAL,EAAO,CAAC,EAAR,CAAZ,CAAf;AACA,gBAAIE,MAAM9D,GAAG+D,QAAH,CAAYL,MAAZ,EAAmBG,QAAnB,CAAV;AACAP,mBAAO9C,IAAP,CAAYwD,SAAZ,CAAsBhE,GAAGiE,aAAH,CAAiBH,GAAjB,CAAtB;;AAEA,gBAAGZ,KAAK,CAAR,EAAU;AACN,qBAAKmB,OAAL,GAAef,MAAf;AACH,aAFD,MAGK,IAAGJ,KAAK,CAAR,EAAU;AACX,qBAAKoB,OAAL,GAAehB,MAAf;AACH,aAFI,MAGA,IAAGJ,KAAK,CAAR,EAAU;AACX,qBAAKqB,OAAL,GAAejB,MAAf;AACH,aAFI,MAGA,IAAGJ,KAAK,CAAR,EAAU;AACX,qBAAKsB,OAAL,GAAelB,MAAf;AACH;AACJ;AACJ,KA1II;;AA4ILa,kBAAa,wBAAU;AACnB,aAAI,IAAIM,CAAR,IAAa,KAAK/B,MAAlB,EAAyB;AACrB,gBAAIgC,IAAI,KAAKhC,MAAL,CAAYV,CAAZ,CAAR;AACA,iBAAI,IAAIA,CAAR,IAAa0C,CAAb,EAAe;AACXA,kBAAE1C,CAAF,EAAKxB,IAAL,CAAU6C,MAAV,GAAmB,KAAnB;AACH;AACJ;AACJ,KAnJI;;AAqJLxB,gBAAW,sBAAU;AACjB,aAAK8C,QAAL,CAAc,QAAd;AACA,aAAKA,QAAL,CAAc,OAAd;AACA,aAAKA,QAAL,CAAc,IAAd;AACA,aAAKA,QAAL,CAAc,MAAd;AACH,KA1JI;;AA4JLA,cAAS,kBAASC,IAAT,EAAc;AACnB,YAAIrE,YAAY,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAhB;AACA,YAAIC,SAASH,UAAUE,cAAV,CAAyBmE,IAAzB,CAAb;AACA,YAAIjE,cAAcD,OAAOD,cAAP,CAAsB,WAAtB,CAAlB;AACA,YAAGE,WAAH,EAAe;AACX,iBAAI,IAAIqB,IAAI,CAAZ,EAAeA,IAAIrB,YAAYkE,aAA/B,EAA8C,EAAE7C,CAAhD,EAAkD;AAC9CrB,4BAAYwC,QAAZ,CAAqBnB,CAArB,EAAwBqB,MAAxB,GAAiC,KAAjC;AACH;AACJ;AACJ,KArKI;;AAuKL3B,uBAAkB,2BAASF,QAAT,EAAkBD,IAAlB,EAAuBE,YAAvB,EAAoC;;AAElD,YAAGD,SAASsD,QAAT,IAAqB,IAAxB,EAA6B;AACzB;AACH;AACD,YAAIC,YAAY/E,GAAGM,EAAH,CAAMyB,SAAN,CAAgBiD,oBAAhB,CAAqCxD,SAASyD,SAA9C,CAAhB;AACA,YAAIC,aAAalF,GAAGM,EAAH,CAAMyB,SAAN,CAAgBoD,mBAAhB,CAAoCJ,SAApC,CAAjB;AACA,YAAIH,OAAO5E,GAAGM,EAAH,CAAM8E,MAAN,CAAaC,OAAb,CAAqBH,UAArB,CAAX;AACA,YAAII,MAAMtF,GAAGM,EAAH,CAAM8E,MAAN,CAAaG,UAAb,CAAwBL,UAAxB,CAAV;;AAEAM,gBAAQC,GAAR,CAAY,sBAAsBP,UAAlC;;AAEA,YAAI3E,YAAY,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAhB;AACA,YAAIC,SAASH,UAAUE,cAAV,CAAyBmE,IAAzB,CAAb;AACA,YAAIjE,cAAcD,OAAOD,cAAP,CAAsB,WAAtB,CAAlB;;AAEA,aAAI,IAAIuB,IAAI,CAAZ,EAAeA,IAAIrB,YAAYkE,aAA/B,EAA8C,EAAE7C,CAAhD,EAAkD;AAC9CrB,wBAAYwC,QAAZ,CAAqBnB,CAArB,EAAwBqB,MAAxB,GAAiC,KAAjC;AACH;;AAGD,YAAIqC,SAAS,IAAb;AACA,YAAGd,QAAQ,MAAR,IAAkBA,QAAQ,OAA7B,EAAqC;AACjCc,qBAAS1F,GAAG2F,WAAH,CAAe3F,GAAGM,EAAH,CAAM8E,MAAN,CAAaQ,cAA5B,CAAT;AACH,SAFD,MAGI;AACAF,qBAAS1F,GAAG2F,WAAH,CAAe3F,GAAGM,EAAH,CAAM8E,MAAN,CAAaS,cAA5B,CAAT;AACH;AACD,YAAIC,UAAUJ,OAAOK,uBAAP,CAA+B/F,GAAGwD,MAAlC,CAAd;AACA,aAAKsC,OAAL,GAAeA,OAAf;AACA,aAAI,IAAI9D,IAAI,CAAZ,EAAcA,IAAI8D,QAAQjD,MAA1B,EAAiCb,GAAjC,EAAqC;AACjC8D,oBAAQ9D,CAAR,EAAWxB,IAAX,CAAgB6C,MAAhB,GAAyB,KAAzB;AACH;;AAED,YAAI2C,QAAQ,CAAZ;AACA,YAAIC,YAAYzE,SAASsD,QAAzB;AACA,YAAGmB,SAAH,EAAa;AACT,iBAAI,IAAIjE,IAAI,CAAZ,EAAeA,IAAIiE,UAAUpD,MAA7B,EAAqC,EAAEb,CAAvC,EAAyC;AACrC,oBAAGiE,UAAUjE,CAAV,EAAakE,GAAhB,EAAoB;AAChB,wBAAIC,QAAQF,UAAUjE,CAAV,EAAakE,GAAzB;AACH,iBAFD,MAGI;AACA,wBAAIC,QAAQF,UAAUjE,CAAV,CAAZ;AACH;;AAED,oBAAGmE,KAAH,EAAS;AACLnG,uBAAGM,EAAH,CAAM8E,MAAN,CAAagB,QAAb,CAAsBD,KAAtB,EADK,CACwB;AAChC;;AAED,oBAAGF,UAAUjE,IAAE,CAAZ,CAAH,EAAkB;AACd,wBAAGiE,UAAUjE,IAAE,CAAZ,EAAekE,GAAlB,EAAsB;AAClB,6BAAKG,SAAL,GAAiBJ,UAAUjE,IAAE,CAAZ,EAAekE,GAAf,CAAmBrD,MAApC,CADkB,CAC0B;AAC/C,qBAFD,MAGI;AACA,6BAAKwD,SAAL,GAAiBJ,UAAUjE,IAAE,CAAZ,EAAea,MAAhC,CADA,CACwC;AAC3C;AACJ;AACD,oBAAIyD,OAAO,IAAX;AACA,oBAAGL,UAAUjE,CAAV,EAAaT,IAAb,IAAqB0E,UAAUjE,CAAV,EAAaT,IAAb,KAAsB,SAA9C,EAAwD;AAAC;AACrD+E,2BAAO,SAAP;AACH,iBAFD,MAGK,IAAGH,MAAMtD,MAAN,KAAiB,CAAjB,IAAsBb,IAAIR,SAAS+E,UAAtC,EAAiD;AAAC;AACnDD,2BAAO,SAAP;AACH,iBAFI,MAGA,IAAGH,MAAMtD,MAAN,KAAiB,CAAjB,IAAsBsD,MAAM,CAAN,EAAS5E,IAAT,IAAiB4E,MAAM,CAAN,EAAS5E,IAAnD,EAAwD;AAAC;AAC1D+E,2BAAO,MAAP;AACH,iBAFI,MAGD;AACAA,2BAAO,KAAP;AACH;AACD,qBAAKE,aAAL,CAAmB7F,WAAnB,EAA+BiE,IAA/B,EAAoCU,GAApC,EAAwCU,KAAxC,EAA8CG,KAA9C,EAAoDG,IAApD;AACA,oBAAGtE,MAAMiE,UAAUpD,MAAV,GAAiB,CAAvB,IAA4BpB,YAA/B,EAA4C;AAAE;AAC1C,yBAAKgF,MAAL,CAAY9F,WAAZ,EAAwBiE,IAAxB,EAA6BpD,QAA7B,EAAsC2E,KAAtC,EAA4C1E,YAA5C,EAAyDuE,KAAzD,EAA+DC,SAA/D;AACH;AACDD;AACH;AACJ;AACJ,KApPI;;AAsPLS,YAAO,gBAAS9F,WAAT,EAAqBiE,IAArB,EAA0BpD,QAA1B,EAAmCkF,GAAnC,EAAuCjF,YAAvC,EAAoDuE,KAApD,EAA0DC,SAA1D,EAAoE;AAAE;AACzE,YAAIU,eAAe,KAAKjE,MAAL,CAAYkC,IAAZ,CAAnB;AACA,YAAI6B,SAASE,aAAa,EAAb,CAAb;;AAEA,YAAG/B,QAAQ,MAAX,EAAkB;AACd6B,qBAAS,KAAKjC,OAAd;AACH,SAFD,MAGK,IAAGI,QAAQ,OAAX,EAAmB;AACpB6B,qBAAS,KAAKnC,OAAd;AACH,SAFI,MAGA,IAAGM,QAAQ,IAAX,EAAgB;AACjB6B,qBAAS,KAAKlC,OAAd;AACH,SAFI,MAGA,IAAGK,QAAQ,QAAX,EAAoB;AACrB6B,qBAAS,KAAKpC,OAAd;AACH;;AAED,YAAIuC,SAAS,IAAI,KAAKP,SAAtB,CAjBuE,CAiBvC;AAChC,YAAGzB,QAAQ,MAAX,EAAkB;AAAE;AAChB6B,mBAAOjG,IAAP,CAAYqG,CAAZ,IAAiB,KAAKxE,UAAtB;AACH,SAFD,MAGK,IAAGuC,QAAQ,OAAX,EAAmB;AACpB6B,mBAAOjG,IAAP,CAAYqG,CAAZ,IAAiB,KAAKvE,UAAtB;AACH,SAFI,MAGA,IAAGsC,QAAQ,IAAX,EAAgB;AACjB6B,mBAAOjG,IAAP,CAAYsG,CAAZ,IAAiB,KAAKvE,UAAtB;AACH,SAFI,MAGA,IAAGqC,QAAQ,QAAX,EAAoB;AACrB6B,mBAAOjG,IAAP,CAAYsG,CAAZ,IAAiB,KAAKtE,UAAtB;AACH;;AAED,YAAIuE,SAAQ,CAAZ,CA/BuE,CA+BzD;AACd,YAAIC,YAAYf,UAAUpD,MAAV,GAAiB,CAAjC,CAhCuE,CAgCpC;AACnC,aAAI,IAAIb,IAAI,CAAZ,EAAeA,IAAIiE,UAAUpD,MAAV,GAAiB,CAApC,EAAuC,EAAEb,CAAzC,EAA2C;AACvC,gBAAGiE,UAAUjE,CAAV,EAAakE,GAAhB,EAAoB;AAChBa,0BAAUd,UAAUjE,CAAV,EAAakE,GAAb,CAAiBrD,MAA3B,CADgB,CACmB;AACtC,aAFD,MAGI;AACAkE,0BAAUd,UAAUjE,CAAV,EAAaa,MAAvB,CADA,CAC+B;AAClC;AACJ;;AAED,YAAIiE,IAAI,CAAR;AACA,YAAID,IAAI,CAAR;AACA,YAAGjC,QAAQ,MAAX,EAAkB;AACdkC,gBAAI,CAAC,GAAL;AACAL,mBAAOjG,IAAP,CAAYqG,CAAZ,GAAgB,GAAhB;AACAA,gBAAIJ,OAAOjG,IAAP,CAAYqG,CAAZ,GAAgBE,SAAS,IAAzB,GAAkC,IAAIC,SAA1C;AACH,SAJD,MAKK,IAAGpC,QAAQ,OAAX,EAAmB;AACpBkC,gBAAI,GAAJ;AACAL,mBAAOjG,IAAP,CAAYqG,CAAZ,GAAgB,CAAC,GAAjB;AACAA,gBAAIJ,OAAOjG,IAAP,CAAYqG,CAAZ,GAAgBE,SAAS,IAAzB,GAAkC,IAAIC,SAA1C;AACH,SAJI,MAKA,IAAGpC,QAAQ,QAAX,EAAoB;AACrBiC,gBAAI,CAAC,GAAL;AACAJ,mBAAOjG,IAAP,CAAYsG,CAAZ,GAAgB,CAAC,GAAjB;AACAA,gBAAIL,OAAOjG,IAAP,CAAYsG,CAAZ,GAAgBC,SAAS,EAAzB,GAAgC,KAAKC,SAAzC;AACH,SAJI,MAKD;AACAH,gBAAI,GAAJ;AACAJ,mBAAOjG,IAAP,CAAYsG,CAAZ,GAAgB,GAAhB;AACAA,gBAAIL,OAAOjG,IAAP,CAAYsG,CAAZ,GAAiBC,SAAS,EAA1B,GAAiC,IAAIC,SAAzC;AACH;;AAED,YAAIpE,QAAQ,CAAC,QAAD,EAAU,OAAV,EAAkB,IAAlB,EAAuB,MAAvB,CAAZ;AACA,aAAI,IAAIZ,IAAI,CAAZ,EAAeA,IAAIY,MAAMC,MAAzB,EAAiC,EAAEb,CAAnC,EAAqC;AACjC,gBAAIc,WAAWF,MAAMZ,CAAN,CAAf;AACA,gBAAIW,OAAO,KAAKnC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAX;AACA,gBAAIsC,WAAWJ,KAAKlC,cAAL,CAAoBqC,QAApB,CAAf;AACA,gBAAIG,WAAWF,SAAStC,cAAT,CAAwB,OAAxB,CAAf;AACA,gBAAI2C,IAAIH,SAASxC,cAAT,CAAwB,QAAxB,CAAR;AACA2C,cAAEC,MAAF,GAAW,KAAX;AACH;;AAEDrD,WAAGoE,IAAH,CAAQ,qBAAR,EAA+Bf,MAA/B,GAAwC,KAAxC;AACArD,WAAGoE,IAAH,CAAQ,qBAAR,EAA+Bf,MAA/B,GAAwC,KAAxC;AACArD,WAAGoE,IAAH,CAAQ,qBAAR,EAA+Bf,MAA/B,GAAwC,KAAxC;AACArD,WAAGoE,IAAH,CAAQ,qBAAR,EAA+Bf,MAA/B,GAAwC,KAAxC;;AAEA,YAAI0B,YAAY/E,GAAGM,EAAH,CAAMyB,SAAN,CAAgBiD,oBAAhB,CAAqCxD,SAASyD,SAA9C,CAAhB;AACA,YAAIC,aAAalF,GAAGM,EAAH,CAAMyB,SAAN,CAAgBoD,mBAAhB,CAAoCJ,SAApC,CAAjB;AACA,YAAIO,MAAMtF,GAAGM,EAAH,CAAM8E,MAAN,CAAaG,UAAb,CAAwBL,UAAxB,CAAV;AACA,YAAIN,OAAO5E,GAAGM,EAAH,CAAM8E,MAAN,CAAaC,OAAb,CAAqBH,UAArB,CAAX;;AAIA,YAAI+B,WAAW,CAAf;AACA,aAAI,IAAIjF,IAAI,CAAZ,EAAcA,IAAI0E,IAAI7D,MAAtB,EAA6Bb,GAA7B,EAAiC;AAAE;AAC/B,gBAAG0E,IAAI1E,CAAJ,EAAOT,IAAP,KAAgBE,aAAaF,IAA7B,IAAqCmF,IAAI1E,CAAJ,EAAOkF,KAAP,KAAiBzF,aAAayF,KAAtE,EAA4E;AACxED,2BAAWjF,CAAX;AACA;AACH;AACJ;AACD,YAAG4C,QAAQ,MAAX,EAAkB;AACdiC,iBAAKI,WAAS,IAAd;AACA,iBAAK5E,UAAL,GAAkB4E,WAAS,IAA3B;AACH,SAHD,MAIK,IAAGrC,QAAQ,OAAX,EAAmB;AACpBiC,iBAAKI,WAAS,IAAd;AACA,iBAAK3E,UAAL,GAAkB,CAAC2E,QAAD,GAAU,IAA5B;AACH,SAHI,MAIA,IAAGrC,QAAQ,QAAX,EAAoB;AACrBkC,iBAAKG,WAAS,EAAd;AACA,iBAAKzE,UAAL,GAAkB,CAACyE,QAAD,GAAU,EAA5B;AACH,SAHI,MAID;AACAH,iBAAKG,WAAS,EAAd;AACA,iBAAK1E,UAAL,GAAkB0E,WAAS,EAA3B;AACH;;AAIDR,eAAOjG,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACAoD,eAAOjG,IAAP,CAAY2G,WAAZ,CAAwBL,CAAxB,EAA0BD,CAA1B;AAEH,KA1WI;;AA4WLL,mBAAc,uBAAS7F,WAAT,EAAqBiE,IAArB,EAA0BU,GAA1B,EAA8BU,KAA9B,EAAoCG,KAApC,EAA0C5E,IAA1C,EAA+C6F,IAA/C,EAAoD;AAC9D,YAAI1B,SAAS,IAAb;AACA,YAAI2B,SAASlB,MAAMtD,MAAnB,CAF8D,CAEpC;AAC1B,YAAI+D,SAAS,IAAI,KAAKP,SAAtB,CAH8D,CAG9B;AAChC,YAAGL,UAAU,CAAb,EAAe;AACX,iBAAK/D,QAAL,GAAgB,CAAC,GAAjB,CADW,CACU;AACrB,iBAAKC,QAAL,GAAgB,EAAhB;AACA,iBAAKC,QAAL,GAAgB,EAAhB;AACA,iBAAKC,QAAL,GAAgB,GAAhB;AACA,iBAAKiE,SAAL,GAAiB,CAAjB;AACAO,qBAAS,CAAT;AACH;AACD,YAAGjG,YAAYkE,aAAZ,IAA6BmB,KAAhC,EAAsC;AAClC,gBAAGpB,QAAQ,MAAR,IAAkBA,QAAQ,OAA7B,EAAqC;AACjCc,yBAAS1F,GAAG2F,WAAH,CAAe3F,GAAGM,EAAH,CAAM8E,MAAN,CAAaQ,cAA5B,CAAT;AACH,aAFD,MAGI;AACAF,yBAAS1F,GAAG2F,WAAH,CAAe3F,GAAGM,EAAH,CAAM8E,MAAN,CAAaS,cAA5B,CAAT;AACH;;AAEDlF,wBAAY2G,QAAZ,CAAqB5B,MAArB;AACH,SATD,MAUI;AACAA,qBAAS/E,YAAYwC,QAAZ,CAAqB6C,KAArB,CAAT;AACAN,mBAAOrC,MAAP,GAAgB,IAAhB;AACH;;AAED,YAAGuB,QAAQ,MAAX,EAAkB;AACdc,mBAAOmB,CAAP,GAAW,EAAEb,QAAQ,IAAR,GAAe,CAAjB,IAAsB,KAAK5D,QAA3B,GAAuCwE,SAAS,IAAhD,GAAyDZ,QAAQ,CAA5E,CADc,CACkE;AAChF,iBAAK5D,QAAL,IAAiBwE,SAAS,IAA1B;AACH,SAHD,MAIK,IAAGhC,QAAQ,OAAX,EAAmB;AACpBc,mBAAOoB,CAAP,GAAW,EAAX;AACApB,mBAAOmB,CAAP,GAAYb,QAAQ,IAAR,GAAe,CAAhB,GAAqB,KAAK9D,QAA1B,GAAsC0E,SAAS,IAA/C,GAAwDZ,QAAQ,CAA3E;AACA,iBAAK9D,QAAL,IAAiB0E,SAAS,IAA1B;AACH,SAJI,MAKA,IAAGhC,QAAQ,QAAX,EAAoB;AACrB,gBAAI2C,SAAS,KAAKlB,SAAL,GAAiB,EAAjB,GAAsB,EAAnC;AACA,iBAAKpE,QAAL,IAAiBsF,MAAjB;AACA7B,mBAAOoB,CAAP,GAAW,KAAK7E,QAAhB;AACH,SAJI,MAKD;AACAyD,mBAAOmB,CAAP,GAAW,CAAC,EAAZ;AACAnB,mBAAOoB,CAAP,GAAW,EAAEd,QAAQ,EAAR,GAAW,CAAb,IAAkB,KAAK7D,QAAvB,GAAmCyE,SAAS,EAA5C,GAAmDZ,QAAQ,EAAtE;AACA,iBAAK7D,QAAL,IAAiByE,SAAS,EAA1B;AACH;;AAED,YAAId,UAAUJ,OAAOK,uBAAP,CAA+B/F,GAAGwD,MAAlC,CAAd;AACA,aAAI,IAAIgE,IAAI,CAAZ,EAAeA,IAAI1B,QAAQjD,MAA3B,EAAmC,EAAE2E,CAArC,EAAuC;AACnC,gBAAIC,eAAeD,CAAnB;AACA,gBAAG5C,QAAQ,IAAR,IAAgBA,QAAQ,OAA3B,EAAmC;AAAE;AACjC,oBAAG4C,MAAM,CAAT,EAAW;AACPC,mCAAe,CAAf;AACH,iBAFD,MAGK,IAAGD,MAAM,CAAT,EAAW;AACZC,mCAAe,CAAf;AACH,iBAFI,MAGA,IAAGD,MAAM,CAAT,EAAW;AACZC,mCAAe,CAAf;AACH,iBAFI,MAGA,IAAGD,MAAM,CAAT,EAAW;AACZC,mCAAe,CAAf;AACH;AACJ;;AAED,gBAAInE,SAASwC,QAAQ2B,YAAR,CAAb;AACA,gBAAI7C,QAAO,QAAP,IAAmBwC,QAAQ,QAA/B,EAAwC;AACpC9D,uBAAOG,WAAP,GAAqBzD,GAAGM,EAAH,CAAM8E,MAAN,CAAasC,mBAAb,CAAiC9C,IAAjC,CAArB;AACA,oBAAGA,QAAQ,QAAR,IAAoBA,QAAQ,IAA/B,EAAoC;AAChCtB,2BAAO9C,IAAP,CAAYS,MAAZ,GAAqB,IAArB;AACAqC,2BAAO9C,IAAP,CAAYU,MAAZ,GAAqB,IAArB;AACH;AACJ,aAND,MAOK;AACD,oBAAGiF,MAAMqB,CAAN,CAAH,EAAY;AACRlE,2BAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACAC,2BAAOG,WAAP,GAAqBzD,GAAGM,EAAH,CAAM8E,MAAN,CAAauC,mBAAb,CAAiCrC,GAAjC,EAAqCa,MAAMqB,CAAN,CAArC,CAArB;AACH,iBAHD,MAII;AACAlE,2BAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,KAArB;AACA,wBAAG9B,SAAS,MAAZ,EAAmB;AAAC;AAChB,4BAAGqD,QAAQ,MAAX,EAAkB;AACd,gCAAG4C,MAAM,EAAN,IAAYA,MAAM,EAAlB,IAAwBA,MAAM,EAAjC,EAAoC;AAChClE,uCAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACH;AACJ,yBAJD,MAKK,IAAGuB,QAAQ,OAAX,EAAmB;AACpB,gCAAG4C,MAAM,EAAN,IAAYA,MAAM,EAAlB,IAAwBA,MAAM,EAAjC,EAAoC;AAChClE,uCAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACH;AACJ,yBAJI,MAKD;AACA,gCAAGmE,MAAM,CAAN,IAAWA,MAAM,CAAjB,IAAsBA,MAAM,CAA/B,EAAiC;AAC7BlE,uCAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACH;AACJ;AACJ,qBAhBD,MAiBK,IAAG9B,SAAS,SAAZ,EAAsB;AAAC;AACxB,4BAAGqD,QAAQ,MAAX,EAAkB;AACd,gCAAG4C,MAAM,CAAN,IAAWA,MAAM,CAAjB,IAAsBA,MAAM,CAA/B,EAAiC;AAC7BlE,uCAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACH;AACJ,yBAJD,MAKK,IAAGuB,QAAQ,OAAX,EAAmB;AACpB,gCAAG4C,MAAM,CAAN,IAAWA,MAAM,CAAjB,IAAsBA,MAAM,CAA/B,EAAiC;AAC7BlE,uCAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACH;AACJ,yBAJI,MAKD;AACA,gCAAGmE,MAAM,CAAN,IAAWA,MAAM,CAAjB,IAAsBA,MAAM,CAA/B,EAAiC;AAC7BlE,uCAAO9C,IAAP,CAAY6C,MAAZ,GAAqB,IAArB;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AACJ;;AAjeI,CAAT","file":"SSPPengGangs.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sspgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.vv){\r\n            return;\r\n        }\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(\"myself\");\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        var realwidth = cc.director.getVisibleSize().width;\r\n        var scale = realwidth / 1280;\r\n        pengangroot.scaleX *= scale;\r\n        pengangroot.scaleY *= scale;\r\n        \r\n        var self = this;\r\n        this.node.on('liangPai_notify',function(data){\r\n            var data = data.detail;\r\n            if(data.type != \"dan\"){\r\n                var seatData = data.seatData;\r\n                var redundantPai = data.redundantPai;//多出来的那张牌\r\n                self.onPengGangChanged(seatData,data.type,redundantPai);\r\n            }\r\n            else{\r\n                var mySch =function(){ \r\n                    var seatData = data.seatData;\r\n                    var redundantPai = data.redundantPai;//多出来的那张牌\r\n                    self.onPengGangChanged(seatData,data.type,redundantPai);\r\n                }\r\n                self.scheduleOnce(mySch,1.0);\r\n            }\r\n        });\r\n        this.node.on('liangPaiJinlong_notify',function(data){\r\n            var data = data.detail;\r\n            var seatData = data.seatData;\r\n            self.onPengGangChanged(seatData,data.type);\r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.onGameBein();\r\n        });\r\n        \r\n        var seats = cc.vv.sspNetMgr.seats;\r\n        for(var i in seats){\r\n            this.onPengGangChanged(seats[i]);\r\n        }\r\n\r\n        this.m_paiLen = 0;//玩家吃碰杠 当前的长度\r\n        this.r_paiLen = 0;\r\n        this.u_paiLen = 0;\r\n        this.l_paiLen = 0;\r\n\r\n        this.deviationL = 0;//光标的偏差\r\n        this.deviationR = 0;\r\n        this.deviationU = 0;\r\n        this.deviationM = 0;\r\n\r\n        this.initView();\r\n    },\r\n\r\n    initView:function(){\r\n        this._folds = {};\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideName = sides[i];\r\n            var sideRoot = game.getChildByName(sideName);\r\n            var folds = [];\r\n            var foldRoot = sideRoot.getChildByName(\"folds\");\r\n            for(var j = 0; j < foldRoot.children.length; ++j){\r\n                var n = foldRoot.children[j];\r\n                n.active = false;\r\n                var sprite = n.getComponent(cc.Sprite); \r\n                if (j != foldRoot.children.length-1) {\r\n                    sprite.spriteFrame = null; \r\n                } \r\n                else {\r\n                    sprite.node.active = true;\r\n                    var moveUp = cc.moveBy(1,cc.p(0,10));\r\n                    var moveDown = cc.moveBy(1,cc.p(0,-10));\r\n                    var seq = cc.sequence(moveUp,moveDown);\r\n                    sprite.node.runAction(cc.repeatForever(seq));\r\n                }\r\n                folds.push(sprite);            \r\n            }\r\n            this._folds[sideName] = folds; \r\n        }\r\n        \r\n        this.hideAllFolds();\r\n        \r\n        for(var j = 0; j < 4; j++){\r\n            if(j == 0){\r\n                var n = cc.find(\"Canvas/game/promptM\");\r\n            }\r\n            else if(j == 1){\r\n                var n = cc.find(\"Canvas/game/promptR\");\r\n            }\r\n            else if(j == 2){\r\n                var n = cc.find(\"Canvas/game/promptU\");\r\n            }\r\n            else if(j == 3){\r\n                var n = cc.find(\"Canvas/game/promptL\");\r\n            }\r\n            n.active = false;\r\n            var sprite = n.getComponent(cc.Sprite); \r\n            sprite.node.active = true;\r\n            var moveUp = cc.moveBy(1,cc.p(0,10));\r\n            var moveDown = cc.moveBy(1,cc.p(0,-10));\r\n            var seq = cc.sequence(moveUp,moveDown);\r\n            sprite.node.runAction(cc.repeatForever(seq));\r\n\r\n            if(j == 0){\r\n                this.promptM = sprite;\r\n            }\r\n            else if(j == 1){\r\n                this.promptR = sprite;\r\n            }    \r\n            else if(j == 2){\r\n                this.promptU = sprite;\r\n            } \r\n            else if(j == 3){\r\n                this.promptL = sprite;\r\n            }     \r\n        }\r\n    },\r\n    \r\n    hideAllFolds:function(){\r\n        for(var k in this._folds){\r\n            var f = this._folds[i];\r\n            for(var i in f){\r\n                f[i].node.active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    onGameBein:function(){\r\n        this.hideSide(\"myself\");\r\n        this.hideSide(\"right\");\r\n        this.hideSide(\"up\");\r\n        this.hideSide(\"left\");\r\n    },\r\n    \r\n    hideSide:function(side){\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(side);\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        if(pengangroot){\r\n            for(var i = 0; i < pengangroot.childrenCount; ++i){\r\n                pengangroot.children[i].active = false;\r\n            }            \r\n        }\r\n    },\r\n    \r\n    onPengGangChanged:function(seatData,type,redundantPai){\r\n        \r\n        if(seatData.liangPai == null){\r\n            return;\r\n        }\r\n        var tempIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(seatData.seatindex);\r\n        var localIndex = cc.vv.sspNetMgr.getShowIndexByIndex(tempIndex);\r\n        var side = cc.vv.SSPMgr.getSide(localIndex);\r\n        var pre = cc.vv.SSPMgr.getFoldPre(localIndex);\r\n       \r\n        console.log(\"onPengGangChanged\" + localIndex);\r\n            \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(side);\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n\r\n        for(var i = 0; i < pengangroot.childrenCount; ++i){\r\n            pengangroot.children[i].active = false;\r\n        }\r\n        \r\n\r\n        var pgroot = null;\r\n        if(side == \"left\" || side == \"right\"){\r\n            pgroot = cc.instantiate(cc.vv.SSPMgr.pengPrefabLeft);\r\n        }\r\n        else{\r\n            pgroot = cc.instantiate(cc.vv.SSPMgr.pengPrefabSelf);\r\n        }\r\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\r\n        this.sprites = sprites;\r\n        for(var i = 0;i < sprites.length;i++){\r\n            sprites[i].node.active = false;\r\n        }\r\n\r\n        var index = 0;\r\n        var liangpais = seatData.liangPai;\r\n        if(liangpais){\r\n            for(var i = 0; i < liangpais.length; ++i){\r\n                if(liangpais[i].pai){\r\n                    var sspid = liangpais[i].pai;\r\n                }\r\n                else{\r\n                    var sspid = liangpais[i];\r\n                }\r\n                \r\n                if(sspid){\r\n                    cc.vv.SSPMgr.sortSSPF(sspid);//排序\r\n                }\r\n\r\n                if(liangpais[i-1]){\r\n                    if(liangpais[i-1].pai){\r\n                        this.BeforeLen = liangpais[i-1].pai.length; //前一个吃碰杠的长度\r\n                    }\r\n                    else{\r\n                        this.BeforeLen = liangpais[i-1].length; //前一个吃碰杠的长度\r\n                    }\r\n                }\r\n                var TYPE = null;\r\n                if(liangpais[i].type && liangpais[i].type === \"jinLong\"){//牌的长度\r\n                    TYPE = \"jinlong\";\r\n                }\r\n                else if(sspid.length === 4 && i < seatData.jinlongLen){//牌的长度\r\n                    TYPE = \"jinlong\";\r\n                }\r\n                else if(sspid.length === 4 && sspid[0].type == sspid[1].type){//牌的长度\r\n                    TYPE = \"gang\";\r\n                }\r\n                else{\r\n                    TYPE = \"chi\";\r\n                }\r\n                this.initliangpais(pengangroot,side,pre,index,sspid,TYPE);\r\n                if(i === liangpais.length-1 && redundantPai){ //最后一项 显示标记\r\n                    this.prompt(pengangroot,side,seatData,sspid,redundantPai,index,liangpais);\r\n                }\r\n                index++;\r\n            }    \r\n        }      \r\n    },\r\n\r\n    prompt:function(pengangroot,side,seatData,Pai,redundantPai,index,liangpais){ //显示标记\r\n        var foldsSprites = this._folds[side];\r\n        var prompt = foldsSprites[24];\r\n\r\n        if(side == \"left\"){\r\n            prompt = this.promptL;\r\n        }\r\n        else if(side == \"right\"){\r\n            prompt = this.promptR;\r\n        }\r\n        else if(side == \"up\"){\r\n            prompt = this.promptU;\r\n        }\r\n        else if(side == \"myself\"){\r\n            prompt = this.promptM;\r\n        }\r\n\r\n        var cutLen = 4 - this.BeforeLen;//缩减到长度\r\n        if(side == \"left\"){ //加上上一次 多减掉的长度\r\n            prompt.node.y += this.deviationL;\r\n        }\r\n        else if(side == \"right\"){\r\n            prompt.node.y += this.deviationR;\r\n        }\r\n        else if(side == \"up\"){\r\n            prompt.node.x += this.deviationU;\r\n        }\r\n        else if(side == \"myself\"){\r\n            prompt.node.x += this.deviationM;\r\n        }\r\n\r\n        var paiNum =0;//亮牌的总共有几张牌 除最后一个意外的\r\n        var clearance = liangpais.length-1;//有几个亮牌\r\n        for(var i = 0; i < liangpais.length-1; ++i){\r\n            if(liangpais[i].pai){\r\n                paiNum += liangpais[i].pai.length; //前一个吃碰杠的长度\r\n            }\r\n            else{\r\n                paiNum += liangpais[i].length; //前一个吃碰杠的长度\r\n            }\r\n        }\r\n\r\n        var x = 0; \r\n        var y = 0;\r\n        if(side == \"left\"){\r\n            x = -425;\r\n            prompt.node.y = 305\r\n            y = prompt.node.y -(paiNum * 22.4) - (3 * clearance);\r\n        }\r\n        else if(side == \"right\"){\r\n            x = 450;\r\n            prompt.node.y = -200;\r\n            y = prompt.node.y +(paiNum * 22.4) + (3 * clearance); \r\n        }\r\n        else if(side == \"myself\"){\r\n            y = -260;\r\n            prompt.node.x = -600;\r\n            x = prompt.node.x +(paiNum * 41) + (10 * clearance);    \r\n        }\r\n        else{\r\n            y = 210;\r\n            prompt.node.x = 400;\r\n            x = prompt.node.x - (paiNum * 30) - (8 * clearance); \r\n        }\r\n        \r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideName = sides[i];\r\n            var game = this.node.getChildByName(\"game\");\r\n            var sideRoot = game.getChildByName(sideName);\r\n            var foldRoot = sideRoot.getChildByName(\"folds\");\r\n            var n = foldRoot.getChildByName(\"prompt\");\r\n            n.active = false;\r\n        }\r\n\r\n        cc.find(\"Canvas/game/promptL\").active = false;\r\n        cc.find(\"Canvas/game/promptR\").active = false;\r\n        cc.find(\"Canvas/game/promptU\").active = false;\r\n        cc.find(\"Canvas/game/promptM\").active = false;\r\n\r\n        var tempIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(seatData.seatindex);\r\n        var localIndex = cc.vv.sspNetMgr.getShowIndexByIndex(tempIndex);\r\n        var pre = cc.vv.SSPMgr.getFoldPre(localIndex);\r\n        var side = cc.vv.SSPMgr.getSide(localIndex);\r\n\r\n        \r\n\r\n        var paiindex = 0;\r\n        for(var i = 0;i < Pai.length;i++){ //取那张牌是第几张\r\n            if(Pai[i].type === redundantPai.type && Pai[i].value === redundantPai.value){\r\n                paiindex = i;\r\n                break;\r\n            }\r\n        }\r\n        if(side == \"left\"){\r\n            y -= paiindex*22.4;\r\n            this.deviationL = paiindex*22.4;\r\n        }\r\n        else if(side == \"right\"){\r\n            y += paiindex*22.4;\r\n            this.deviationR = -paiindex*22.4;\r\n        }\r\n        else if(side == \"myself\"){\r\n            x += paiindex*41;\r\n            this.deviationM = -paiindex*41;\r\n        }\r\n        else{\r\n            x -= paiindex*30;\r\n            this.deviationU = paiindex*30;\r\n        }\r\n\r\n\r\n        \r\n        prompt.node.active = true;\r\n        prompt.node.setPosition(x,y);\r\n        \r\n    },\r\n\r\n    initliangpais:function(pengangroot,side,pre,index,sspid,type,flag){\r\n        var pgroot = null;\r\n        var paiLen = sspid.length;//牌的长度\r\n        var cutLen = 4 - this.BeforeLen;//缩减到长度\r\n        if(index === 0){\r\n            this.m_paiLen = -213;//玩家吃碰杠 当前的长度\r\n            this.r_paiLen = 40;\r\n            this.u_paiLen = 60;\r\n            this.l_paiLen = 120;\r\n            this.BeforeLen = 0;\r\n            cutLen = 0;\r\n        }\r\n        if(pengangroot.childrenCount <= index){\r\n            if(side == \"left\" || side == \"right\"){\r\n                pgroot = cc.instantiate(cc.vv.SSPMgr.pengPrefabLeft);\r\n            }\r\n            else{\r\n                pgroot = cc.instantiate(cc.vv.SSPMgr.pengPrefabSelf);\r\n            }\r\n            \r\n            pengangroot.addChild(pgroot);    \r\n        }\r\n        else{\r\n            pgroot = pengangroot.children[index];\r\n            pgroot.active = true;\r\n        }\r\n        \r\n        if(side == \"left\"){\r\n            pgroot.y = -(index * 22.4 * 4) + this.l_paiLen + (cutLen * 22.4) - (index * 3); //左  4个牌的长度 - 吃碰杠初始位置 - 上一个少几张牌的长度 + 每个吃碰杠的间隔\r\n            this.l_paiLen += cutLen * 22.4;   \r\n        }\r\n        else if(side == \"right\"){\r\n            pgroot.x = 40;\r\n            pgroot.y = (index * 22.4 * 4) + this.r_paiLen - (cutLen * 22.4) + (index * 3); \r\n            this.r_paiLen -= cutLen * 22.4;\r\n        }\r\n        else if(side == \"myself\"){\r\n            var Before = this.BeforeLen * 40 + 12; \r\n            this.m_paiLen += Before;\r\n            pgroot.x = this.m_paiLen;              \r\n        }\r\n        else{\r\n            pgroot.y = -20;\r\n            pgroot.x = -(index * 43*4) + this.u_paiLen + (cutLen * 43) - (index * 10);\r\n            this.u_paiLen += cutLen * 43;\r\n        }\r\n\r\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\r\n        for(var s = 0; s < sprites.length; ++s){\r\n            var spritesIndex = s;\r\n            if(side == \"up\" || side == \"right\"){ //上面和右边的反过来显示\r\n                if(s === 0){\r\n                    spritesIndex = 3;\r\n                }\r\n                else if(s === 1){\r\n                    spritesIndex = 2;\r\n                }\r\n                else if(s === 2){\r\n                    spritesIndex = 1;\r\n                }\r\n                else if(s === 3){\r\n                    spritesIndex = 0;\r\n                }\r\n            }\r\n\r\n            var sprite = sprites[spritesIndex];\r\n            if( side !=\"myself\" && flag == \"angang\"){\r\n                sprite.spriteFrame = cc.vv.SSPMgr.getEmptySpriteFrame(side);\r\n                if(side == \"myself\" || side == \"up\"){\r\n                    sprite.node.scaleX = 0.85;\r\n                    sprite.node.scaleY = 0.85;                           \r\n                }\r\n            }\r\n            else {\r\n                if(sspid[s]){\r\n                    sprite.node.active = true;\r\n                    sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(pre,sspid[s]);\r\n                }\r\n                else{\r\n                    sprite.node.active = false;\r\n                    if(type === \"gang\"){//显示银龙框\r\n                        if(side == \"left\"){\r\n                            if(s === 13 || s === 14 || s === 15){\r\n                                sprite.node.active = true;\r\n                            }\r\n                        }\r\n                        else if(side == \"right\"){\r\n                            if(s === 10 || s === 11 || s === 12){\r\n                                sprite.node.active = true;\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(s === 4 || s === 5 || s === 6){\r\n                                sprite.node.active = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if(type === \"jinlong\"){//显示金龙框\r\n                        if(side == \"left\"){\r\n                            if(s === 4 || s === 5 || s === 6){\r\n                                sprite.node.active = true;\r\n                            }\r\n                        }\r\n                        else if(side == \"right\"){\r\n                            if(s === 7 || s === 8 || s === 9){\r\n                                sprite.node.active = true;\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(s === 7 || s === 8 || s === 9){\r\n                                sprite.node.active = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }  \r\n        }\r\n    },\r\n    \r\n});\r\n"]}