{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\sspgame/assets\\scripts\\sspgame\\SSPTimePointer.js"],"names":["numSprites","cc","Class","extends","Component","properties","_arrow","_pointer","_alertTime","_timeChild","_gewei","_shiwei","_atlas","_guang","_curTurn","_countTime","numAtlas","default","type","SpriteAtlas","onLoad","gameChild","node","getChildByName","initPointer","self","on","data","detail","gewei","shiwei","t","Math","ceil","floor","spriteS","getComponent","Sprite","spriteG","spriteFrameS","getSpriteFrame","getNumSpriteByNum","spriteFrameG","spriteFrame","console","log","push","vv","sspNetMgr","gamestate","active","turn","button","tempIndex","getLocalIndexByIndex","arrowIndex","getShowIndexByIndex","rotation","nowTurn","setMJCountdown","update","dt","mySch","scheduleOnce","i"],"mappings":";;;;;;AAAA,IAAIA,aAAa,EAAjB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO,IADC;AAERC,kBAAS,IAFD;AAGR;AACA;AACAC,oBAAW,CAAC,CALJ;AAMRC,oBAAW,IANH;AAORC,gBAAO,IAPC;AAQRC,iBAAQ,IARA;AASRC,gBAAO,IATC;AAURC,gBAAO,IAVC;AAWRC,kBAAS,IAXD;AAYRC,oBAAW,IAZH;AAaRC,kBAAS;AACLC,qBAAQ,IADH;AAELC,kBAAKjB,GAAGkB;AAFH;;AAbD,KAHP;;AAuBL;AACAC,YAAQ,kBAAY;AAChB,YAAIC,YAAY,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAhB;AACA,aAAKjB,MAAL,GAAce,UAAUE,cAAV,CAAyB,OAAzB,CAAd;AACA,aAAKd,UAAL,GAAkBY,UAAUE,cAAV,CAAyB,MAAzB,CAAlB;AACA,aAAKZ,OAAL,GAAe,KAAKF,UAAL,CAAgBc,cAAhB,CAA+B,QAA/B,CAAf;AACA,aAAKb,MAAL,GAAc,KAAKD,UAAL,CAAgBc,cAAhB,CAA+B,OAA/B,CAAd;AACA,aAAKC,WAAL;;AAEA,YAAIC,OAAO,IAAX;;AAEA,aAAKH,IAAL,CAAUI,EAAV,CAAa,YAAb,EAA0B,UAASC,IAAT,EAAc;AACpCF,iBAAKD,WAAL;AACH,SAFD;;AAIA,aAAKF,IAAL,CAAUI,EAAV,CAAa,mBAAb,EAAiC,UAASC,IAAT,EAAc;AAC3C,gBAAIA,OAAOA,KAAKC,MAAhB;AACAD,mBAAOA,OAAK,IAAZ;AACA,gBAAIE,QAAQ,IAAZ;AACA,gBAAIC,SAAS,IAAb;AACA,gBAAIC,IAAIC,KAAKC,IAAL,CAAUN,IAAV,CAAR;AACA,gBAAII,KAAK,EAAT,EAAa;AACTD,yBAASE,KAAKE,KAAL,CAAWH,IAAI,EAAf,CAAT;AACAF,wBAAQE,IAAI,EAAZ;AACH,aAHD,MAII;AACAD,yBAAS,CAAT;AACAD,wBAAQE,IAAI,EAAZ;AACH;AACD,gBAAII,UAAUV,KAAKd,OAAL,CAAayB,YAAb,CAA0BnC,GAAGoC,MAA7B,CAAd;AACA,gBAAIC,UAAUb,KAAKf,MAAL,CAAY0B,YAAZ,CAAyBnC,GAAGoC,MAA5B,CAAd;AACA,gBAAIE,eAAed,KAAKT,QAAL,CAAcwB,cAAd,CAA6Bf,KAAKgB,iBAAL,CAAuBX,MAAvB,CAA7B,CAAnB;AACA,gBAAIY,eAAejB,KAAKT,QAAL,CAAcwB,cAAd,CAA6Bf,KAAKgB,iBAAL,CAAuBZ,KAAvB,CAA7B,CAAnB;AACAM,oBAAQQ,WAAR,GAAsBJ,YAAtB;AACAD,oBAAQK,WAAR,GAAsBD,YAAtB;AACH,SApBD;;AAsBAE,gBAAQC,GAAR,CAAY,WAAZ;AACA7C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACA9C,mBAAW8C,IAAX,CAAgB,QAAhB;AACH,KAvEI;;AAyELtB,iBAAY,uBAAU;AAClB,YAAGvB,GAAG8C,EAAH,IAAS,IAAZ,EAAiB;AACb;AACH;AACD,YAAI9C,GAAG8C,EAAH,CAAMC,SAAN,CAAgBC,SAAhB,IAA6B,SAA7B,IAA0ChD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBC,SAAhB,IAA6B,OAA3E,EAAoF;AAChF,iBAAK3C,MAAL,CAAY4C,MAAZ,GAAqB,IAArB;AACA,iBAAKzC,UAAL,CAAgByC,MAAhB,GAAyB,IAAzB;AACH;AACD,YAAIC,OAAOlD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBI,MAA3B;AACA,YAAIC,YAAYpD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBM,oBAAhB,CAAqCH,IAArC,CAAhB;AACA,YAAII,aAAatD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBQ,mBAAhB,CAAoCH,SAApC,EAA8C,KAA9C,CAAjB;AACA,YAAIE,cAAc,CAAlB,EAAqB;AACjB,iBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,CAAvB;AACH,SAFD,MAGK,IAAIF,cAAc,CAAlB,EAAqB;AACtB,iBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,GAAvB;AAEH,SAHI,MAIA,IAAIF,cAAc,CAAlB,EAAqB;AACtB,iBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,GAAvB;AAEH,SAHI,MAIA,IAAIF,cAAc,CAAlB,EAAqB;AACtB,iBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,EAAvB;AAEH;AACD,YAAG,CAAC,KAAKnD,MAAL,CAAY4C,MAAhB,EAAuB;AACnB;AACH;AACD,YAAIQ,UAAUzD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBG,IAA9B;AACA,YAAIO,YAAY,CAAC,CAAjB,EAAoB;AAChBA,sBAAU,CAAV;AACH;AACJ,KA1GI;;AA4GLC,oBAAe,wBAAShC,IAAT,EAAe,CAE7B,CA9GI;;AAgHLiC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAIV,OAAOlD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBG,IAA3B;AACA,YAAIA,SAAS,CAAC,CAAd,EAAiB;AACbA,mBAAO,CAAP;AACH;AACD,YAAIE,YAAYpD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBM,oBAAhB,CAAqCH,IAArC,CAAhB;AACA,YAAII,aAAatD,GAAG8C,EAAH,CAAMC,SAAN,CAAgBQ,mBAAhB,CAAoCH,SAApC,EAA8C,KAA9C,CAAjB;;AAEA,YAAIS,QAAO,SAAPA,KAAO,GAAU;AACjB,gBAAIP,cAAc,CAAlB,EAAqB;AACjB,qBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,CAAvB;AACH,aAFD,MAGK,IAAIF,cAAc,CAAlB,EAAqB;AACtB,qBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,GAAvB;AAEH,aAHI,MAIA,IAAIF,cAAc,CAAlB,EAAqB;AACtB,qBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,GAAvB;AAEH,aAHI,MAIA,IAAIF,cAAc,CAAlB,EAAqB;AACtB,qBAAKjD,MAAL,CAAYmD,QAAZ,GAAuB,EAAvB;AAEH;AACJ,SAhBD;AAiBA,aAAKM,YAAL,CAAkBD,KAAlB,EAAwB,GAAxB;;AAEA,YAAG,CAAC,KAAKxD,MAAL,CAAY4C,MAAhB,EAAuB;AACnB;AACH;AACJ,KA9II;;AAgJLT,uBAAkB,2BAASd,IAAT,EAAc;AAC5B,aAAK,IAAIqC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AACzB,gBAAIrC,SAASqC,CAAb,EAAgB;AACZ,uBAAOhE,WAAWgE,CAAX,CAAP;AACA;AACH;AACJ;AACJ;;AAvJI,CAAT","file":"SSPTimePointer.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sspgame","sourcesContent":["var numSprites = [];\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _arrow:null,\r\n        _pointer:null,\r\n        //_timeLabel:null,\r\n        //_time:null,\r\n        _alertTime:-1,\r\n        _timeChild:null,\r\n        _gewei:null,\r\n        _shiwei:null,\r\n        _atlas:null,\r\n        _guang:null,\r\n        _curTurn:null,\r\n        _countTime:null,\r\n        numAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        this._arrow = gameChild.getChildByName(\"arrow\");\r\n        this._timeChild = gameChild.getChildByName(\"time\");\r\n        this._shiwei = this._timeChild.getChildByName(\"shiwei\");\r\n        this._gewei = this._timeChild.getChildByName(\"gewei\");\r\n        this.initPointer();\r\n        \r\n        var self = this;\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.initPointer();\r\n        });\r\n\r\n        this.node.on('out_card_lastTime',function(data){\r\n            var data = data.detail;\r\n            data = data/1000;\r\n            var gewei = null;\r\n            var shiwei = null;\r\n            var t = Math.ceil(data);\r\n            if (t >= 10) {\r\n                shiwei = Math.floor(t / 10);\r\n                gewei = t % 10;\r\n            }\r\n            else{\r\n                shiwei = 0;\r\n                gewei = t % 10;\r\n            }\r\n            var spriteS = self._shiwei.getComponent(cc.Sprite);\r\n            var spriteG = self._gewei.getComponent(cc.Sprite);\r\n            var spriteFrameS = self.numAtlas.getSpriteFrame(self.getNumSpriteByNum(shiwei));\r\n            var spriteFrameG = self.numAtlas.getSpriteFrame(self.getNumSpriteByNum(gewei));\r\n            spriteS.spriteFrame = spriteFrameS;\r\n            spriteG.spriteFrame = spriteFrameG;\r\n        });\r\n\r\n        console.log(\"timePoint\");\r\n        numSprites.push(\"mjks-0\");\r\n        numSprites.push(\"mjks-1\");\r\n        numSprites.push(\"mjks-2\");\r\n        numSprites.push(\"mjks-3\");\r\n        numSprites.push(\"mjks-4\");\r\n        numSprites.push(\"mjks-5\");\r\n        numSprites.push(\"mjks-6\");\r\n        numSprites.push(\"mjks-7\");\r\n        numSprites.push(\"mjks-8\");\r\n        numSprites.push(\"mjks-9\");\r\n    }, \r\n    \r\n    initPointer:function(){\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        if (cc.vv.sspNetMgr.gamestate == \"playing\" || cc.vv.sspNetMgr.gamestate == \"begin\") {\r\n            this._arrow.active = true;\r\n            this._timeChild.active = true;\r\n        }\r\n        var turn = cc.vv.sspNetMgr.button;\r\n        var tempIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(turn);\r\n        var arrowIndex = cc.vv.sspNetMgr.getShowIndexByIndex(tempIndex,false);\r\n        if (arrowIndex == 0) {\r\n            this._arrow.rotation = 0;\r\n        }\r\n        else if (arrowIndex == 1) {\r\n            this._arrow.rotation = 270;\r\n\r\n        }\r\n        else if (arrowIndex == 2) {\r\n            this._arrow.rotation = 180;\r\n\r\n        }\r\n        else if (arrowIndex == 3) {\r\n            this._arrow.rotation = 90;\r\n\r\n        }\r\n        if(!this._arrow.active){\r\n            return;\r\n        }\r\n        var nowTurn = cc.vv.sspNetMgr.turn;\r\n        if (nowTurn === -1) {\r\n            nowTurn = 0;\r\n        }\r\n    },\r\n    \r\n    setMJCountdown:function(data) {\r\n        \r\n    },\r\n    \r\n    update: function (dt) {\r\n        var turn = cc.vv.sspNetMgr.turn;\r\n        if (turn === -1) {\r\n            turn = 0;\r\n        }\r\n        var tempIndex = cc.vv.sspNetMgr.getLocalIndexByIndex(turn);\r\n        var arrowIndex = cc.vv.sspNetMgr.getShowIndexByIndex(tempIndex,false);\r\n\r\n        var mySch =function(){ \r\n            if (arrowIndex == 0) {\r\n                this._arrow.rotation = 0;\r\n            }\r\n            else if (arrowIndex == 1) {\r\n                this._arrow.rotation = 270;\r\n\r\n            }\r\n            else if (arrowIndex == 2) {\r\n                this._arrow.rotation = 180;\r\n\r\n            }\r\n            else if (arrowIndex == 3) {\r\n                this._arrow.rotation = 90;\r\n\r\n            }\r\n        }\r\n        this.scheduleOnce(mySch,1.0);\r\n\r\n        if(!this._arrow.active){\r\n            return;\r\n        }\r\n    },\r\n\r\n    getNumSpriteByNum:function(data){\r\n        for (var i = 0; i < 10; i++) {\r\n            if (data === i) {\r\n                return numSprites[i];\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n});\r\n"]}