{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\sssgame/assets\\scripts\\sssgame\\sss_seat.js"],"names":["numSprites","cc","Class","extends","Component","properties","_sprIcon","_zhuang","_ready","_offline","_lblName","_lblScore","_scoreBg","_nddayingjia","_voicemsg","_timeChild","_chatBubble","_emoji","_lastChatTime","_userName","_score","_dayingjia","_isOffline","_isReady","_isZhuang","_userId","default","type","SpriteAtlas","onLoad","node","getChildByName","getComponent","Label","imgLoader","zhuang","paiBeiNode","liPaiNode","_headBox","touxiangkuang","_shiwei","_gewei","active","Button","vv","utils","addClickEvent","push","onIconClicked","iconSprite","Sprite","seat","sssNetMgr","getSeatByID","sex","baseInfoMap","info","userinfoShow","show","name","userid","ip","setCountdown","data","lixianTime","gewei","shiwei","t","Math","ceil","floor","spriteS","spriteG","spriteFrameS","numAtlas","getSpriteFrame","getNumSpriteByNum","spriteFrameG","spriteFrame","i","setInfo","len","length","str","substring","string","setUserID","setTotalScore","reset","animation","window","sssGame","Animation","fapai","setReady","isReady","numOfGames","showPlayerInfo","isShowPaibei","fapaiAnimation","index","setfapaiPosition","play","eff","wanfa","setPosition","setOffline","isOffline","chat","content","emoji","console","log","voiceMsg","update","dt","stop"],"mappings":"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","file":"sss_seat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sssgame","sourcesContent":["var numSprites = [];\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _sprIcon:null,\r\n        _zhuang:null,\r\n        _ready:null,\r\n        _offline:null,\r\n        _lblName:null,\r\n        _lblScore:null,\r\n        _scoreBg:null,\r\n        _nddayingjia:null,\r\n        _voicemsg:null,\r\n        _timeChild:null,\r\n        \r\n        _chatBubble:null,\r\n        _emoji:null,\r\n        _lastChatTime:-1,\r\n        \r\n        _userName:\"\",\r\n        _score:0,\r\n        _dayingjia:false,\r\n        _isOffline:false,\r\n        _isReady:false,\r\n        _isZhuang:false,\r\n        _userId:null,\r\n        _ready:null,\r\n        _headBox:null,\r\n        touxiangkuang:null,\r\n        numAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._lblName = this.node.getChildByName(\"lbUserName\").getComponent(cc.Label);\r\n        this._lblScore = this.node.getChildByName(\"score\").getComponent(cc.Label);\r\n        this.imgLoader = this.node.getChildByName(\"headBox\").getComponent(\"ImageLoader\");\r\n        this.zhuang = this.node.getChildByName(\"zhuang\");\r\n        this.paiBeiNode = this.node.getChildByName(\"paiBei\");\r\n        this.liPaiNode = this.node.getChildByName(\"lipai\");\r\n        this._voicemsg = this.node.getChildByName(\"voicemsg\");\r\n        this._ready = this.node.getChildByName('ready');\r\n        this._headBox = this.node.getChildByName('headBox');\r\n        this.touxiangkuang = this.node.getChildByName('touxiangkuang');\r\n        this._offline = this.node.getChildByName(\"offline\");\r\n\r\n        this._timeChild = this._offline.getChildByName('time');//离线闹钟\r\n        this._shiwei = this._timeChild.getChildByName(\"shiwei\");\r\n        this._gewei = this._timeChild.getChildByName(\"gewei\");\r\n\r\n        if(this._voicemsg){\r\n            this._voicemsg.active = false;\r\n        }\r\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\r\n        if(this._chatBubble != null){\r\n            this._chatBubble.active = false;            \r\n        }\r\n        \r\n        this._emoji = this.node.getChildByName(\"emoji\");\r\n        if(this._emoji != null){\r\n            this._emoji.active = false;\r\n        }\r\n\r\n        if(this.imgLoader && this.imgLoader.getComponent(cc.Button)){\r\n            cc.vv.utils.addClickEvent(this.imgLoader,this.node,\"seat\",\"onIconClicked\");    \r\n        }\r\n\r\n        this.paiBeiNode.active = false;\r\n        this.liPaiNode.active = false;\r\n        this._ready.active = false;\r\n        this._offline.active = false;\r\n        this._headBox.active = false;\r\n        this.touxiangkuang.active = false;\r\n        if(this.zhuang){\r\n            this.zhuang.active = false;\r\n        }\r\n        numSprites.push(\"mjks-0\");\r\n        numSprites.push(\"mjks-1\");\r\n        numSprites.push(\"mjks-2\");\r\n        numSprites.push(\"mjks-3\");\r\n        numSprites.push(\"mjks-4\");\r\n        numSprites.push(\"mjks-5\");\r\n        numSprites.push(\"mjks-6\");\r\n        numSprites.push(\"mjks-7\");\r\n        numSprites.push(\"mjks-8\");\r\n        numSprites.push(\"mjks-9\");\r\n    },\r\n\r\n    onIconClicked:function(){\r\n        var iconSprite = this.imgLoader.node.getComponent(cc.Sprite);\r\n        if(this._userId != null && this._userId > 0){\r\n           var seat = cc.vv.sssNetMgr.getSeatByID(this._userId);\r\n            var sex = 0;\r\n            if(cc.vv.baseInfoMap){\r\n                var info = cc.vv.baseInfoMap[this._userId];\r\n                if(info){\r\n                    sex = info.sex;\r\n                }                \r\n            }\r\n            cc.vv.userinfoShow.show(seat.name,seat.userid,iconSprite,sex,seat.ip);         \r\n        }\r\n    },\r\n\r\n    //设置倒计时\r\n    setCountdown:function(data){\r\n        this.lixianTime = data;\r\n        var gewei = null;\r\n        var shiwei = null;\r\n        var t = Math.ceil(this.lixianTime);\r\n        if (t >= 10) {\r\n            shiwei = Math.floor(t / 10);\r\n            gewei = t % 10;\r\n        }\r\n        else{\r\n            shiwei = 0;\r\n            gewei = t % 10;\r\n        }\r\n\r\n        if(this._shiwei && this._gewei){\r\n            var spriteS = this._shiwei.getComponent(cc.Sprite);\r\n            var spriteG = this._gewei.getComponent(cc.Sprite);\r\n            var spriteFrameS = this.numAtlas.getSpriteFrame(this.getNumSpriteByNum(shiwei));\r\n            var spriteFrameG = this.numAtlas.getSpriteFrame(this.getNumSpriteByNum(gewei));\r\n            spriteS.spriteFrame = spriteFrameS;\r\n            spriteG.spriteFrame = spriteFrameG;\r\n        }\r\n    },\r\n\r\n    getNumSpriteByNum:function(data){\r\n        for (var i = 0; i < 10; i++) {\r\n            if (data === i) {\r\n                return numSprites[i];\r\n            }\r\n        }\r\n    },\r\n\r\n    setInfo:function(data){\r\n        var name = data.name;\r\n        if (name) {\r\n            var len = name.length;\r\n            if (len > 4) {\r\n                var str = name.substring(0,4);\r\n                this._userName = str + '...';\r\n            }\r\n            else {\r\n                this._userName = name;\r\n            }\r\n        }\r\n        this._lblName.string = this._userName;\r\n        this._userId = data.userid;\r\n        this._headBox.active = true;\r\n        this.touxiangkuang.active = true;\r\n        if(this.imgLoader && data.userid){\r\n            this.imgLoader.setUserID(data.userid);\r\n        }\r\n    },\r\n\r\n    setTotalScore:function(data) {\r\n        this._lblScore.string = data;\r\n    },\r\n\r\n    reset:function(){\r\n        this.paiBeiNode.active = false;\r\n        this.liPaiNode.active = false;\r\n        this._ready.active = false;\r\n        this._headBox.active = false;\r\n        this.touxiangkuang.active = false;\r\n        this._chatBubble.active = false;\r\n        this._chatBubble.getComponent(cc.Label).string = '';\r\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = '';\r\n        var animation = window.sssGame.Animation;\r\n        var fapai = animation.fapai;\r\n        for(var i = 0 ;i < 6;i++){\r\n            fapai[i].active = false;\r\n        }\r\n        if(this.zhuang){\r\n            this.zhuang.active = false;\r\n        }\r\n        if(this._offline){\r\n            this._offline.active = this._isOffline && this._userName != \"\";\r\n        }\r\n    },\r\n\r\n    setReady:function(isReady){\r\n        this._isReady = isReady;\r\n        if(this._ready){\r\n            this._ready.active = this._isReady && (cc.vv.sssNetMgr.numOfGames >= 0); \r\n        }\r\n    },\r\n\r\n    showPlayerInfo:function(isShowPaibei){\r\n        this.paiBeiNode.active = isShowPaibei;\r\n        this.liPaiNode.active = !isShowPaibei;\r\n    },\r\n\r\n    //发牌动画\r\n    fapaiAnimation:function(index){\r\n        var animation = window.sssGame.Animation;\r\n        var fapai = animation.fapai[index];\r\n        fapai.active = true;\r\n        this.setfapaiPosition(fapai,index);\r\n        fapai.getComponent(cc.Animation).play('fapai');\r\n    },\r\n\r\n    //改变发牌动画位置\r\n    setfapaiPosition:function(eff,index){\r\n        if (cc.vv.sssNetMgr.wanfa === 1) {\r\n            if(index == 0){\r\n                eff.setPosition(-50,-250);\r\n            }\r\n            else if(index == 1){\r\n                eff.setPosition(450,-100);\r\n            }\r\n            else if(index == 2){\r\n                eff.setPosition(100,250);\r\n            }\r\n            else if(index == 3){\r\n                eff.setPosition(-450,-100);\r\n            }\r\n        }\r\n        else {\r\n            if(index == 0){\r\n                eff.setPosition(-33,-141);                \r\n            }\r\n            else if(index == 5){   \r\n                eff.setPosition(375,-141);                \r\n            }\r\n            else if(index == 3){\r\n                eff.setPosition(375,190);               \r\n            }\r\n            else if(index == 1){\r\n                eff.setPosition(-33,190);        \r\n            }\r\n            else if(index == 2){\r\n                eff.setPosition(-487,190);             \r\n            }\r\n            else if(index == 4){\r\n                eff.setPosition(-487,-141);       \r\n            }\r\n        }  \r\n    },\r\n\r\n    setOffline:function(isOffline){\r\n        this._isOffline = isOffline;\r\n        if(this._offline){\r\n            this._offline.active = this._isOffline && this._userName != \"\";\r\n        }\r\n    },\r\n\r\n    chat:function(content){\r\n        if(this._chatBubble == null || this._emoji == null){\r\n            return;\r\n        }\r\n        this._emoji.active = false;\r\n        this._chatBubble.active = true;\r\n        this._chatBubble.getComponent(cc.Label).string = content;\r\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\r\n        this._lastChatTime = 3;\r\n    },\r\n    \r\n    emoji:function(emoji){\r\n        if(this._emoji == null || this._emoji == null){\r\n            return;\r\n        }\r\n        console.log(emoji);\r\n        this._chatBubble.active = false;\r\n        this._emoji.active = true;\r\n        this._emoji.getComponent(cc.Animation).play(emoji);\r\n        this._lastChatTime = 3;\r\n    },\r\n    \r\n    voiceMsg:function(show){\r\n        if(this._voicemsg){\r\n            this._voicemsg.active = show;\r\n        }\r\n    },\r\n\r\n    update: function (dt) {\r\n        if(this._lastChatTime > 0){\r\n            this._lastChatTime -= dt;\r\n            if(this._lastChatTime < 0){\r\n                this._chatBubble.active = false;\r\n                this._emoji.active = false;\r\n                this._emoji.getComponent(cc.Animation).stop();\r\n            }\r\n        }\r\n\r\n        if(this.lixianTime && this.lixianTime > 0){\r\n            this.lixianTime -= dt;\r\n            this.setCountdown(this.lixianTime);\r\n        }\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}