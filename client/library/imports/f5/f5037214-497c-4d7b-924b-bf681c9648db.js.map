{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\sspCreateRoom.js"],"names":["cc","Class","extends","Component","properties","onLoad","onBtnCreateClicked","node","active","createRoom","self","onCreate","ret","errcode","vv","wc","hide","alert","show","sspNetMgr","connectGameServer","conf","constructSCMJConf","data","account","userMgr","sign","serverType","JSON","stringify","console","log","http","sendRequest","game_list","getChildByName","difen","koufeixuanze","getSelectedOfRadioGroup","wanfaxuanze","playerCount","jushuxuanze","wanfa","groupRoot","t","arr","i","children","length","n","getComponent","push","selected","checked","onBtnCloseClicked"],"mappings":"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","file":"sspCreateRoom.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n    onBtnCreateClicked:function(){\r\n        this.node.active = false;\r\n        this.createRoom();\r\n    },\r\n    createRoom: function () {\r\n        var self = this;\r\n        var onCreate = function (ret) {\r\n            if (ret.errcode !== 0) {\r\n                cc.vv.wc.hide();\r\n                //console.log(ret.errmsg);\r\n                if (ret.errcode == 2222) {\r\n                    cc.vv.alert.show(\"提示\", \"钻石不足，创建房间失败!\");\r\n                }\r\n                else if (ret.errcode == 555) {\r\n                    cc.vv.alert.show(\"提示\", \"钻石不足，创建房间失败!\");\r\n                }\r\n                else {\r\n                    cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\r\n                }\r\n            }\r\n            else {\r\n                cc.vv.sspNetMgr.connectGameServer(ret);\r\n            }\r\n        };\r\n\r\n        var conf = null;\r\n        conf = this.constructSCMJConf();\r\n\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n            serverType:\"SSP_SERVER_TYPE\",\r\n            conf: JSON.stringify(conf)\r\n        };\r\n        console.log(data);\r\n        cc.vv.wc.show(\"正在创建房间\");\r\n        cc.vv.http.sendRequest(\"/create_private_room\", data, onCreate);\r\n    },\r\n\r\n    constructSCMJConf: function () {\r\n        var game_list = this.node.getChildByName(\"game_list\");\r\n\r\n        var difen = 0;\r\n        var koufeixuanze = this.getSelectedOfRadioGroup('koufeixuanze');\r\n        var wanfaxuanze = 0;\r\n        var playerCount = 0;  //玩家数量\r\n\r\n        var jushuxuanze = 0;\r\n        var conf = {\r\n            difen:difen,\r\n            jushuxuanze:jushuxuanze,\r\n            wanfa:wanfaxuanze,\r\n            koufeixuanze:koufeixuanze,\r\n            playerCount:playerCount,\r\n        };\r\n        return conf;\r\n    },\r\n\r\n    getSelectedOfRadioGroup(groupRoot) {\r\n        console.log(groupRoot);\r\n        var game_list = this.node.getChildByName(\"game_list\");\r\n        var t = game_list.getChildByName(groupRoot);\r\n\r\n        var arr = [];\r\n        for (var i = 0; i < t.children.length; ++i) {\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if (n != null) {\r\n                arr.push(n);\r\n            }\r\n        }\r\n        var selected = 0;\r\n        for (var i = 0; i < arr.length; ++i) {\r\n            if (arr[i].checked) {\r\n                selected = i;\r\n                break;\r\n            }\r\n        }\r\n        return selected;\r\n    },\r\n\r\n    onBtnCloseClicked:function(){\r\n         this.node.active = false;\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}