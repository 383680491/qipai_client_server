{"version":3,"sources":["ReplayMgr.js"],"names":["ACTION_CHUPAI","ACTION_MOPAI","ACTION_PENG","ACTION_GANG","ACTION_HU","ACTION_ZIMO","ACTION_CHI","ACTION_KAIJIN","ACTION_BUHUA","ACTION_DANCHI","ACTION_KAIJINLONG","ACTION_GUO","ACTION_STAR","ACTION_SCORE","ACTION_DIPAIS","cc","Class","extends","Component","properties","_lastAction","_actionRecords","_currentIndex","onLoad","clear","init","data","action_records","isReplay","SSPgetNextAction","length","si","action","pai","pai1","pai2","SSPPaiformat","push","isPai","isSSPpai","pai3","pai4","type","T","Data","value","V","SSPtakeAction","nextActionDelay","typeofAction","tempType","vv","sspNetMgr","doChupai","seats","PlaneLen","i","userid","seatIndex","doGuo","mopaiIndex","doTurnChange","doStar","doDipais","doScore","doMopai","liangPai","chupaiIndex","liangPaiJinlong","doHu","seatindex","hupai"],"mappings":"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","file":"ReplayMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var ACTION_CHUPAI = 1;\r\nvar ACTION_MOPAI = 2;\r\nvar ACTION_PENG = 3;\r\nvar ACTION_GANG = 4;\r\nvar ACTION_HU = 5;\r\nvar ACTION_ZIMO = 6;\r\nvar ACTION_CHI = 7;\r\nvar ACTION_KAIJIN = 8;\r\nvar ACTION_BUHUA = 9;\r\n\r\nvar ACTION_CHUPAI = 1;\r\nvar ACTION_MOPAI = 2;\r\nvar ACTION_PENG = 3;\r\nvar ACTION_GANG = 4;\r\nvar ACTION_HU = 5;\r\nvar ACTION_DANCHI = 6;\r\nvar ACTION_CHI = 7;\r\nvar ACTION_KAIJINLONG = 8;\r\nvar ACTION_GUO = 9;\r\nvar ACTION_STAR = 10;\r\nvar ACTION_SCORE = 11;\r\nvar ACTION_DIPAIS = 12;\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _lastAction:null,\r\n        _actionRecords:null,\r\n        _currentIndex:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n    \r\n    clear:function(){\r\n        this._lastAction = null;\r\n        this._actionRecords = null;\r\n        this._currentIndex = 0;\r\n    },\r\n    \r\n    init:function(data){\r\n        this._actionRecords = data.action_records;\r\n        if(this._actionRecords == null){\r\n            this._actionRecords = {};\r\n        }\r\n        this._currentIndex = 0;\r\n        this._lastAction = null;\r\n    },\r\n    \r\n    isReplay:function(){\r\n        return this._actionRecords != null;    \r\n    },\r\n\r\n    SSPgetNextAction:function(){\r\n        if(this._currentIndex >= this._actionRecords.length){\r\n            return null;\r\n        }\r\n        \r\n        var si = this._actionRecords[this._currentIndex++];\r\n        var action = this._actionRecords[this._currentIndex++];\r\n        \r\n        if (action == ACTION_CHI) {\r\n            var pai = [];\r\n            var pai1 = this._actionRecords[this._currentIndex++];\r\n            var pai2 = this._actionRecords[this._currentIndex++];\r\n            pai1 = this.SSPPaiformat(pai1);\r\n            pai2 = this.SSPPaiformat(pai2);\r\n            pai.push(pai1);\r\n            pai.push(pai2);\r\n            var isPai = this.isSSPpai(this._actionRecords[this._currentIndex]);\r\n            if(isPai){\r\n                var pai3 = this._actionRecords[this._currentIndex++];\r\n                pai3 = this.SSPPaiformat(pai3);\r\n                pai.push(pai3);\r\n                isPai = this.isSSPpai(this._actionRecords[this._currentIndex]);\r\n                if(isPai){\r\n                    var pai4 = this._actionRecords[this._currentIndex++];\r\n                    pai4 = this.SSPPaiformat(pai4);\r\n                    pai.push(pai4);\r\n                }\r\n            }\r\n\r\n            return {si:si,type:action,pai:pai};\r\n        }\r\n        else if(action == ACTION_KAIJINLONG){\r\n            var pai = [];\r\n            var pai1 = this._actionRecords[this._currentIndex++];\r\n            var pai2 = this._actionRecords[this._currentIndex++];\r\n            var pai3 = this._actionRecords[this._currentIndex++];\r\n            var pai4 = this._actionRecords[this._currentIndex++];\r\n            pai1 = this.SSPPaiformat(pai1);\r\n            pai2 = this.SSPPaiformat(pai2);\r\n            pai3 = this.SSPPaiformat(pai3);\r\n            pai4 = this.SSPPaiformat(pai4);\r\n            pai.push(pai1);\r\n            pai.push(pai2);\r\n            pai.push(pai3);\r\n            pai.push(pai4);\r\n\r\n            return {si:si,type:action,pai:pai};\r\n        }\r\n        else if(action == ACTION_PENG){\r\n            var pai = [];\r\n            var pai1 = this._actionRecords[this._currentIndex++];\r\n            var pai2 = this._actionRecords[this._currentIndex++];\r\n            var pai3 = this._actionRecords[this._currentIndex++];\r\n            pai1 = this.SSPPaiformat(pai1);\r\n            pai2 = this.SSPPaiformat(pai2);\r\n            pai3 = this.SSPPaiformat(pai3);\r\n            pai.push(pai1);\r\n            pai.push(pai2);\r\n            pai.push(pai3);\r\n            return {si:si,type:action,pai:pai};\r\n        }\r\n        else if(action == ACTION_GANG){\r\n            var pai = [];\r\n            var pai1 = this._actionRecords[this._currentIndex++];\r\n            var pai2 = this._actionRecords[this._currentIndex++];\r\n            var pai3 = this._actionRecords[this._currentIndex++];\r\n            var pai4 = this._actionRecords[this._currentIndex++];\r\n            pai1 = this.SSPPaiformat(pai1);\r\n            pai2 = this.SSPPaiformat(pai2);\r\n            pai3 = this.SSPPaiformat(pai3);\r\n            pai4 = this.SSPPaiformat(pai4);\r\n            pai.push(pai1);\r\n            pai.push(pai2);\r\n            pai.push(pai3);\r\n            pai.push(pai4);\r\n            return {si:si,type:action,pai:pai};\r\n        }\r\n        else if(action == ACTION_STAR){\r\n            var data = this._actionRecords[this._currentIndex++];\r\n            return {si:0,type:action,data:data};\r\n        }\r\n        else if(action == ACTION_SCORE){\r\n            var data = this._actionRecords[this._currentIndex++];\r\n            return {si:0,type:action,data:data};\r\n        }\r\n        else if(action == ACTION_DIPAIS){\r\n            var data = this._actionRecords[this._currentIndex++];\r\n            return {si:0,type:action,data:data};\r\n        }\r\n        else if(action == ACTION_DANCHI){\r\n            var pai = [];\r\n            var pai1 = this._actionRecords[this._currentIndex++];\r\n            pai1 = this.SSPPaiformat(pai1);\r\n            pai.push(pai1);\r\n            return {si:si,type:action,pai:pai};\r\n        }\r\n        else{\r\n            var pai = this._actionRecords[this._currentIndex++];\r\n            pai = this.SSPPaiformat(pai);\r\n            return {si:si,type:action,pai:pai};\r\n        }\r\n        \r\n    },\r\n\r\n    isSSPpai:function(data){ //下一张是不是牌\r\n        var isPai = false;\r\n        if(data.T >= 0){\r\n            isPai = true;\r\n        }  \r\n        return isPai;\r\n    },\r\n\r\n    SSPPaiformat:function(Data){ //四色牌牌格式转换\r\n        var pai =[];\r\n        pai.type = Data.T;//型号\r\n        pai.value = Data.V;//值\r\n        return pai;\r\n    },\r\n    \r\n    SSPtakeAction:function(){\r\n        var action = this.SSPgetNextAction();\r\n        // if(this._lastAction != null && this._lastAction.type == ACTION_CHUPAI){\r\n        //     if(action != null && action.type != ACTION_PENG && action.type != ACTION_GANG && action.type != ACTION_HU){\r\n        //         var seats = cc.vv.sspNetMgr.seats;\r\n        //         var PlaneLen = 0;//游戏人数\r\n        //         for(var i = 0; i < seats.length; ++i){\r\n        //             if(seats[i].userid > 0){\r\n        //                 PlaneLen++;\r\n        //             }\r\n        //         }\r\n        //         var seatIndex = action.si - 1;//前一个人的\r\n        //         if(seatIndex < 0){\r\n        //             seatIndex = PlaneLen-1;\r\n        //         }\r\n        //         cc.vv.sspNetMgr.doGuo(seatIndex,action.pai,action.si);\r\n        //         cc.vv.sspNetMgr.mopaiIndex = action.si;\r\n        //         cc.vv.sspNetMgr.doTurnChange(action.si);\r\n        //     }\r\n        // }\r\n        this._lastAction = action;\r\n        if(action == null){\r\n            return -1;\r\n        }\r\n        var nextActionDelay = 1.5;\r\n        var typeofAction = typeof(action.type);\r\n        var tempType = -1;\r\n        if(typeofAction == \"object\"){\r\n            tempType = action.type.type; \r\n        }\r\n        else{\r\n            tempType = action.type; \r\n        }\r\n        if(tempType === ACTION_CHUPAI){//出牌\r\n            cc.vv.sspNetMgr.doChupai(action.si,action.pai);\r\n            return 3.0;\r\n        }\r\n        else if(tempType === ACTION_GUO){//过\r\n            var seats = cc.vv.sspNetMgr.seats;\r\n            var PlaneLen = 0;//游戏人数\r\n            for(var i = 0; i < seats.length; ++i){\r\n                if(seats[i].userid > 0){\r\n                    PlaneLen++;\r\n                }\r\n            }\r\n            var seatIndex = action.si - 1;//前一个人的\r\n            if(seatIndex < 0){\r\n                seatIndex = PlaneLen-1;\r\n            }\r\n            cc.vv.sspNetMgr.doGuo(seatIndex,action.pai,action.si);\r\n            cc.vv.sspNetMgr.mopaiIndex = action.si;\r\n            cc.vv.sspNetMgr.doTurnChange(action.si);\r\n            return 2.0;\r\n        }\r\n        else if(tempType === ACTION_STAR){//星星\r\n            cc.vv.sspNetMgr.doStar(action.data);\r\n            return 0.5;\r\n        }\r\n        else if(tempType === ACTION_DIPAIS){//上面那些底牌\r\n            cc.vv.sspNetMgr.doDipais(action.data);\r\n            return 0.5;\r\n        }\r\n        else if(tempType === ACTION_SCORE){//分数\r\n            cc.vv.sspNetMgr.doScore(action.data);\r\n            return 0.5;\r\n        }\r\n        else if(tempType === ACTION_MOPAI){//摸牌\r\n            cc.vv.sspNetMgr.doMopai(action.si,action.pai);\r\n            //cc.vv.sspNetMgr.doTurnChange(action.si);\r\n            return 2.0;\r\n        }\r\n        else if(tempType === ACTION_PENG){//碰\r\n            cc.vv.sspNetMgr.liangPai(action.si,action.pai,\"peng\",action.pai[0]);\r\n            cc.vv.sspNetMgr.chupaiIndex = action.si;\r\n            cc.vv.sspNetMgr.doTurnChange(action.si);\r\n            return 3.0;\r\n        }\r\n        else if(tempType === ACTION_GANG){//杠\r\n            cc.vv.sspNetMgr.liangPai(action.si,action.pai,\"gang\",action.pai[0]);\r\n            cc.vv.sspNetMgr.chupaiIndex = action.si;\r\n            cc.vv.sspNetMgr.doTurnChange(action.si);\r\n            return 3.0;\r\n        }\r\n        else if(tempType === ACTION_CHI){//吃\r\n            cc.vv.sspNetMgr.liangPai(action.si,action.pai,\"chi\",action.pai[action.pai.length-1]);\r\n            cc.vv.sspNetMgr.chupaiIndex = action.si;\r\n            cc.vv.sspNetMgr.doTurnChange(action.si);\r\n            return 3.0;\r\n        }\r\n        else if(tempType === ACTION_DANCHI){//单吃\r\n            cc.vv.sspNetMgr.liangPai(action.si,action.pai,\"dan\",action.pai);\r\n            cc.vv.sspNetMgr.chupaiIndex = action.si;\r\n            cc.vv.sspNetMgr.doTurnChange(action.si);\r\n            return 4.0;\r\n        }\r\n        else if(tempType === ACTION_KAIJINLONG){//金龙\r\n            var pai = action.pai;\r\n            cc.vv.sspNetMgr.liangPaiJinlong(action.si,pai,\"jinlong\",1);\r\n            return 1.0;\r\n        }\r\n        else if(tempType === ACTION_HU){\r\n            cc.vv.sspNetMgr.doHu({seatindex:action.si,hupai:action.pai});\r\n            return 2.0;\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}