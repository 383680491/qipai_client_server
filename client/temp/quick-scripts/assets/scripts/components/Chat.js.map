{"version":3,"sources":["Chat.js"],"names":["cc","Class","extends","Component","properties","_chatRoot","_tabQuick","_tabEmoji","_iptChat","_quickChatInfo","_btnChat","onLoad","vv","chat","node","getChildByName","active","replayMgr","isReplay","getComponent","EditBox","index","content","sound","getQuickChatInfo","key","onBtnChatClicked","onBgClicked","onTabClicked","event","target","name","onQuickChatItemClicked","info","gameType","userMgr","serverType","sssNet","send","sspNet","onEmojiItemClicked","console","log","onBtnSendChatClicked","string"],"mappings":"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","file":"Chat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _chatRoot:null,\r\n        _tabQuick:null,\r\n        _tabEmoji:null,\r\n        _iptChat:null,\r\n        \r\n        _quickChatInfo:null,\r\n        _btnChat:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        cc.vv.chat = this;\r\n        \r\n        this._btnChat = this.node.getChildByName(\"btn_chat\");\r\n        this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\r\n        \r\n        this._chatRoot = this.node.getChildByName(\"chat\");\r\n        this._chatRoot.active = false;\r\n        \r\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\r\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\r\n        \r\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\r\n        \r\n        \r\n        this._quickChatInfo = {};\r\n        this._quickChatInfo[\"item0\"] = {index:0,content:\"快点啊，都等到我花儿都谢谢了！\",sound:\"fix_msg_1.mp3\"};\r\n        this._quickChatInfo[\"item1\"] = {index:1,content:\"怎么又断线了，网络怎么这么差啊！\",sound:\"fix_msg_2.mp3\"};\r\n        this._quickChatInfo[\"item2\"] = {index:2,content:\"不要走，决战到天亮！\",sound:\"fix_msg_3.mp3\"};\r\n        this._quickChatInfo[\"item3\"] = {index:3,content:\"你的牌打得也太好了！\",sound:\"fix_msg_4.mp3\"};\r\n        this._quickChatInfo[\"item4\"] = {index:4,content:\"你是妹妹还是哥哥啊？\",sound:\"fix_msg_5.mp3\"};\r\n        this._quickChatInfo[\"item5\"] = {index:5,content:\"和你合作真是太愉快了！\",sound:\"fix_msg_6.mp3\"};\r\n        this._quickChatInfo[\"item6\"] = {index:6,content:\"大家好，很高兴见到各位！\",sound:\"fix_msg_7.mp3\"};\r\n        this._quickChatInfo[\"item7\"] = {index:7,content:\"各位，真是不好意思，我得离开一会儿。\",sound:\"fix_msg_8.mp3\"};\r\n        this._quickChatInfo[\"item8\"] = {index:8,content:\"不要吵了，专心玩游戏吧！\",sound:\"fix_msg_9.mp3\"};\r\n    },\r\n    \r\n    getQuickChatInfo(index){\r\n        var key = \"item\" + index;\r\n        return this._quickChatInfo[key];   \r\n    },\r\n    \r\n    onBtnChatClicked:function(){\r\n        this._chatRoot.active = true;\r\n    },\r\n    \r\n    onBgClicked:function(){\r\n        this._chatRoot.active = false;\r\n    },\r\n    \r\n    onTabClicked:function(event){\r\n        if(event.target.name == \"tabQuick\"){\r\n            this._tabQuick.active = true;\r\n            this._tabEmoji.active = false;\r\n        }\r\n        else if(event.target.name == \"tabEmoji\"){\r\n            this._tabQuick.active = false;\r\n            this._tabEmoji.active = true;\r\n        }\r\n    },\r\n    \r\n    onQuickChatItemClicked:function(event){\r\n        this._chatRoot.active = false;\r\n        var info = this._quickChatInfo[event.target.name];\r\n        var gameType = cc.vv.userMgr.serverType;\r\n        if('SSS_SERVER_TYPE' === gameType){\r\n            cc.vv.sssNet.send(\"quick_chat\",info.index); \r\n        }\r\n        else if('SSP_SERVER_TYPE' === gameType){\r\n            cc.vv.sspNet.send(\"quick_chat\",info.index); \r\n        }\r\n        \r\n    },\r\n    \r\n    onEmojiItemClicked:function(event){\r\n        console.log(event.target.name);\r\n        this._chatRoot.active = false;\r\n        var gameType = cc.vv.userMgr.serverType;\r\n        if('SSS_SERVER_TYPE' === gameType){\r\n            cc.vv.sssNet.send(\"emoji\",event.target.name);\r\n        }\r\n        else if('SSP_SERVER_TYPE' === gameType){\r\n            cc.vv.sspNet.send(\"emoji\",event.target.name);\r\n        }\r\n        \r\n    },\r\n    \r\n    onBtnSendChatClicked:function(){\r\n        this._chatRoot.active = false;\r\n        if(this._iptChat.string == \"\"){\r\n            return;\r\n        }\r\n        var gameType = cc.vv.userMgr.serverType;\r\n        if('SSS_SERVER_TYPE' === gameType){\r\n            cc.vv.sssNet.send(\"chat\",this._iptChat.string);\r\n        }\r\n        else if('SSP_SERVER_TYPE' === gameType){\r\n            cc.vv.sspNet.send(\"chat\",this._iptChat.string);\r\n        }\r\n        \r\n        this._iptChat.string = \"\";\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}