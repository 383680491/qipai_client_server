{"version":3,"sources":["sspNetMgr.js"],"names":["cc","Class","extends","Component","properties","emitter","dataEventHandler","roomId","maxNumOfGames","numOfGames","seatIndex","seats","turn","button","chupai","gamestate","isOver","dissoveData","wanfa","numOfPlayers","mopaiIndex","chupaiIndex","foldIndex","chapaiData","voiceConversion","loadFinish","numOfSSP","curaction","onLoad","clear","reset","i","length","ready","holds","folds","liangPai","chupaiNum","suopai","star","dispatchEvent","event","data","emit","getSeatIndexByID","userId","s","userid","isOwner","getSeatByID","seat","getSelfData","getLocalIndexByIndex","index","isSpecial","len","ret","console","log","getShowIndexByIndex","isLight","initHandlers","self","vv","sspNet","addHandler","errcode","roomid","conf","maxGames","numofgames","recordNumOfPlayers","userMgr","errmsg","director","loadScene","loaded","ping","wc","hide","dipai","dipais","name","isExit","show","seatindex","needCheckIp","online","ip","lastTime","longPai","pengs","gameState","numofpai","state","Operations","chuPai","sd","isSycn","chupaiTime","showChuPaiTime","doShowChuPaiTime","results","score","totalScore","doHu","successive","type","endinfo","pai","si","doChupai","doMopai","sspNetMgr","PlaneLen","doGuo","doTurnChange","j","doPeng","doGang","gangtype","redundantPai","arr","liangPaiJinlong","last","doDipais","doStar","doScore","seatData","push","CurSeatData","value","replayMgr","isReplay","idx","getIndexof","splice","isDel","Data","jinlongLen","pai1","connectGameServer","port","onConnectOK","serverType","token","time","sign","send","onConnectFailed","connect","SSPPaiformat","arrPai","prepareReplay","roomInfo","detailOfGame","id","base_info","baseInfo","game_seats","arrpai","chis","huas"],"mappings":"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","file":"sspNetMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        emitter:null,\r\n        dataEventHandler:null,\r\n        roomId:null,\r\n        maxNumOfGames:0,\r\n        numOfGames:0,\r\n        seatIndex:-1,\r\n        seats:null,\r\n        turn:-1,\r\n        button:-1,\r\n        chupai:-1,\r\n        gamestate:'prepare',\r\n        isOver:false,\r\n        dissoveData:null,\r\n        wanfa:0,\r\n        numOfPlayers:0,\r\n        mopaiIndex:0,\r\n        chupaiIndex:0,\r\n        foldIndex:0,\r\n        chapaiData:null,\r\n        voiceConversion:1,\r\n        loadFinish:false,\r\n        numOfSSP:0,\r\n        curaction:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n\r\n    clear:function(){\r\n        this.dataEventHandler = null;\r\n        this.loadFinish = false;\r\n        if(this.isOver == null){\r\n            this.seats = null;\r\n            this.roomId = null;\r\n            this.maxNumOfGames = 0;\r\n            this.numOfGames = 0;        \r\n        }\r\n    },\r\n\r\n    reset:function(){\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            this.seats[i].ready = false;\r\n        }\r\n        this.gamestate = 'prepare';\r\n        this.turn = -1;\r\n        this.chupai = -1,\r\n        this.button = -1;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            this.seats[i].holds = [];\r\n            this.seats[i].folds = [];\r\n            this.seats[i].liangPai = [];\r\n            this.seats[i].chupaiNum = 0;\r\n            this.seats[i].suopai = [];\r\n            this.seats[i].star = 0;\r\n            this.seats[i].ready = false;\r\n        }\r\n    },\r\n\r\n    dispatchEvent(event,data){\r\n        if(this.dataEventHandler){\r\n            this.dataEventHandler.emit(event,data);\r\n        }    \r\n    },\r\n\r\n    getSeatIndexByID:function(userId){\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            if(s.userid == userId){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n\r\n    isOwner:function(){\r\n        return this.seatIndex == 0;   \r\n    },\r\n\r\n    getSeatByID:function(userId){\r\n        var seatIndex = this.getSeatIndexByID(userId);\r\n        if(seatIndex == -1){\r\n            return null;\r\n        }\r\n        var seat = this.seats[seatIndex];\r\n        return seat;\r\n    },\r\n    \r\n    getSelfData:function(){\r\n        return this.seats[this.seatIndex];\r\n    },\r\n\r\n    getLocalIndexByIndex:function(index,isSpecial) { //正常的索引\r\n        var len = this.numOfPlayers;\r\n        if (isSpecial) {\r\n            len = 4;\r\n        }\r\n        var ret = 0;      \r\n        switch(len){\r\n            case 0:\r\n                console.log('len === 0');\r\n                break;\r\n            case 1:\r\n                ret = (index - this.seatIndex + 1) % 1;\r\n                break;\r\n            case 2:\r\n                ret = (index - this.seatIndex + 2) % 2;\r\n                break;\r\n            case 3:\r\n                ret = (index - this.seatIndex + 3) % 3;\r\n                break;\r\n            default:\r\n                ret = (index - this.seatIndex + 4) % 4;\r\n                break;\r\n        }\r\n        return ret;\r\n    },\r\n\r\n    getShowIndexByIndex:function(index,isLight) { //显示的索引\r\n        var ret = index;\r\n        if (this.numOfPlayers === 2 && ret === 1) {\r\n            ret = 2;\r\n        }\r\n        else if (!isLight && this.numOfPlayers === 3) {\r\n            if (ret === 2) {\r\n                ret = 3;\r\n            }            \r\n        }\r\n        else if (isLight && this.numOfPlayers === 3) {\r\n            if (this.seatIndex === 0 && ret === 2) {\r\n                ret = 3;\r\n            }\r\n            else if (this.seatIndex === 2 && ret === 1) {\r\n                ret = 2;\r\n            }\r\n            else if (this.seatIndex === 2 && ret === 2) {\r\n                ret = 3;\r\n            }\r\n        }\r\n        return ret;\r\n    },\r\n\r\n    initHandlers:function(){\r\n        var self = this;\r\n        console.log(\"initHandlers\");\r\n        cc.vv.sspNet.addHandler(\"login_result\",function(data){\r\n            console.log(\"login_result\");\r\n            console.log(data);\r\n            if(data.errcode === 0){\r\n                var data = data.data;\r\n                self.roomId = data.roomid;\r\n                self.conf = data.conf;\r\n                self.maxNumOfGames = data.conf.maxGames;\r\n                self.numOfGames = data.numofgames;\r\n                self.seats = data.seats;\r\n                self.recordNumOfPlayers();\r\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\r\n                self.isOver = false;\r\n            }\r\n            else{\r\n                console.log(data.errmsg);   \r\n            }\r\n            self.dispatchEvent('login_result');\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"login_finished\",function(data){\r\n            console.log(\"login_finished\");\r\n            cc.director.loadScene(\"sspgame\",function(){\r\n                self.loaded = true;\r\n                self.dispatchEvent('refresh_seat');\r\n                cc.vv.sspNet.ping();\r\n                cc.vv.wc.hide();\r\n                self.loadFinish = true;\r\n                \r\n                if (self.dipai) {\r\n                    self.dispatchEvent('game_dipai_notify',self.dipai);\r\n                    if(cc.vv.userMgr.userId === self.seats[self.turn].userid){\r\n                        self.dispatchEvent('chupai_tishi_notify');\r\n                    }\r\n                    self.dispatchEvent('game_sync');\r\n                }\r\n                if(self.dipais && self.dipais.length > 0){\r\n                   self.dispatchEvent('5yinlong_dipai_notify',self.dipais); \r\n                }\r\n                if(self.curaction){\r\n                    self.dispatchEvent('game_action',self.curaction);\r\n                }\r\n            });\r\n            self.dispatchEvent('login_finished');\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"exit_result\",function(data){\r\n            console.log('exit_result');\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.seats = null;\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"exit_notify_push\",function(data){\r\n            console.log('exit_notify_push');\r\n           var userId = data;\r\n           var s = self.getSeatByID(userId);\r\n           if(s != null){\r\n               s.userid = 0;\r\n               s.name = \"\";\r\n               self.dispatchEvent(\"user_state_changed\",s);\r\n           }\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"dispress_push\",function(data){\r\n            console.log('dispress_push');\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.seats = null;\r\n        });\r\n                \r\n        cc.vv.sspNet.addHandler(\"disconnect\",function(data){\r\n            console.log('disconnect');\r\n            cc.vv.sspNet.isExit = true;\r\n            if(self.roomId == null){\r\n                \r\n                cc.vv.wc.show('正在返回游戏大厅');\r\n                cc.director.loadScene(\"hall\");\r\n            }\r\n            else{\r\n                if(self.isOver == false){\r\n                    self.dispatchEvent(\"disconnect\");                    \r\n                }\r\n                else{\r\n                    self.roomId = null;\r\n                }\r\n            }\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"apply_join\",function(data){\r\n            self.dispatchEvent('apply_join_notify',data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"new_user_comes_push\",function(data){\r\n            console.log('new_user_comes_push');\r\n            var seatIndex = data.seatindex;\r\n            var needCheckIp = false;\r\n            if(self.seats[seatIndex].userid > 0){\r\n                self.seats[seatIndex].online = true;\r\n                if(self.seats[seatIndex].ip != data.ip){\r\n                    self.seats[seatIndex].ip = data.ip;\r\n                    needCheckIp = true;\r\n                }\r\n            }\r\n            else{\r\n                data.online = true;\r\n                self.seats[seatIndex] = data;\r\n                needCheckIp = true;\r\n            }\r\n            self.recordNumOfPlayers();\r\n            self.dispatchEvent('new_user',self.seats[seatIndex]);\r\n            \r\n            if(needCheckIp){\r\n                self.dispatchEvent('check_ip',self.seats[seatIndex]);\r\n            }\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"out_dissolutionTime\",function(data){ //自动解散房间剩余时间\r\n           var lastTime = data;\r\n           self.dispatchEvent(\"set_dissolutionTime\",lastTime);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"user_state_push\",function(data){\r\n            console.log(\"user_state_push\");\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.online = data.online;\r\n            self.dispatchEvent('user_state_changed',seat);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"user_ready_push\",function(data){\r\n            console.log(\"user_ready_push\");\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.ready = data.ready;\r\n            self.dispatchEvent('user_ready_changed',userId);\r\n            self.dispatchEvent('user_state_changed',userId);\r\n        });\r\n        cc.vv.sspNet.addHandler(\"game_waitChi_push\",function(data){\r\n            self.dispatchEvent('hideChi');\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_holds_push\",function(data){\r\n            var seat = self.seats[self.seatIndex]; \r\n            console.log(data);\r\n            seat.holds = data.holds;\r\n            seat.suopai = data.longPai;\r\n            \r\n            for(var i = 0; i < self.seats.length; ++i){\r\n                var s = self.seats[i]; \r\n                if(s.folds == null || s.folds){\r\n                    s.folds = [];\r\n                }\r\n                if(s.pengs == null || s.pengs){\r\n                    s.pengs = [];\r\n                }\r\n                if (s.liangPai == null || s.liangPai) {\r\n                    s.liangPai = [];\r\n                };\r\n                s.ready = false;\r\n            }\r\n\r\n\r\n            self.dispatchEvent('game_holds');\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"game_gameState_push\",function(data){\r\n            console.log('game_playing_push'); \r\n            self.gamestate = data.gameState; \r\n        });\r\n         \r\n        cc.vv.sspNet.addHandler(\"game_begin_push\",function(data){\r\n            console.log('game_begin_push');\r\n            console.log(data);\r\n            self.button = data;\r\n            self.turn = self.button;\r\n            self.chupaiIndex = self.button;\r\n            self.gamestate = \"begin\";\r\n            self.recordNumOfPlayers();\r\n            self.dispatchEvent('game_begin');\r\n\r\n            for(var i = 0; i < self.seats.length; ++i){\r\n                var s = self.seats[i];\r\n                s.chupaiNum = 0;\r\n                if(s.holds && s.holds.length == 21){\r\n                    self.dispatchEvent('chupai_tishi_notify');\r\n                }\r\n            }\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"out_card_lastTime\",function(data){\r\n            console.log('out_card_lastTime'); \r\n            self.dispatchEvent('out_card_lastTime',data);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"game_tuoGuan_push\",function(data){//改为托管状态\r\n            console.log('game_tuoGuan_push'); \r\n            self.dispatchEvent('game_tuoGuan_push');\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"game_playing_push\",function(data){\r\n            console.log('game_playing_push'); \r\n            self.dispatchEvent('game_playing');\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_sync_push\",function(data){\r\n            console.log(\"game_sync_push\");\r\n            console.log(data);\r\n            self.numOfSSP = data.numofpai;\r\n            self.gamestate = data.state;\r\n            self.curaction = data.Operations;\r\n\r\n            self.turn = data.turn;\r\n            self.button = data.button;\r\n            self.chupai = data.chuPai;\r\n\r\n            self.dipai = data.dipai;\r\n            \r\n\r\n            self.dipais = data.dipais;\r\n            \r\n            \r\n            for(var i = 0; i < data.seats.length; ++i){\r\n                var seat = self.seats[i];\r\n                var sd = data.seats[i];\r\n                seat.folds = sd.folds;\r\n                seat.star = sd.star;\r\n                seat.liangPai = sd.liangPai;\r\n                if(seat.userid === cc.vv.userMgr.userId){\r\n                    seat.holds = data.holds.holds;\r\n                    seat.suopai = data.holds.longPai;\r\n                }\r\n           }\r\n            self.recordNumOfPlayers();\r\n            \r\n            self.isSycn = false;        \r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_begin_chupaiTime_push\",function(data){\r\n            self.chupaiTime = data.chupaiTime;\r\n            self.showChuPaiTime = true;\r\n            if (self.loadFinish) {\r\n                self.doShowChuPaiTime();\r\n            }\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_action_push\",function(data){\r\n            console.log('game_action_push');\r\n            self.curaction = data;\r\n            console.log(data);\r\n            if (self.loadFinish) {\r\n                self.dispatchEvent('game_action',data);\r\n            }\r\n        });\r\n        cc.vv.sspNet.addHandler(\"game_wait_push\",function(data){\r\n            console.log('tishi_notify');\r\n            self.dispatchEvent('tishi_notify');\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_num_push\",function(data){\r\n            console.log('game_num_push');\r\n            self.numOfGames = data;\r\n            self.dispatchEvent('game_num',data);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"game_over_push\",function(data){\r\n            console.log('game_over_push');\r\n            self.dipai = null;\r\n            var results = data.results;\r\n            for(var i = 0; i <  results.length; ++i){\r\n                self.seats[i].score = results.length == 0? 0:results[i].totalScore;\r\n            }\r\n            self.dispatchEvent('game_over',results);\r\n            self.doHu(results);\r\n            for(var i = 0; i <  data.results.length; ++i){\r\n                if(results[i].successive === 8 && results[i].type && results[i].type != 'draw'){\r\n                    self.dispatchEvent('8lianSheng',i);  \r\n                }\r\n                else if(results[i].successive === 5 && results[i].type && results[i].type != 'draw'){\r\n                    self.dispatchEvent('5lianSheng',i);  \r\n                }\r\n                else if(results[i].successive === 3 && results[i].type && results[i].type != 'draw'){\r\n                    self.dispatchEvent('3lianSheng',i);  \r\n                }\r\n            }\r\n            if(data.endinfo){\r\n                self.isOver = true;\r\n                self.dispatchEvent('game_end',data.endinfo);    \r\n            }\r\n            self.reset();\r\n            for(var i = 0; i <  self.seats.length; ++i){\r\n                self.dispatchEvent('user_state_changed',self.seats[i]);    \r\n            }\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"ssp_count_push\",function(data){\r\n            console.log('ssp_count_push');\r\n            self.numOfSSP = data;\r\n            self.dispatchEvent('ssp_count',data);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"game_dipai_notify_push\",function(data){\r\n            console.log('game_dipai_notify_push');\r\n            var pai = data.pai;\r\n            self.dispatchEvent('game_dipai_notify',pai);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"5yinlong_dipai_notify_push\",function(data){\r\n            console.log('5yinlong_dipai_notify_push');\r\n            var pai = data.pai;\r\n            self.dispatchEvent('5yinlong_dipai_notify',pai);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"game_star_notify_push\",function(data){  //星星个数\r\n            console.log('game_star_notify_push');\r\n            var star = data.star;\r\n            self.dispatchEvent('game_star_notify',star);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_chupai_notify_push\",function(data){\r\n            console.log('game_chupai_notify_push');\r\n            var userId = data.userId;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.chupaiTime = data.chupaiTime;\r\n            self.foldIndex = si;\r\n            self.doChupai(si,pai);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"game_mopai_push\",function(data){ //\r\n            console.log('game_mopai_push');\r\n            var userId = data.userId;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.mopaiIndex = si;\r\n            self.chupaiIndex = si;\r\n            self.foldIndex = si;\r\n            self.doMopai(si,data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"fapai_notify_push\",function(data){\r\n            console.log('fapai_notify_push');\r\n            var userId = data.userId;//进行摸牌动作\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n\r\n            var seats = cc.vv.sspNetMgr.seats;\r\n            var PlaneLen = 0;//游戏人数\r\n            for(var i = 0; i < seats.length; ++i){\r\n                if(seats[i].userid > 0){\r\n                    PlaneLen++;\r\n                }\r\n            }\r\n\r\n            var seatIndex = si - 1;//前一个人的\r\n            if(seatIndex < 0){\r\n                seatIndex = PlaneLen-1;\r\n            }\r\n            self.doGuo(seatIndex,pai,si);\r\n            self.mopaiIndex = seatIndex;\r\n\r\n            var index = si + 1 ;\r\n            if(index == PlaneLen){\r\n                index = 0;\r\n            }\r\n            self.doTurnChange(si);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"guo_notify_push\",function(data){\r\n            console.log('guo_notify_push');\r\n            //隐藏吃碰杠那行\r\n            self.dispatchEvent('hideGuo_notify');\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"guo_result\",function(data){\r\n            console.log('guo_result');\r\n            self.dispatchEvent('guo_result');\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"score_notify_push\",function(data){\r\n            console.log('score_notify_push');\r\n            for(var i = 0; i <  self.seats.length; ++i){\r\n                for(var j = 0;j < data.score.length;j++){\r\n                    if(self.seats[i].userid === data.score[j].userId){\r\n                        self.seats[i].score = data.score[j].score;\r\n                    }\r\n                } \r\n            }\r\n            self.dispatchEvent(\"score_notify\",data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"peng_notify_push\",function(data){\r\n            console.log('peng_notify_push');\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doPeng(si,data.pai);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"gang_notify_push\",function(data){\r\n            console.log('gang_notify_push');\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doGang(si,pai,data.gangtype);\r\n        });\r\n        cc.vv.sspNet.addHandler(\"game_selectChiPai_push\",function(data){\r\n            console.log('game_selectChiPai_push');\r\n            self.dispatchEvent('chi_notify',data);\r\n        });\r\n        cc.vv.sspNet.addHandler(\"game_liangPai_push\",function(data){\r\n            var userId = data.userId;\r\n            var si = self.getSeatIndexByID(userId);\r\n            var redundantPai = null;//多余的牌\r\n            if(data.pai.arr){\r\n                var pai = data.pai.arr;\r\n                redundantPai = data.pai.pai;\r\n            }\r\n            else{\r\n                var pai = data.pai;\r\n            }\r\n            \r\n            self.liangPai(si,pai,data.type,redundantPai);\r\n            if(cc.vv.userMgr.userId === userId){\r\n                self.dispatchEvent('chupai_tishi_notify');\r\n            }\r\n            self.chupaiIndex = si;\r\n            self.doTurnChange(si);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"jinlong_notify_push\",function(data){\r\n            var userId = data.userId;\r\n            var si = self.getSeatIndexByID(userId);\r\n            var pai = data.pai;\r\n            for(var i = 0; i < pai.length;i++){\r\n                self.liangPaiJinlong(si,pai[i],\"jinlong\",pai.length);\r\n            }\r\n            \r\n        });     \r\n        \r\n        cc.vv.sspNet.addHandler(\"chat_push\",function(data){\r\n            console.log(\"chat_push\");\r\n            self.dispatchEvent(\"chat_push\",data);    \r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"expression_push\",function(data){\r\n            console.log(\"expression_push\");\r\n            self.dispatchEvent(\"expression_push\",data);    \r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"quick_chat_push\",function(data){\r\n            console.log(\"quick_chat_push\"); \r\n            self.dispatchEvent(\"quick_chat_push\",data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"emoji_push\",function(data){\r\n            console.log(\"emoji_push\"); \r\n            self.dispatchEvent(\"emoji_push\",data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"dissolve_notice_push\",function(data){\r\n            console.log(\"dissolve_notice_push\"); \r\n            console.log(data);\r\n            self.dissoveData = data;\r\n            self.dispatchEvent(\"dissolve_notice\",data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"dissolve_cancel_push\",function(data){\r\n            console.log('dissolve_cancel_push');\r\n            self.dissoveData = null;\r\n            self.dispatchEvent(\"dissolve_cancel\",data);\r\n        });\r\n        \r\n        cc.vv.sspNet.addHandler(\"voice_msg_push\",function(data){\r\n            console.log('voice_msg_push');\r\n            self.dispatchEvent(\"voice_msg\",data);\r\n        });\r\n\r\n\r\n        cc.vv.sspNet.addHandler(\"out_dissolutionTime\",function(data){ //自动解散房间剩余时间\r\n           var lastTime = data;\r\n           self.dispatchEvent(\"set_dissolutionTime\",lastTime);\r\n        });\r\n\r\n        cc.vv.sspNet.addHandler(\"limit_login\",function(data){\r\n            self.dispatchEvent(\"limit_login\",data);\r\n        });\r\n\r\n    },\r\n\r\n    doTurnChange:function(si){\r\n        var data = {\r\n            last:this.turn,\r\n            turn:si,\r\n        }\r\n        this.turn = si;\r\n        this.dispatchEvent('game_chupai',data);\r\n    },\r\n\r\n    doDipais:function(data){//上面那些底牌\r\n        console.log('5yinlong_dipai_notify_push');\r\n        var pai = data.pai;\r\n        this.dispatchEvent('5yinlong_dipai_notify',pai);\r\n    },\r\n\r\n    doStar:function(data){//星星\r\n        console.log('game_star_notify_push');\r\n        var star = data.star;\r\n        this.dispatchEvent('game_star_notify',star);\r\n    },\r\n\r\n    doScore:function(data){//分数\r\n        console.log('score_notify_push');\r\n        for(var i = 0; i <  this.seats.length; ++i){\r\n            for(var j = 0;j < data.score.length;j++){\r\n                if(this.seats[i].userid === data.score[j].userId){\r\n                    this.seats[i].score = data.score[j].score;\r\n                }\r\n            } \r\n        }\r\n        this.dispatchEvent(\"score_notify\",data);\r\n    },\r\n\r\n    doHu:function(data){\r\n        this.dispatchEvent('hupai',data);\r\n    },\r\n\r\n    recordNumOfPlayers:function(){\r\n        this.numOfPlayers = 0;\r\n        for (var i = 0; i < this.seats.length; i++) {\r\n            var seat = this.seats[i];\r\n            if(seat.userid > 0){\r\n                this.numOfPlayers++;\r\n            }\r\n        }\r\n    },\r\n\r\n    doShowChuPaiTime:function() {\r\n        this.dispatchEvent('game_chupai_countTime');\r\n        this.showChuPaiTime = false;\r\n    },\r\n\r\n    doGuo:function(seatIndex,pai,si){\r\n        var seatData = this.seats[seatIndex];\r\n        var folds = seatData.folds;\r\n        folds.push(pai);\r\n        this.dispatchEvent('fold_notify',seatData);  \r\n\r\n        var CurSeatData = this.seats[si];//当前人的data\r\n        this.dispatchEvent('guo_notify',CurSeatData);  \r\n        if(this.chupai){\r\n            if(pai.type !== this.chupai.type || pai.value !== this.chupai.value){\r\n                this.dispatchEvent('game_mopai',{seatIndex:seatIndex,pai:pai});  \r\n            }  \r\n        } \r\n    },\r\n    \r\n    doMopai:function(seatIndex,data){\r\n        var seatData = this.seats[seatIndex];\r\n        var pai = data.pai;\r\n        if (cc.vv.replayMgr.isReplay() == true) {\r\n            pai = data;\r\n        }\r\n        this.dispatchEvent('game_mopai',{seatIndex:seatIndex,pai:pai});  \r\n    },\r\n    \r\n    doChupai:function(seatIndex,pai){\r\n        this.chupai = pai;\r\n        var seatData = this.seats[seatIndex];\r\n        if(seatData.holds){             \r\n            var idx = this.getIndexof(seatData.holds,pai);\r\n            seatData.holds.splice(idx,1);\r\n        }\r\n\r\n        this.dispatchEvent('game_chupai_notify',{seatData:seatData,pai:pai,seatIndex:seatIndex});   \r\n        this.dispatchEvent('game_chupai_countTime');  \r\n    },\r\n    \r\n    \r\n    doPeng:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        //移除手牌\r\n        if(seatData.holds){\r\n            for(var i = 0; i < 2; ++i){\r\n                var idx = this.getIndexof(seatData.holds,pai);\r\n                seatData.holds.splice(idx,1);\r\n            }                \r\n        }\r\n            \r\n        //更新碰牌数据\r\n        var pengs = seatData.pengs;\r\n        pengs.push(pai);\r\n            \r\n        this.dispatchEvent('peng_notify',seatData);\r\n    },\r\n    liangPai:function(seatIndex,pai,type,redundantPai){\r\n        var seatData = this.seats[seatIndex];\r\n        var isDel = false;\r\n        //移除手牌\r\n        if(seatData.holds){\r\n            for(var i = 0;i < pai.length;i++){\r\n                if(redundantPai && !isDel && pai[i].type === redundantPai.type && pai[i].value === redundantPai.value){ //多余的牌不用删掉\r\n                    isDel = true;\r\n                    continue;\r\n                }\r\n                if(pai[i]){\r\n                    var idx = this.getIndexof(seatData.holds,pai[i]);\r\n                    if(idx != -1){\r\n                        seatData.holds.splice(idx,1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n            \r\n        //更新碰牌数据\r\n        var liangPai = seatData.liangPai;\r\n        var data = [];\r\n        liangPai.push(data);\r\n        var len = liangPai.length - 1;\r\n        for(var i = 0;i < pai.length;i++){\r\n            liangPai[len].push(pai[i]);\r\n        }\r\n\r\n        var Data = [];\r\n        Data.seatData = seatData;\r\n        Data.type = type;\r\n        Data.redundantPai = redundantPai;\r\n        console.log(\"liangPai:\");\r\n        console.log(\"剩余手牌:\",seatData.holds);\r\n\r\n        this.dispatchEvent('liangPai_notify',Data);\r\n    },\r\n\r\n    liangPaiJinlong:function(seatIndex,pai,type,jinlongLen){\r\n        var seatData = this.seats[seatIndex];\r\n        //移除手牌\r\n        if(seatData.holds){\r\n            for(var i = 0;i < pai.length;i++){\r\n                if(pai[i]){\r\n                    var idx = this.getIndexof(seatData.holds,pai[i]);\r\n                    if(idx != -1){\r\n                        seatData.holds.splice(idx,1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n            \r\n        //更新碰牌数据\r\n        var liangPai = seatData.liangPai;\r\n        seatData.jinlongLen = jinlongLen;\r\n        var data = [];\r\n        liangPai.push(data);\r\n        var len = liangPai.length - 1;\r\n        for(var i = 0;i < pai.length;i++){\r\n            liangPai[len].push(pai[i]);\r\n        }\r\n\r\n        var Data = [];\r\n        Data.seatData = seatData;\r\n        Data.type = type;\r\n        console.log(\"liangPaiJinlong:\");\r\n        console.log(\"剩余手牌:\",seatData.holds);\r\n        this.dispatchEvent('liangPaiJinlong_notify',Data);\r\n    },\r\n\r\n    getIndexof:function(holds,pai1){ //返回手牌里面这张牌的索引\r\n        for(var i = 0;i < holds.length;i++){\r\n            if(holds[i].type === pai1.type && holds[i].value === pai1.value){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n\r\n    connectGameServer:function(data){\r\n        this.dissoveData = null;\r\n        cc.vv.sspNet.ip = data.ip + \":\" + data.port;\r\n        console.log(cc.vv.sspNet.ip);\r\n        var self = this;\r\n        console.log('connectGameServer');\r\n        var onConnectOK = function(){\r\n            cc.vv.userMgr.serverType = \"SSP_SERVER_TYPE\";\r\n            console.log(\"onConnectOK\");\r\n            var sd = {\r\n                token:data.token,\r\n                roomid:data.roomid,\r\n                time:data.time,\r\n                sign:data.sign,\r\n            };\r\n            self.initHandlers();\r\n            cc.vv.sspNet.send(\"login\",sd);\r\n            console.log(\"onConnectOK over\");\r\n        };\r\n        \r\n        var onConnectFailed = function(){\r\n            console.log(\"failed.\");\r\n            cc.vv.wc.hide();\r\n        };\r\n        console.log(\"正在进入房间\");\r\n        cc.vv.wc.show(\"正在进入房间\");\r\n        cc.vv.sspNet.connect(onConnectOK,onConnectFailed);\r\n        console.log(\"正在进入房间over\");\r\n    },\r\n\r\n\r\n    SSPPaiformat:function(Data){ //四色牌牌格式转换\r\n        var arrPai = [];\r\n        for(var i = 0;i < Data.length;i++){\r\n            var pai =[];\r\n            pai.type = Data[i][0];//型号\r\n            pai.value = Data[i][1];//值\r\n            arrPai.push(pai);\r\n        }\r\n        \r\n        return arrPai;\r\n    },\r\n\r\n    prepareReplay:function(roomInfo,detailOfGame){\r\n        console.log(\"sspprepareReplay\");\r\n        this.roomId = roomInfo.id;\r\n        this.seats = roomInfo.seats;\r\n        this.turn = detailOfGame.base_info.button;\r\n        var baseInfo = detailOfGame.base_info;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            if(!baseInfo.game_seats[i]){\r\n                this.seats[i].userid = 0;\r\n            }\r\n            var s = this.seats[i];\r\n            s.seatindex = i;\r\n            s.score = null;\r\n            if(baseInfo.game_seats[i]){\r\n                var arrpai = this.SSPPaiformat(baseInfo.game_seats[i]);\r\n            }\r\n            else{\r\n                var arrpai = [];\r\n            }\r\n            \r\n            s.holds = arrpai;\r\n            if(s.holds.length === 21){\r\n                this.button = i;\r\n                this.chupaiIndex = this.button;\r\n            }\r\n            s.pengs = [];\r\n            s.chis = [];\r\n            s.huas = [];\r\n            s.liangPai = [];\r\n            s.suopai = [];\r\n            s.star = [];\r\n            s.folds = [];\r\n            s.chupaiNum = 0;\r\n            console.log(s);\r\n            if(cc.vv.userMgr.userId == s.userid){\r\n                this.seatIndex = i;\r\n            }\r\n        }\r\n        this.recordNumOfPlayers();\r\n        this.conf = {\r\n            type:baseInfo.type,\r\n        }\r\n        if(this.conf.type == null){\r\n            this.conf.type == \"xzdd\";\r\n        }\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}