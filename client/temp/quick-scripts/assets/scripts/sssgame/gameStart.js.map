{"version":3,"sources":["gameStart.js"],"names":["cc","Class","extends","Component","properties","onLoad","node","getChildByName","active","gameSeatsCom","getComponent","initNode","gameNormol","data","vv","audioMgr","playSFX","setResultData","emptyChatBubble","resetGameSeats","setPaibei","receiveDaQiangData","expression","self","seatIndex0","sssNetMgr","getSeatIndexByID","sendId","sendIdindex","getLocalIndex","seatIndex1","receiveId","receiveIdindex","type","LiWu","find","LiWu0","startPoint","setBiaoqingPosition","endPoint","setPosition","Row","Col","actionBy","moveTo","p","runAction","mySch","animation","window","sssGame","Animation","sex","userMgr","zhadan","play","aud","scheduleOnce","dangao","dianzan","feiwen","songhua","fanqie","index","wanfa"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVQ,KAHP;;AAgBL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,IAAL,CAAUC,cAAV,CAAyB,WAAzB,EAAsCC,MAAtC,GAA+C,IAA/C;AACA,aAAKC,YAAL,GAAoB,KAAKH,IAAL,CAAUC,cAAV,CAAyB,WAAzB,EAAsCG,YAAtC,CAAmD,WAAnD,CAApB;AACH,KApBI;;AAsBLC,cAAS,oBAAU,CAElB,CAxBI;;AA0BLC,gBAAW,oBAASC,IAAT,EAAc;AACrBb,WAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,0BAAvB;AACA,aAAKP,YAAL,CAAkBQ,aAAlB,CAAgCJ,IAAhC;AACA,aAAKJ,YAAL,CAAkBS,eAAlB;AACH,KA9BI;;AAgCLC,oBAAe,0BAAU;AACrB,aAAKV,YAAL,CAAkBU,cAAlB;AACH,KAlCI;;AAoCLC,eAAU,mBAASP,IAAT,EAAc;AACpB,aAAKJ,YAAL,CAAkBW,SAAlB,CAA4BP,IAA5B;AACH,KAtCI;;AAwCLQ,wBAAmB,4BAASR,IAAT,EAAc;AAC7B,aAAKJ,YAAL,CAAkBY,kBAAlB,CAAqCR,IAArC;AACH,KA1CI;;AA4CLS,gBAAW,oBAAST,IAAT,EAAc;AAAK;AAC1B,YAAIU,OAAO,IAAX;AACA,YAAIC,aAAaxB,GAAGc,EAAH,CAAMW,SAAN,CAAgBC,gBAAhB,CAAiCb,KAAKc,MAAtC,CAAjB;AACA,YAAIC,cAAc5B,GAAGc,EAAH,CAAMW,SAAN,CAAgBI,aAAhB,CAA8BL,UAA9B,CAAlB,CAHqB,CAGwC;AAC7D,YAAIM,aAAa9B,GAAGc,EAAH,CAAMW,SAAN,CAAgBC,gBAAhB,CAAiCb,KAAKkB,SAAtC,CAAjB;AACA,YAAIC,iBAAiBhC,GAAGc,EAAH,CAAMW,SAAN,CAAgBI,aAAhB,CAA8BC,UAA9B,CAArB,CALqB,CAK2C;AAChE,YAAIG,OAAOpB,KAAKoB,IAAhB;;AAEA,YAAIC,OAAOlC,GAAGmC,IAAH,CAAQ,gBAAcP,WAAd,GAA0B,OAA1B,GAAkCK,IAA1C,CAAX;AACA,YAAIG,QAAQpC,GAAGmC,IAAH,CAAQ,kBAAR,CAAZ;AACAD,aAAK1B,MAAL,GAAc,IAAd;;AAEA,YAAI6B,aAAa,KAAKC,mBAAL,CAAyBV,WAAzB,EAAqCK,IAArC,CAAjB,CAZqB,CAYuC;AAC5D,YAAIM,WAAW,KAAKD,mBAAL,CAAyBN,cAAzB,EAAwCC,IAAxC,CAAf,CAbqB,CAawC;;AAE7DC,aAAKM,WAAL,CAAiBH,WAAWI,GAA5B,EAAgCJ,WAAWK,GAA3C;AACA,YAAIC,WAAW3C,GAAG4C,MAAH,CAAU,GAAV,EAAe5C,GAAG6C,CAAH,CAAKN,SAASE,GAAd,EAAkBF,SAASG,GAA3B,CAAf,CAAf;AACAR,aAAKY,SAAL,CAAeH,QAAf;;AAEA,YAAII,QAAO,SAAPA,KAAO,GAAU;AACjBb,iBAAK1B,MAAL,GAAc,KAAd;AACA,gBAAIwC,YAAYC,OAAOC,OAAP,CAAeC,SAA/B;;AAEA,gBAAIC,MAAM,GAAV;AACA,gBAAGpD,GAAGc,EAAH,CAAMuC,OAAN,CAAcD,GAAd,IAAqB,CAAxB,EAA0B;AAAE;AACxBA,sBAAM,GAAN;AACH,aAFD,MAGK,IAAGpD,GAAGc,EAAH,CAAMuC,OAAN,CAAcD,GAAd,IAAqB,CAAxB,EAA0B;AAAE;AAC7BA,sBAAM,GAAN;AACH;;AAED,gBAAGnB,SAAS,CAAZ,EAAc;AACV,oBAAIqB,SAASN,UAAUM,MAAvB;AACAA,uBAAO9C,MAAP,GAAgB,IAAhB;AACA8C,uBAAOd,WAAP,CAAmBD,SAASE,GAA5B,EAAgCF,SAASG,GAAzC;AACAM,0BAAUM,MAAV,CAAiB5C,YAAjB,CAA8BV,GAAGmD,SAAjC,EAA4CI,IAA5C,CAAiD,QAAjD;AACAvD,mBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,UAAQoC,GAAR,GAAY,aAAnC;;AAEA,oBAAII,MAAK,SAALA,GAAK,GAAU;AACfxD,uBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,iBAAvB;AACH,iBAFD;AAGAO,qBAAKkC,YAAL,CAAkBD,GAAlB,EAAsB,GAAtB;AACH,aAXD,MAYK,IAAGvB,SAAS,CAAZ,EAAc;AACf,oBAAIyB,SAASV,UAAUU,MAAvB;AACAA,uBAAOlD,MAAP,GAAgB,IAAhB;AACAkD,uBAAOlB,WAAP,CAAmBD,SAASE,GAA5B,EAAgCF,SAASG,GAAzC;AACAM,0BAAUU,MAAV,CAAiBhD,YAAjB,CAA8BV,GAAGmD,SAAjC,EAA4CI,IAA5C,CAAiD,QAAjD;AACAvD,mBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,UAAQoC,GAAR,GAAY,cAAnC;;AAEA,oBAAII,MAAK,SAALA,GAAK,GAAU;AACfxD,uBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,sBAAvB;AACH,iBAFD;AAGAO,qBAAKkC,YAAL,CAAkBD,GAAlB,EAAsB,GAAtB;AACH,aAXI,MAYA,IAAGvB,SAAS,CAAZ,EAAc;AACf,oBAAI0B,UAAUX,UAAUW,OAAxB;AACAA,wBAAQnD,MAAR,GAAiB,IAAjB;AACAmD,wBAAQnB,WAAR,CAAoBD,SAASE,GAA7B,EAAiCF,SAASG,GAA1C;AACAM,0BAAUW,OAAV,CAAkBjD,YAAlB,CAA+BV,GAAGmD,SAAlC,EAA6CI,IAA7C,CAAkD,SAAlD;AACAvD,mBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,UAAQoC,GAAR,GAAY,cAAnC;;AAEA,oBAAII,MAAK,SAALA,GAAK,GAAU;AACfxD,uBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,sBAAvB;AACH,iBAFD;AAGAO,qBAAKkC,YAAL,CAAkBD,GAAlB,EAAsB,GAAtB;AACH,aAXI,MAYA,IAAGvB,SAAS,CAAZ,EAAc;AACf,oBAAI2B,SAASZ,UAAUY,MAAvB;AACAA,uBAAOpD,MAAP,GAAgB,IAAhB;AACAoD,uBAAOpB,WAAP,CAAmBD,SAASE,GAA5B,EAAgCF,SAASG,GAAzC;AACAM,0BAAUY,MAAV,CAAiBlD,YAAjB,CAA8BV,GAAGmD,SAAjC,EAA4CI,IAA5C,CAAiD,QAAjD;AACAvD,mBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,UAAQoC,GAAR,GAAY,WAAnC;;AAEA,oBAAII,MAAK,SAALA,GAAK,GAAU;AACfxD,uBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,sBAAvB;AACH,iBAFD;AAGAO,qBAAKkC,YAAL,CAAkBD,GAAlB,EAAsB,GAAtB;AACH,aAXI,MAYA,IAAGvB,SAAS,CAAZ,EAAc;AACf,oBAAI4B,UAAUb,UAAUa,OAAxB;AACAA,wBAAQrD,MAAR,GAAiB,IAAjB;AACAqD,wBAAQrB,WAAR,CAAoBD,SAASE,GAA7B,EAAiCF,SAASG,GAA1C;AACAM,0BAAUa,OAAV,CAAkBnD,YAAlB,CAA+BV,GAAGmD,SAAlC,EAA6CI,IAA7C,CAAkD,SAAlD;AACAvD,mBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,UAAQoC,GAAR,GAAY,cAAnC;AACA,oBAAII,MAAK,SAALA,GAAK,GAAU;AACfxD,uBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,sBAAvB;AACH,iBAFD;AAGAO,qBAAKkC,YAAL,CAAkBD,GAAlB,EAAsB,GAAtB;AACH,aAVI,MAWA,IAAGvB,SAAS,CAAZ,EAAc;AACf,oBAAI6B,SAASd,UAAUc,MAAvB;AACAA,uBAAOtD,MAAP,GAAgB,IAAhB;AACAsD,uBAAOtB,WAAP,CAAmBD,SAASE,GAA5B,EAAgCF,SAASG,GAAzC;AACAM,0BAAUc,MAAV,CAAiBpD,YAAjB,CAA8BV,GAAGmD,SAAjC,EAA4CI,IAA5C,CAAiD,QAAjD;AACAvD,mBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,UAAQoC,GAAR,GAAY,aAAnC;AACA,oBAAII,MAAK,SAALA,GAAK,GAAU;AACfxD,uBAAGc,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,iBAAvB;AACH,iBAFD;AAGAO,qBAAKkC,YAAL,CAAkBD,GAAlB,EAAsB,GAAtB;AACH;AACJ,SAlFD;AAmFA,aAAKC,YAAL,CAAkBV,KAAlB,EAAwB,GAAxB;AACH,KAnJI;;AAqJL;AACAT,yBAAoB,6BAASyB,KAAT,EAAe9B,IAAf,EAAoB;AACpC,YAAIpB,OAAO,EAAX;AACA,YAAIb,GAAGc,EAAH,CAAMW,SAAN,CAAgBuC,KAAhB,KAA0B,CAA9B,EAAiC;AAC7B,gBAAGD,UAAU,CAAb,EAAe;AACXlD,qBAAK4B,GAAL,GAAW,GAAX;AACA5B,qBAAK6B,GAAL,GAAW,CAAC,GAAZ;AACH,aAHD,MAIK,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,GAAX;AACA5B,qBAAK6B,GAAL,GAAW,CAAX;AACH,aAHI,MAIA,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,CAAC,GAAZ;AACA5B,qBAAK6B,GAAL,GAAW,GAAX;AACH,aAHI,MAIA,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,CAAC,GAAZ;AACA5B,qBAAK6B,GAAL,GAAW,CAAX;AACH;AACJ,SAjBD,MAkBK;AACD,gBAAGqB,UAAU,CAAb,EAAe;AACXlD,qBAAK4B,GAAL,GAAW,CAAX;AACA5B,qBAAK6B,GAAL,GAAW,CAAC,GAAZ;AACH,aAHD,MAIK,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,GAAX;AACA5B,qBAAK6B,GAAL,GAAW,CAAC,GAAZ;AACH,aAHI,MAIA,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,GAAX;AACA5B,qBAAK6B,GAAL,GAAW,GAAX;AACH,aAHI,MAIA,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,CAAX;AACA5B,qBAAK6B,GAAL,GAAW,GAAX;AACH,aAHI,MAIA,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,CAAC,GAAZ;AACA5B,qBAAK6B,GAAL,GAAW,GAAX;AACH,aAHI,MAIA,IAAGqB,UAAU,CAAb,EAAe;AAChBlD,qBAAK4B,GAAL,GAAW,CAAC,GAAZ;AACA5B,qBAAK6B,GAAL,GAAW,CAAC,GAAZ;AACH;AACJ;AACA,eAAO7B,IAAP;AACJ;;AAED;AACA;;AAEA;AA1MK,CAAT","file":"gameStart.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sssgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.node.getChildByName('gameSeats').active = true;\r\n        this.gameSeatsCom = this.node.getChildByName('gameSeats').getComponent('gameSeats');\r\n    },\r\n\r\n    initNode:function(){\r\n        \r\n    },\r\n\r\n    gameNormol:function(data){\r\n        cc.vv.audioMgr.playSFX(\"sssMusic/kaishibipai.mp3\");\r\n        this.gameSeatsCom.setResultData(data);\r\n        this.gameSeatsCom.emptyChatBubble();\r\n    }, \r\n\r\n    resetGameSeats:function(){\r\n        this.gameSeatsCom.resetGameSeats();\r\n    },\r\n\r\n    setPaibei:function(data){\r\n        this.gameSeatsCom.setPaibei(data);\r\n    },\r\n\r\n    receiveDaQiangData:function(data){\r\n        this.gameSeatsCom.receiveDaQiangData(data);\r\n    },\r\n\r\n    expression:function(data){    //表情\r\n        var self = this;\r\n        var seatIndex0 = cc.vv.sssNetMgr.getSeatIndexByID(data.sendId);\r\n        var sendIdindex = cc.vv.sssNetMgr.getLocalIndex(seatIndex0); //发送人的位置\r\n        var seatIndex1 = cc.vv.sssNetMgr.getSeatIndexByID(data.receiveId);\r\n        var receiveIdindex = cc.vv.sssNetMgr.getLocalIndex(seatIndex1); //接收人的位置\r\n        var type = data.type;\r\n\r\n        var LiWu = cc.find(\"Canvas/liwu\"+sendIdindex+\"/liwu\"+type);\r\n        var LiWu0 = cc.find(\"Canvas/liwu/liwu\");\r\n        LiWu.active = true;\r\n\r\n        var startPoint = this.setBiaoqingPosition(sendIdindex,type);//出发点\r\n        var endPoint = this.setBiaoqingPosition(receiveIdindex,type);//结束点\r\n\r\n        LiWu.setPosition(startPoint.Row,startPoint.Col)\r\n        var actionBy = cc.moveTo(0.5, cc.p(endPoint.Row,endPoint.Col));\r\n        LiWu.runAction(actionBy);\r\n        \r\n        var mySch =function(){ \r\n            LiWu.active = false;\r\n            var animation = window.sssGame.Animation;\r\n\r\n            var sex = \"M\";\r\n            if(cc.vv.userMgr.sex == 1){ //男\r\n                sex = \"M\";\r\n            }\r\n            else if(cc.vv.userMgr.sex == 2){ //女\r\n                sex = \"F\";\r\n            }\r\n\r\n            if(type === 0){\r\n                var zhadan = animation.zhadan;\r\n                zhadan.active = true;\r\n                zhadan.setPosition(endPoint.Row,endPoint.Col);\r\n                animation.zhadan.getComponent(cc.Animation).play('zhadan');\r\n                cc.vv.audioMgr.playSFX(\"liwu/\"+sex+\"_zhadan.mp3\");\r\n\r\n                var aud =function(){ \r\n                    cc.vv.audioMgr.playSFX(\"liwu/zhadan.mp3\");\r\n                }\r\n                self.scheduleOnce(aud,1.0);\r\n            }\r\n            else if(type === 1){\r\n                var dangao = animation.dangao;\r\n                dangao.active = true;\r\n                dangao.setPosition(endPoint.Row,endPoint.Col);\r\n                animation.dangao.getComponent(cc.Animation).play('dangao');\r\n                cc.vv.audioMgr.playSFX(\"liwu/\"+sex+\"_xianhua.mp3\");\r\n\r\n                var aud =function(){ \r\n                    cc.vv.audioMgr.playSFX(\"liwu/kiss_dangao.mp3\");\r\n                }\r\n                self.scheduleOnce(aud,1.0);\r\n            }\r\n            else if(type === 2){\r\n                var dianzan = animation.dianzan;\r\n                dianzan.active = true;\r\n                dianzan.setPosition(endPoint.Row,endPoint.Col);\r\n                animation.dianzan.getComponent(cc.Animation).play('dianzan');\r\n                cc.vv.audioMgr.playSFX(\"liwu/\"+sex+\"_dianzan.mp3\");\r\n\r\n                var aud =function(){ \r\n                    cc.vv.audioMgr.playSFX(\"liwu/hua_dianzan.mp3\");\r\n                }\r\n                self.scheduleOnce(aud,1.0);\r\n            }\r\n            else if(type === 3){\r\n                var feiwen = animation.feiwen;\r\n                feiwen.active = true;\r\n                feiwen.setPosition(endPoint.Row,endPoint.Col);\r\n                animation.feiwen.getComponent(cc.Animation).play('feiwen');\r\n                cc.vv.audioMgr.playSFX(\"liwu/\"+sex+\"_kiss.mp3\");\r\n\r\n                var aud =function(){ \r\n                    cc.vv.audioMgr.playSFX(\"liwu/kiss_dangao.mp3\");\r\n                }\r\n                self.scheduleOnce(aud,1.0);\r\n            }\r\n            else if(type === 4){\r\n                var songhua = animation.songhua;\r\n                songhua.active = true;\r\n                songhua.setPosition(endPoint.Row,endPoint.Col);\r\n                animation.songhua.getComponent(cc.Animation).play('songhua');\r\n                cc.vv.audioMgr.playSFX(\"liwu/\"+sex+\"_xianhua.mp3\");\r\n                var aud =function(){ \r\n                    cc.vv.audioMgr.playSFX(\"liwu/hua_dianzan.mp3\");\r\n                }\r\n                self.scheduleOnce(aud,1.0);\r\n            }\r\n            else if(type === 5){\r\n                var fanqie = animation.fanqie;\r\n                fanqie.active = true;\r\n                fanqie.setPosition(endPoint.Row,endPoint.Col);\r\n                animation.fanqie.getComponent(cc.Animation).play('fanqie');\r\n                cc.vv.audioMgr.playSFX(\"liwu/\"+sex+\"_fanqie.mp3\");\r\n                var aud =function(){ \r\n                    cc.vv.audioMgr.playSFX(\"liwu/fanqie.mp3\");\r\n                }\r\n                self.scheduleOnce(aud,1.0);\r\n            }\r\n        }\r\n        this.scheduleOnce(mySch,0.5);\r\n    },\r\n\r\n    //改变表情位置\r\n    setBiaoqingPosition:function(index,type){\r\n        var data = {};\r\n        if (cc.vv.sssNetMgr.wanfa === 1) {\r\n            if(index === 0){\r\n                data.Row = 200;\r\n                data.Col = -280;\r\n            }\r\n            else if(index === 1){\r\n                data.Row = 570;\r\n                data.Col = 0;\r\n            }\r\n            else if(index === 2){\r\n                data.Row = -200;\r\n                data.Col = 280;\r\n            }\r\n            else if(index === 3){\r\n                data.Row = -580;\r\n                data.Col = 0;\r\n            }            \r\n        }\r\n        else {\r\n            if(index === 0){                \r\n                data.Row = 0;\r\n                data.Col = -255;\r\n            }\r\n            else if(index === 5){\r\n                data.Row = 564;\r\n                data.Col = -200;\r\n            }\r\n            else if(index === 3){\r\n                data.Row = 564;\r\n                data.Col = 164;\r\n            }\r\n            else if(index === 1){\r\n                data.Row = 0;\r\n                data.Col = 250;\r\n            }\r\n            else if(index === 2){\r\n                data.Row = -564;\r\n                data.Col = 164;\r\n            }\r\n            else if(index === 4){\r\n                data.Row = -564;\r\n                data.Col = -200;\r\n            }\r\n        }\r\n         return data;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}