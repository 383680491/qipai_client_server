{"version":3,"sources":["sssGameResult.js"],"names":["cc","Class","extends","Component","properties","onLoad","_seats","i","s","sn","node","getChildByName","active","viewdata","username","getComponent","Label","imgLoader","ID","score","win","lose","pingju","btnWechat","find","vv","userMgr","control","value","utils","addClickEvent","push","reset","showResult","data","len","length","name","userName","str","substring","string","userId","setUserID","flat","sys","localStorage","setItem","onBtnWeichatClicked","share","onBtnShareCloseClicked","onBtnShareHaoyou","browserType","console","log","anysdkMgr","getAccess_token","os","OS_ANDROID","OS_IOS","shareResult","onBtnSharePengyouquan","btnClick","event","target","sssNet","send"],"mappings":"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","file":"sssGameResult.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sssgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._seats = [];\r\n        for(var i = 1; i <= 6; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.node.getChildByName(s);\r\n            sn.active = false;\r\n            var viewdata = {};\r\n            viewdata.username = sn.getChildByName('userName').getComponent(cc.Label);\r\n            viewdata.imgLoader = sn.getChildByName(\"headBox\").getComponent(\"ImageLoader\");\r\n            viewdata.ID = sn.getChildByName('ID').getComponent(cc.Label);\r\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\r\n            viewdata.win = sn.getChildByName('win').getComponent(cc.Label);\r\n            viewdata.lose = sn.getChildByName('lose').getComponent(cc.Label);\r\n            viewdata.pingju = sn.getChildByName('pingju').getComponent(cc.Label);\r\n\r\n            var btnWechat = cc.find(\"Canvas/game_result/btn_wxfx\");\r\n            if(btnWechat){\r\n                if(cc.vv.userMgr.control.value == 0){\r\n                    btnWechat.active = false;\r\n                }\r\n                cc.vv.utils.addClickEvent(btnWechat,this.node,\"sssGameResult\",\"onBtnWeichatClicked\");\r\n            }\r\n\r\n            this._seats.push(viewdata);\r\n        }\r\n    },\r\n\r\n    reset:function(){\r\n        this.node.active = false;\r\n        for(var i = 1; i <= 6; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.node.getChildByName(s);\r\n            sn.active = false;\r\n        }\r\n    },\r\n\r\n    showResult:function(data){\r\n        var len = data.length;\r\n        for(var i = 1; i <= len; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = this.node.getChildByName(s);\r\n            sn.active = true;\r\n        }\r\n        for(let i = 0;i < data.length;i++){\r\n            var name = data[i].userName;\r\n            var len = name.length;\r\n            if (len > 4) {\r\n                var str = name.substring(0,4);\r\n                this._seats[i].username.string = str +'...';\r\n            }\r\n            else {\r\n                this._seats[i].username.string = name;\r\n            }\r\n            this._seats[i].ID.string = data[i].userId;\r\n            if(this._seats[i].imgLoader && data[i].userId){\r\n                this._seats[i].imgLoader.setUserID(data[i].userId);\r\n            }\r\n            this._seats[i].score.string = data[i].score;\r\n            this._seats[i].win.string = data[i].win;\r\n            this._seats[i].lose.string = data[i].lose;\r\n            this._seats[i].pingju.string = data[i].flat;\r\n        }\r\n        //删除SSS房间信息\r\n        cc.sys.localStorage.setItem(\"SSS_wanfa\",null);\r\n        cc.sys.localStorage.setItem(\"SSS_roomId\",null);\r\n    },\r\n\r\n    onBtnWeichatClicked:function(){\r\n        //微信分享监听\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = true;\r\n    },\r\n    onBtnShareCloseClicked:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n    },\r\n    onBtnShareHaoyou:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n        \r\n\r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            cc.vv.anysdkMgr.shareResult('0');\r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n    },\r\n    onBtnSharePengyouquan:function(){\r\n        var share = cc.find(\"Canvas/share\");\r\n        share.active = false;\r\n        \r\n        //微信浏览器----公众号登录 \r\n        if(cc.sys.browserType == \"mqqbrowser\" || \"wechat\" == cc.sys.browserType){\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\r\n            cc.vv.anysdkMgr.shareResult('1');\r\n        }\r\n        //其它浏览器----二维码扫码登录 \r\n        else{\r\n            console.log(\"H5分享好友\");\r\n            cc.find(\"Canvas/WebShare\").active = true;\r\n            cc.vv.anysdkMgr.getAccess_token('好玩的棋牌游戏');\r\n        }\r\n    },\r\n\r\n    btnClick:function(event){\r\n        if(event.target.name === \"btn_close\"){\r\n            this.reset();\r\n            //返回大厅\r\n            cc.vv.sssNet.send('exit_disconnect');\r\n        }\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}