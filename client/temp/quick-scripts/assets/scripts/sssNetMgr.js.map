{"version":3,"sources":["sssNetMgr.js"],"names":["cc","Class","extends","Component","properties","emitter","dataEventHandler","roomId","maxNumOfGames","numOfGames","numOfMJ","seatIndex","seats","turn","button","chupai","gamestate","isOver","dissoveData","maPaiData","specialType","wanfa","isBiPai","chupaidata","singleReset","i","length","holds","ready","score","reset","curaction","folds","hued","huanpais","clear","dispatchEvent","event","data","emit","getSeatIndexByID","userId","s","userid","isOwner","getSeatByID","seat","getSelfData","getLocalIndex","index","len","leGGn","console","log","ret","prepareReplay","roomInfo","detailOfGame","id","base_info","baseInfo","seatindex","game_seats","vv","userMgr","conf","type","initHandlers","self","loaded","sssNet","addHandler","errcode","roomid","maxGames","numofgames","errmsg","off","director","loadScene","result","shootInfo","singleResult","totalResult","specialResult","ping","wc","hide","name","lastTime","isExit","show","needCheckIp","online","ip","zjID","mapaiData","value","state","turnUserID","si","doTurnChange","pai","doChupai","seatData","idx","indexOf","splice","last","connectGameServer","port","onConnectOK","serverType","sd","token","time","sign","send","onConnectFailed","connect"],"mappings":"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","file":"sssNetMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        emitter:null,\r\n        dataEventHandler:null,\r\n        roomId:null,\r\n        maxNumOfGames:0,\r\n        numOfGames:0,\r\n        numOfMJ:0,\r\n        seatIndex:-1,\r\n        seats:null,\r\n        turn:-1,\r\n        button:-1,\r\n        chupai:-1,\r\n        gamestate:\"\",\r\n        isOver:false,\r\n        dissoveData:null,\r\n        maPaiData:null,\r\n        specialType:0,\r\n        wanfa:0,\r\n        isBiPai:false,\r\n        chupaidata:null,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    singleReset:function(){\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            this.seats[i].holds = [];\r\n            this.seats[i].ready = false;\r\n            this.seats[i].score = 0;\r\n        }\r\n    },\r\n\r\n    reset:function(){\r\n        this.turn = -1;\r\n        this.chupai = -1,\r\n        this.button = -1;\r\n        this.gamestate = \"\";\r\n        this.curaction = null;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            this.seats[i].holds = [];\r\n            this.seats[i].folds = [];\r\n            this.seats[i].ready = false;\r\n            this.seats[i].hued = false;\r\n            this.seats[i].huanpais = null;\r\n            this.seats[i].score = 0;\r\n        }\r\n        this.maPaiData = null;\r\n    },\r\n    \r\n    clear:function(){\r\n        this.dataEventHandler = null;\r\n        this.maPaiData =null;\r\n        if(this.isOver == null){\r\n            this.seats = null;\r\n            this.roomId = null;\r\n            this.maxNumOfGames = 0;\r\n            this.numOfGames = 0;        \r\n        }\r\n    },\r\n    \r\n    dispatchEvent(event,data){\r\n        if(this.dataEventHandler){\r\n            this.dataEventHandler.emit(event,data);\r\n        }    \r\n    },\r\n    \r\n    getSeatIndexByID:function(userId){\r\n        if(!this.seats){\r\n            return -1;\r\n        }\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            if(s.userid == userId){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    \r\n    isOwner:function(){\r\n        return this.seatIndex == 0;   \r\n    },\r\n    \r\n    getSeatByID:function(userId){\r\n        var seatIndex = this.getSeatIndexByID(userId);\r\n        if(seatIndex === -1){\r\n            return;\r\n        }\r\n        var seat = this.seats[seatIndex];\r\n        return seat;\r\n    },\r\n    \r\n    getSelfData:function(){\r\n        return this.seats[this.seatIndex];\r\n    },\r\n    \r\n    getLocalIndex:function(index){\r\n        if(!this.seats){\r\n            return;\r\n        }\r\n        var len = 0;\r\n        var leGGn = this.seatIndex;\r\n        for(let i = 0;i < this.seats.length;i++){\r\n            if(this.seats[i].userid > 0){\r\n                len++;\r\n            }\r\n        }\r\n        \r\n        switch(len){\r\n            case 0:\r\n                console.log('len === 0');\r\n                break;\r\n            case 1:\r\n                var ret = (index - this.seatIndex + 1) % 1;\r\n                break;\r\n            case 2:\r\n                var ret = (index - this.seatIndex + 2) % 2;\r\n                break;\r\n            case 3:\r\n                var ret = (index - this.seatIndex + 3) % 3;\r\n                break;\r\n            case 4:\r\n                var ret = (index - this.seatIndex + 4) % 4;\r\n                break;\r\n            case 5:\r\n                var ret = (index - this.seatIndex + 5) % 5;\r\n                break;\r\n            case 6:\r\n                var ret = (index - this.seatIndex + 6) % 6;\r\n                break;\r\n            default:\r\n                var ret = (index - this.seatIndex + 6) % 6;\r\n                break;\r\n        }\r\n        return ret;\r\n    },\r\n\r\n    prepareReplay:function(roomInfo,detailOfGame){\r\n        this.roomId = roomInfo.id;\r\n        this.seats = roomInfo.seats;\r\n        this.turn = detailOfGame.base_info.button;\r\n        var baseInfo = detailOfGame.base_info;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            s.seatindex = i;\r\n            s.score = null;\r\n            s.holds = baseInfo.game_seats[i];\r\n            s.folds = [];\r\n            console.log(s);\r\n            if(cc.vv.userMgr.userId == s.userid){\r\n                this.seatIndex = i;\r\n            }\r\n        }\r\n        this.conf = {\r\n            type:baseInfo.type,\r\n        }\r\n    },\r\n    initHandlers:function(){\r\n        var self = this;\r\n        this.loaded = false;\r\n        this.emitter = cc.vv.emitter;\r\n        cc.vv.sssNet.addHandler(\"login_result\",function(data){\r\n            console.log(data);\r\n            if(data.errcode === 0){\r\n                var data = data.data;\r\n                \r\n                self.roomId = data.roomid;\r\n                self.conf = data.conf;\r\n                self.maxNumOfGames = data.conf.maxGames;\r\n                self.numOfGames = data.numofgames;\r\n                self.seats = data.seats;\r\n                self.wanfa = data.wanfa;\r\n                self.maPaiData = null;\r\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\r\n                self.isOver = false;\r\n\r\n                self.emitter.emit('login_result');\r\n            }\r\n            else{\r\n                console.log(data.errmsg);   \r\n            }\r\n        });\r\n                \r\n        cc.vv.sssNet.addHandler(\"login_finished\",function(data){\r\n            console.log(\"login_finished\");\r\n            self.emitter.off();\r\n            cc.director.loadScene(\"sssgame\",function(){\r\n                self.loaded = true;\r\n                var index = self.seatIndex;\r\n                var holds = self.seats[index].holds;\r\n                var result = self.seats[index].result;\r\n                var shootInfo = self.seats[index].shootInfo;\r\n                var singleResult = self.seats[index].singleResult;\r\n                var totalResult = self.seats[index].totalResult;\r\n                var specialResult = self.seats[index].specialResult;\r\n                \r\n                if (holds&&holds.length > 0) {\r\n                    self.emitter.emit('game_holds');\r\n                    self.emitter.emit('show_shezhipai');\r\n                }\r\n                if(self.wanfa !== 3){\r\n                    self.maPaiData = null;\r\n                }\r\n                if(result){\r\n                    console.log('login_finished have result');\r\n                    self.emitter.emit('compare_result', result);\r\n                }\r\n                \r\n                if(singleResult){\r\n                    self.emitter.emit('game_over_Notify', singleResult);\r\n                }\r\n                if(totalResult){\r\n                    self.emitter.emit('game_result_Notify', totalResult);\r\n                }\r\n                if(self.isBiPai){\r\n                    self.emitter.emit('player_outCard_notify',self.chupaidata);\r\n                }\r\n                self.emitter.emit('refresh_seat');\r\n                cc.vv.sssNet.ping();\r\n                cc.vv.wc.hide();\r\n            });\r\n            self.emitter.emit('login_finished');\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"exit_result\",function(data){\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.seats = null;\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"exit_notify_push\",function(data){\r\n           var userId = data;\r\n           var s = self.getSeatByID(userId);\r\n           if(s != null){\r\n               s.userid = 0;\r\n               s.name = \"\";\r\n               self.dispatchEvent(\"user_state_changed\",s);\r\n           }\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"dispress_push\",function(data){\r\n            console.log('dispress_push');\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.seats = null;\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"out_card_lastTime\",function(data){\r\n           var lastTime = data;\r\n           cc.vv.emitter.emit(\"set_lastTime\",lastTime);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"out_lixianTime\",function(data){\r\n           var lastTime = data;\r\n           cc.vv.emitter.emit(\"set_lixianTime\",lastTime);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"out_dissolutionTime\",function(data){ //自动解散房间剩余时间\r\n           var lastTime = data;\r\n           cc.vv.emitter.emit(\"set_dissolutionTime\",lastTime);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"expression_push\",function(data){  //发表情\r\n           cc.vv.emitter.emit(\"expression_notify\",data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"disconnect\",function(data){\r\n            cc.vv.sssNet.isExit = true;\r\n            if(self.roomId == null){\r\n                \r\n                cc.vv.emitter.emit('remove_handler');\r\n                cc.vv.wc.show('正在返回游戏大厅');\r\n                cc.director.loadScene(\"hall\");\r\n            }\r\n            else{\r\n                if(self.isOver == false){\r\n                    cc.vv.emitter.emit('disconnect');\r\n                }\r\n                else{\r\n                    self.roomId = null;\r\n                }\r\n            }\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"new_user_comes_push\",function(data){\r\n            console.log(\"new_user_comes_push\");\r\n            var seatIndex = data.seatindex;\r\n            var needCheckIp = false;\r\n            if(self.seats[seatIndex].userid > 0){\r\n                self.seats[seatIndex].online = true;\r\n                if(self.seats[seatIndex].ip != data.ip){\r\n                    self.seats[seatIndex].ip = data.ip;\r\n                    needCheckIp = true;\r\n                }\r\n            }\r\n            else{\r\n                data.online = true;\r\n                self.seats[seatIndex] = data;\r\n                needCheckIp = true;\r\n            }\r\n            self.emitter.emit('refresh_seat', self.seats[seatIndex]);\r\n            self.emitter.emit('user_state_offline',self.seats[seatIndex]);\r\n            \r\n            if(needCheckIp){\r\n                self.dispatchEvent('check_ip',self.seats[seatIndex]);\r\n            }\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"apply_join\",function(data){\r\n            self.emitter.emit('apply_join_notify',data);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"user_state_push\",function(data){\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.online = data.online;\r\n            self.emitter.emit('user_state_offline',seat);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"is_assign_zj\",function(data){\r\n            console.log(data);\r\n            self.emitter.emit('setZhuangNotify_push');\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"user_ready_push\",function(data){\r\n            console.log(\"user_ready_push\");\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            var index = self.getSeatIndexByID(userId);\r\n            seat.ready = data.ready;\r\n            if(index === self.seatIndex){\r\n                console.log(\"index === self.seatIndex\");\r\n                self.emitter.emit('self_ready',data);\r\n            }\r\n            else{\r\n                self.emitter.emit('other_ready',data);              \r\n            }\r\n            \r\n            self.dispatchEvent('user_state_changed',seat);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"game_mapai_push\",function(data){\r\n            console.log(\"game_mapai_push\");\r\n            console.log(data);\r\n            self.maPaiData = data;\r\n            self.dispatchEvent('game_mapai',data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"game_num_push\",function(data){\r\n            console.log(\"game_num_push\");\r\n            console.log(data);\r\n            self.numOfGames = data;\r\n            self.emitter.emit('game_num_notify',data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"game_holds_push\",function(data){\r\n            console.log('game_holds_push');\r\n            console.log(data);\r\n            var seat = self.seats[self.seatIndex]; \r\n            console.log(data);\r\n            \r\n            seat.holds = data.holds;\r\n            self.specialType = data.type;\r\n\r\n            for(var i = 0; i < self.seats.length; ++i){\r\n                var s = self.seats[i]; \r\n                if(s.folds == null){\r\n                    s.folds = [];\r\n                }\r\n                s.ready = false;\r\n            }\r\n            if (self.loaded) {\r\n                self.emitter.emit('game_holds', data.holds);\r\n                self.emitter.emit('show_shezhipai');\r\n            }\r\n        });\r\n\r\n        //普通和百变玩法的比牌结果\r\n        cc.vv.sssNet.addHandler(\"compare_result_push\",function(data){\r\n            console.log('compare_result_push');\r\n            console.log(data);\r\n\r\n            self.emitter.emit('compare_result', data);\r\n            //重置单局结算数据\r\n            self.singleReset();\r\n\r\n        });\r\n\r\n        //断线超时自动出最大牌\r\n        cc.vv.sssNet.addHandler(\"out_maxPai_push\",function(data){\r\n            console.log('out_maxPai_push');\r\n            console.log(data);\r\n\r\n            self.emitter.emit('out_maxPai_Notify');\r\n        });\r\n\r\n\t   cc.vv.sssNet.addHandler(\"game_start\",function(data){\r\n            console.log('game_start');\r\n            console.log(data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"player_outCard\",function(data){\r\n            console.log('player_outCard');\r\n            console.log(data);\r\n            self.emitter.emit('player_outCard_notify',data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"quick_swing_push\",function(data){\r\n            console.log('quick_swing_push');\r\n            console.log(data);\r\n            self.emitter.emit('quick_swing_notify',data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"assignZJ_push\",function(data){\r\n            console.log('assignZJ_push');\r\n            console.log(data);\r\n            self.emitter.emit('assignZJ_push',data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"ZJUserId_push\",function(data){\r\n            console.log('ZJUserId_push');\r\n            console.log(data);\r\n            self.emitter.emit('ZJUserId',data);\r\n        });\r\n         \r\n        cc.vv.sssNet.addHandler(\"game_begin_push\",function(data){\r\n            console.log('game_begin_push');\r\n            console.log(data);\r\n            self.gamestate = \"begin\";\r\n            self.emitter.emit('game_begin');\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"game_playing_push\",function(data){\r\n            console.log('game_playing_push'); \r\n            self.gamestate = \"playing\"; \r\n            self.dispatchEvent('game_playing');\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"game_sync_push\",function(data){\r\n            console.log('game_sync_push');\r\n            var seat = self.seats[self.seatIndex]; \r\n            console.log(data);\r\n            seat.holds = data.holds;\r\n            self.wanfa = data.wanfa;\r\n            self.maxNumOfGames = data.maxGames;\r\n            self.numOfGames = data.numOfGames;\r\n            if(data.zjID){\r\n                self.zjID = data.zjID;\r\n            }\r\n            if(self.wanfa === 3 && data.mapaiData.value > 0){\r\n                self.maPaiData = data.mapaiData;\r\n            }\r\n            else{\r\n                self.maPaiData = null;\r\n            }\r\n            if(data.state === 3){//游戏为比牌界面\r\n                self.isBiPai = true;\r\n                self.chupaidata = data.chupaidata;\r\n            }\r\n            if(data.result){\r\n                console.log('game_sync_push have result');\r\n                seat.result = data.result;\r\n                self.emitter.emit('compare_result', data.result);\r\n            }\r\n            if(data.singleResult){\r\n                seat.singleResult = data.singleResult;\r\n                if(self.loaded){\r\n                    self.emitter.emit('game_over_Notify', data.singleResult);\r\n                }\r\n            }\r\n            if(data.totalResult){\r\n                seat.totalResult = data.totalResult;\r\n                if(self.loaded ){\r\n                    self.emitter.emit('game_result_Notify', data.totalResult);\r\n                }\r\n            }\r\n            \r\n            for(var i = 0; i < self.seats.length; ++i){\r\n                var s = self.seats[i]; \r\n                if(s.folds == null){\r\n                    s.folds = [];\r\n                }\r\n                s.ready = false;\r\n            }\r\n            if (self.loaded && seat.holds && seat.holds.length > 0) {\r\n                self.emitter.emit('game_holds');\r\n                self.emitter.emit('show_shezhipai');\r\n            }\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"game_action_push\",function(data){\r\n            self.curaction = data;\r\n            console.log(data);\r\n            self.dispatchEvent('game_action',data);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"game_chupai_push\",function(data){\r\n            console.log('game_chupai_push');\r\n            var turnUserID = data;\r\n            var si = self.getSeatIndexByID(turnUserID);\r\n            self.doTurnChange(si);\r\n        });\r\n\r\n        //单局结算\r\n        cc.vv.sssNet.addHandler(\"game_over_push\",function(data){\r\n            console.log('game_over_push');\r\n            self.reset();\r\n            self.emitter.emit('game_over_Notify',data);\r\n        });\r\n\r\n        //大局结算\r\n        cc.vv.sssNet.addHandler(\"game_result\",function(data){\r\n            console.log('game_result');\r\n            self.reset();\r\n            self.emitter.emit('game_result_Notify',data);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"game_chupai_notify_push\",function(data){\r\n            var userId = data.userId;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doChupai(si,pai);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"chat_push\",function(data){\r\n            self.emitter.emit(\"chat_push\",data);    \r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"quick_chat_push\",function(data){\r\n            self.emitter.emit(\"quick_chat_push\",data);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"emoji_push\",function(data){\r\n            self.emitter.emit(\"emoji_push\",data);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"dissolve_notice_push\",function(data){\r\n            console.log(\"dissolve_notice_push\"); \r\n            console.log(data);\r\n            self.dissoveData = data;\r\n            self.emitter.emit('dissolve_notice',data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"stopEndTime\",function(data){\r\n            console.log(\"stopEndTime\"); \r\n            self.emitter.emit('stopEndTime');\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"dissolve_cancel_push\",function(data){\r\n            self.dissoveData = null;\r\n            self.emitter.emit('dissolve_cancel',data);\r\n        });\r\n        \r\n        cc.vv.sssNet.addHandler(\"voice_msg_push\",function(data){\r\n            self.emitter.emit(\"voice_msg\",data);\r\n        });\r\n\r\n        cc.vv.sssNet.addHandler(\"limit_login\",function(data){\r\n            self.emitter.emit(\"limit_login\",data);\r\n        });\r\n    },\r\n    \r\n    doChupai:function(seatIndex,pai){\r\n        this.chupai = pai;\r\n        var seatData = this.seats[seatIndex];\r\n        if(seatData.holds){             \r\n            var idx = seatData.holds.indexOf(pai);\r\n            seatData.holds.splice(idx,1);\r\n        }\r\n        this.dispatchEvent('game_chupai_notify',{seatData:seatData,pai:pai});    \r\n    },\r\n    \r\n    doTurnChange:function(si){\r\n        var data = {\r\n            last:this.turn,\r\n            turn:si,\r\n        }\r\n        this.turn = si;\r\n        this.dispatchEvent('game_chupai',data);\r\n    },\r\n    \r\n    connectGameServer:function(data){\r\n        this.dissoveData = null;\r\n        cc.vv.sssNet.ip = data.ip + \":\" + data.port;\r\n        console.log(cc.vv.sssNet.ip);\r\n        var self = this;\r\n\r\n        var onConnectOK = function(){\r\n            cc.vv.userMgr.serverType = \"SSS_SERVER_TYPE\";\r\n            console.log(\"onConnectOK\");\r\n            var sd = {\r\n                token:data.token,\r\n                roomid:data.roomid,\r\n                time:data.time,\r\n                sign:data.sign,\r\n            };\r\n            self.initHandlers();\r\n            cc.vv.sssNet.send(\"login\",sd);\r\n        };\r\n        \r\n        var onConnectFailed = function(){\r\n            console.log(\"failed.\");\r\n            cc.vv.wc.hide();\r\n        };\r\n        cc.vv.wc.show(\"正在进入房间\");\r\n        cc.vv.sssNet.connect(onConnectOK,onConnectFailed);\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}