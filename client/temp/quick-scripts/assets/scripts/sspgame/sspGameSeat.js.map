{"version":3,"sources":["sspGameSeat.js"],"names":["cc","Class","extends","Component","properties","_sprIcon","_zhuang","_ready","_offline","_lblName","_lblScore","_StarScore","_scoreBg","_nddayingjia","_voicemsg","_chatBubble","_emoji","_lastChatTime","_userName","_score","star","_dayingjia","_isOffline","_isReady","_isZhuang","_userId","onLoad","vv","node","getChildByName","getComponent","Label","_xuanpai","refreshXuanPaiState","active","refresh","setUserID","onIconClicked","iconSprite","Sprite","seat","sspNetMgr","getSeatByID","sex","baseInfoMap","info","userinfoShow","show","name","userid","ip","string","numOfGames","reset","setInfo","score","dayingjia","len","length","str","substring","setZhuang","value","setStar","setScore","setReady","isReady","setID","id","idNode","lbl","setOffline","isOffline","chat","content","emoji","console","log","Animation","play","voiceMsg","isHuanSanZhang","huanpais","update","dt","stop"],"mappings":"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","file":"sspGameSeat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sspgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _sprIcon:null,\r\n        _zhuang:null,\r\n        _ready:null,\r\n        _offline:null,\r\n        _lblName:null,\r\n        _lblScore:null,\r\n        _StarScore:null,\r\n        _scoreBg:null,\r\n        _nddayingjia:null,\r\n        _voicemsg:null,\r\n        \r\n        _chatBubble:null,\r\n        _emoji:null,\r\n        _lastChatTime:-1,\r\n        \r\n        _userName:\"\",\r\n        _score:0,\r\n        star:0,\r\n        _dayingjia:false,\r\n        _isOffline:false,\r\n        _isReady:false,\r\n        _isZhuang:false,\r\n        _userId:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this._sprIcon = this.node.getChildByName(\"icon\").getComponent(\"ImageLoader\");\r\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\r\n        this._lblScore = this.node.getChildByName(\"score\").getComponent(cc.Label);\r\n        this._StarScore = this.node.getChildByName(\"xingxingscore\").getComponent(cc.Label);\r\n        this._voicemsg = this.node.getChildByName(\"voicemsg\");\r\n        this._xuanpai = this.node.getChildByName(\"xuanpai\");\r\n        this.refreshXuanPaiState();\r\n\r\n        if(this._voicemsg){\r\n            this._voicemsg.active = false;\r\n        }\r\n        \r\n        this._offline = this.node.getChildByName(\"offline\");\r\n        \r\n        this._ready = this.node.getChildByName(\"ready\");\r\n        \r\n        this._zhuang = this.node.getChildByName(\"zhuang\");\r\n        \r\n        this._scoreBg = this.node.getChildByName(\"Z_money_frame\");\r\n        this._nddayingjia = this.node.getChildByName(\"dayingjia\");\r\n        \r\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\r\n        if(this._chatBubble != null){\r\n            this._chatBubble.active = false;            \r\n        }\r\n        \r\n        this._emoji = this.node.getChildByName(\"emoji\");\r\n        if(this._emoji != null){\r\n            this._emoji.active = false;\r\n        }\r\n        \r\n        this.refresh();\r\n        \r\n        if(this._sprIcon && this._userId){\r\n            this._sprIcon.setUserID(this._userId);\r\n        }\r\n    },\r\n    \r\n    onIconClicked:function(){\r\n        var iconSprite = this._sprIcon.node.getComponent(cc.Sprite);\r\n        if(this._userId != null && this._userId > 0){\r\n           var seat = cc.vv.sspNetMgr.getSeatByID(this._userId);\r\n            var sex = 0;\r\n            if(cc.vv.baseInfoMap){\r\n                var info = cc.vv.baseInfoMap[this._userId];\r\n                if(info){\r\n                    sex = info.sex;\r\n                }                \r\n            }\r\n            cc.vv.userinfoShow.show(seat.name,seat.userid,iconSprite,sex,seat.ip);         \r\n        }\r\n    },\r\n    \r\n    refresh:function(){\r\n        if(this._lblName != null){\r\n            this._lblName.string = this._userName;    \r\n        }\r\n        \r\n        if(this._lblScore != null){\r\n            this._lblScore.string = this._score;         \r\n        }\r\n\r\n        if(this._StarScore != null){\r\n            this.star = 0;\r\n            this._StarScore.string = this.star;            \r\n        }        \r\n\r\n        if(this._nddayingjia != null){\r\n            this._nddayingjia.active = this._dayingjia == true;\r\n        }\r\n        \r\n        if(this._offline){\r\n            this._offline.active = this._isOffline && this._userName != \"\";\r\n        }\r\n        \r\n        if(this._ready){\r\n            this._ready.active = this._isReady && (cc.vv.sspNetMgr.numOfGames > 0); \r\n        }\r\n        \r\n        if(this._zhuang){\r\n            this._zhuang.active = this._isZhuang;    \r\n        }\r\n        \r\n        this.node.active = this._userName != null && this._userName != \"\"; \r\n    },\r\n\r\n    reset:function(){\r\n        if(this._lblName != null){\r\n            this._lblName.string = \"\";    \r\n        }\r\n        \r\n        if(this._lblScore != null){\r\n            this._lblScore.string = \"\";            \r\n        }        \r\n\r\n        if(this._nddayingjia != null){\r\n            this._nddayingjia.active = this._dayingjia == true;\r\n        }\r\n        \r\n        if(this._offline){\r\n            this._offline.active = false;\r\n        }\r\n        \r\n        if(this._ready){\r\n            this._ready.active = false; \r\n        }\r\n        \r\n        if(this._zhuang){\r\n            this._zhuang.active = false;    \r\n        }\r\n        \r\n        this.node.active = false; \r\n    },\r\n    \r\n    setInfo(name,score,dayingjia){\r\n        if (name) {\r\n            var len = name.length;\r\n            if (len > 4) {\r\n                var str = name.substring(0,4);\r\n                this._userName = str + '...';\r\n            }\r\n            else {\r\n                this._userName = name;\r\n            }\r\n        }\r\n        this._score = score;\r\n        if(this._score == null){\r\n            this._score = 0;\r\n        }\r\n        this._dayingjia = dayingjia;\r\n        \r\n        if(this._scoreBg != null){\r\n            this._scoreBg.active = this._score != null;            \r\n        }\r\n\r\n        if(this._lblScore != null){\r\n            this._lblScore.node.active = this._score != null;            \r\n        }\r\n\r\n        this.refresh();    \r\n    },\r\n\r\n    setZhuang:function(value){\r\n        this._isZhuang = value;\r\n        if(this._zhuang){\r\n            this._zhuang.active = value;\r\n        }\r\n    },\r\n\r\n    setStar:function(star){\r\n        this.star = star;\r\n        if(!this.star || this.star.length <= 0){\r\n           this.star = 0; \r\n        }\r\n        if(this._StarScore){\r\n            this._StarScore.string = this.star;\r\n        }\r\n    },\r\n\r\n    setScore:function(score){\r\n        this._score = score;\r\n        if(this._lblScore){\r\n            this._lblScore.string = score;\r\n        }\r\n    },\r\n    \r\n    setReady:function(isReady){\r\n        this._isReady = isReady;\r\n        if(this._ready){\r\n            this._ready.active = this._isReady && (cc.vv.sspNetMgr.numOfGames > 0); \r\n        }\r\n    },\r\n    \r\n    setID:function(id){\r\n        var idNode = this.node.getChildByName(\"id\");\r\n        if(idNode){\r\n            var lbl = idNode.getComponent(cc.Label);\r\n            lbl.string = \"ID:\" + id;            \r\n        }\r\n        \r\n        this._userId = id;\r\n        if(this._sprIcon){\r\n            this._sprIcon.setUserID(id); \r\n        }\r\n    },\r\n    \r\n    setOffline:function(isOffline){\r\n        this._isOffline = isOffline;\r\n        if(this._offline){\r\n            this._offline.active = this._isOffline && this._userName != \"\";\r\n        }\r\n    },\r\n    \r\n    chat:function(content){\r\n        if(this._chatBubble == null || this._emoji == null){\r\n            return;\r\n        }\r\n        this._emoji.active = false;\r\n        this._chatBubble.active = true;\r\n        this._chatBubble.getComponent(cc.Label).string = content;\r\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\r\n        this._lastChatTime = 3;\r\n    },\r\n    \r\n    emoji:function(emoji){\r\n        if(this._emoji == null || this._emoji == null){\r\n            return;\r\n        }\r\n        console.log(emoji);\r\n        this._chatBubble.active = false;\r\n        this._emoji.active = true;\r\n        this._emoji.getComponent(cc.Animation).play(emoji);\r\n        this._lastChatTime = 3;\r\n    },\r\n    \r\n    voiceMsg:function(show){\r\n        if(this._voicemsg){\r\n            this._voicemsg.active = show;\r\n        }\r\n    },\r\n    \r\n    refreshXuanPaiState:function(){\r\n        if(this._xuanpai == null){\r\n            return;\r\n        }\r\n        \r\n        this._xuanpai.active = cc.vv.sspNetMgr.isHuanSanZhang;\r\n        if(cc.vv.sspNetMgr.isHuanSanZhang == false){ \r\n            return;\r\n        }\r\n       \r\n        this._xuanpai.getChildByName(\"xz\").active = false;\r\n        this._xuanpai.getChildByName(\"xd\").active = false;\r\n        \r\n        var seat = cc.vv.sspNetMgr.getSeatByID(this._userId);\r\n        if(seat){\r\n            if(seat.huanpais == null){\r\n                this._xuanpai.getChildByName(\"xz\").active = true;\r\n            }\r\n            else{\r\n                this._xuanpai.getChildByName(\"xd\").active = true;\r\n            }\r\n        }\r\n    },\r\n   \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._lastChatTime > 0){\r\n            this._lastChatTime -= dt;\r\n            if(this._lastChatTime < 0){\r\n                this._chatBubble.active = false;\r\n                this._emoji.active = false;\r\n                this._emoji.getComponent(cc.Animation).stop();\r\n            }\r\n        }\r\n    },\r\n});"]}