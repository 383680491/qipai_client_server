{"version":3,"sources":["SSPGameOver.js"],"names":["cc","Class","extends","Component","properties","_gameover","_gameresult","_seats","_isGameEnd","_pingju","_win","_lose","onLoad","vv","sspNetMgr","conf","node","getChildByName","active","SSPTeXiaoAtlas","window","sspGame","listRoot","i","s","sn","viewdata","username","getComponent","Label","imgLoader","reason","score","hu","mahjongs","zhuang","hupai","_pengandgang","push","self","on","data","detail","mySch","onGameOver","scheduleOnce","clickEventHandler","EventHandler","target","component","handler","customEventData","button","Button","clickEvents","console","log","length","seatIndex","myscore","singleScore","seats","userid","seatView","userData","hued","actionArr","is7pairs","ischadajiao","hupaiRoot","j","children","hi","type","playerName","name","len","str","substring","string","setUserID","join","k","childrenCount","n","setPosition","jin","find","holds","SSPMgr","sortSSPF","ziTi","num","clearance","liangPai","pai","l","x","y","sprite","Sprite","spriteFrame","getSpriteFrameByPai","getSpriteFrame","arrSuopaiIndex","m","longPai","suopai","value","liangpaiNum","p","huType","yinLongFan","jinLongFan","fan","multiple","hupaiView","huPai","onBtnReadyClicked","event","sspNet","send","onBtnShareClicked"],"mappings":"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","file":"SSPGameOver.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\sspgame","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _gameover:null,\r\n        _gameresult:null,\r\n        _seats:[],\r\n        _isGameEnd:false,\r\n        _pingju:null,\r\n        _win:null,\r\n        _lose:null,\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        if(cc.vv.sspNetMgr.conf == null){\r\n            return;\r\n        }\r\n        this._gameover = this.node.getChildByName(\"game_over_xlch\");\r\n        \r\n        this._gameover.active = false;\r\n        \r\n        this._pingju = this._gameover.getChildByName(\"pingju\");\r\n        this._win = this._gameover.getChildByName(\"win\");\r\n        this._lose = this._gameover.getChildByName(\"lose\");\r\n        \r\n        this._gameresult = this.node.getChildByName(\"game_result\");\r\n        this.SSPTeXiaoAtlas = window.sspGame.SSPTeXiaoAtlas;\r\n        \r\n        \r\n        var listRoot = this._gameover.getChildByName(\"result_list\");\r\n        for(var i = 1; i <= 4; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = listRoot.getChildByName(s);\r\n            sn.active = false;\r\n            var viewdata = {};\r\n            viewdata.username = sn.getChildByName('username').getComponent(cc.Label);\r\n            viewdata.imgLoader = sn.getChildByName('Z_nobody').getComponent(\"ImageLoader\");\r\n            viewdata.reason = sn.getChildByName('reason').getComponent(cc.Label);\r\n            \r\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\r\n            viewdata.hu = sn.getChildByName('hu');\r\n            viewdata.mahjongs = sn.getChildByName('pai');\r\n            viewdata.zhuang = sn.getChildByName('zhuang');\r\n            viewdata.hupai = sn.getChildByName('hupai');\r\n            viewdata.hupai.active = true;\r\n            viewdata._pengandgang = [];\r\n            this._seats.push(viewdata);\r\n        }\r\n        \r\n        //初始化网络事件监听器\r\n        var self = this;\r\n        this.node.on('game_over',function(data){\r\n            var detail = data.detail;\r\n            var mySch =function(){ \r\n                self.onGameOver(detail);\r\n             }\r\n            self.scheduleOnce(mySch,2);\r\n        });\r\n        \r\n        this.node.on('game_end',function(data){self._isGameEnd = true;});\r\n\r\n        //初始化按钮监听事件\r\n        var clickEventHandler = new cc.Component.EventHandler();\r\n        clickEventHandler.target = this;\r\n        clickEventHandler.component = \"SSPGameOver\";\r\n        clickEventHandler.handler = \"onBtnReadyClicked\";\r\n        clickEventHandler.customEventData = \"foobar\";\r\n\r\n        var button = this._gameover.getChildByName(\"btnReady\").getComponent(cc.Button);\r\n        button.clickEvents.push(clickEventHandler);\r\n    },\r\n    \r\n    onGameOver:function(data){\r\n        console.log(data);\r\n        var listRoot = this._gameover.getChildByName(\"result_list\");\r\n        for(var i = 1;i < data.length+1;i++){\r\n            var s = \"s\" + i;\r\n            var sn = listRoot.getChildByName(s);\r\n            sn.active = true;\r\n        }\r\n        if(data.length == 0){\r\n            this._gameresult.active = true;\r\n            return;\r\n        }\r\n        this._gameover.active = true;\r\n        this._pingju.active = false;\r\n        this._win.active = false;\r\n        this._lose.active = false;\r\n\r\n        if (data[cc.vv.sspNetMgr.seatIndex]) {\r\n            var myscore = data[cc.vv.sspNetMgr.seatIndex].singleScore;\r\n        }\r\n        else {\r\n            var myscore = 0;\r\n        }\r\n        if(myscore && myscore > 0){\r\n            this._win.active = true;\r\n        }         \r\n        else if(myscore < 0){\r\n            this._lose.active = true;\r\n        }\r\n        else{\r\n            this._pingju.active = true;\r\n        }\r\n            \r\n        //显示玩家信息\r\n        var seats = cc.vv.sspNetMgr.seats;\r\n        for(var i = 0; i < seats.length; ++i){\r\n            if (seats[i].userid === 0) {\r\n                continue;\r\n            }\r\n            var seatView = this._seats[i];\r\n            var userData = data[i];\r\n            var hued = false;\r\n            var actionArr = [];\r\n            var is7pairs = false;\r\n            var ischadajiao = false;\r\n            var hupaiRoot = seatView.hupai;\r\n            \r\n            for(var j = 0; j < hupaiRoot.children.length; ++j){\r\n                hupaiRoot.children[j].active = false;\r\n            }\r\n            \r\n            var hi = 0;\r\n            if (!userData) {\r\n                continue;\r\n            }\r\n            if(userData.type && userData.type != 'draw'){\r\n                seatView.hu.active = true;\r\n            }\r\n            else{\r\n                seatView.hu.active = false;\r\n            }\r\n            var playerName = cc.vv.sspNetMgr.seats[i].name;\r\n            var len = playerName.length;\r\n            if (len > 4) {\r\n                var str = playerName.substring(0,4);\r\n                seatView.username.string = str + '...';\r\n            }\r\n            else {\r\n                seatView.username.string = playerName;\r\n            }\r\n            if(seatView.imgLoader && cc.vv.sspNetMgr.seats[i].userid){\r\n                seatView.imgLoader.setUserID(cc.vv.sspNetMgr.seats[i].userid);\r\n            }\r\n            seatView.zhuang.active = cc.vv.sspNetMgr.button == i;\r\n            seatView.reason.string = actionArr.join(\"、\");\r\n            \r\n            if(userData.singleScore > 0){\r\n                seatView.score.string = \"+\" + userData.singleScore;    \r\n            }\r\n            else{\r\n                seatView.score.string = userData.singleScore;\r\n            }\r\n           \r\n            //隐藏所有牌\r\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\r\n                var n = seatView.mahjongs.children[k];\r\n                n.setPosition(k*62,0);\r\n                n.active = false;\r\n                var jin = n.getChildByName(\"yinlong\");\r\n                if(jin){\r\n                    n.getChildByName(\"yinlong\").active = false;\r\n                    n.getChildByName(\"jinlong\").active = false;\r\n                    n.getChildByName(\"suokuang\").active = false;\r\n                }\r\n            }\r\n            seatView.hupai.active = false;\r\n            cc.find(\"Canvas/game_over_xlch/result_list/s1/hupai\").active = true;\r\n            cc.find(\"Canvas/game_over_xlch/result_list/s2/hupai\").active = true;\r\n            cc.find(\"Canvas/game_over_xlch/result_list/s3/hupai\").active = true;\r\n            cc.find(\"Canvas/game_over_xlch/result_list/s4/hupai\").active = true;\r\n            \r\n            if(userData.holds){\r\n                cc.vv.SSPMgr.sortSSPF(userData.holds.holds);\r\n            }\r\n\r\n            if(!userData.type || userData.type === 'draw'){ //没胡的人\r\n                var ziTi = \"\";\r\n                var num = 0;\r\n                var clearance = 0;//每个吃碰杠之间的间隙之和\r\n                //显示相关的牌\r\n                for(var k = 0; k < userData.liangPai.length; ++k){\r\n                    cc.vv.SSPMgr.sortSSPF(userData.liangPai[k].pai);\r\n                    clearance += 20;\r\n                    for(var l = 0;l < userData.liangPai[k].pai.length;l++){\r\n                        var pai = userData.liangPai[k].pai[l];\r\n                        var n = seatView.mahjongs.children[num];\r\n                        if(n){\r\n                            n.setPosition(n.x+clearance,n.y);\r\n                            n.active = true;\r\n                            var sprite = n.getComponent(cc.Sprite);\r\n                            sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",pai);\r\n                            num++;\r\n                        }\r\n                    }\r\n\r\n                    if(userData.liangPai[k].type == \"kaiYinLong\"){\r\n                        if(num === 3){\r\n                            continue;\r\n                        }\r\n                        seatView.mahjongs.children[num-1].getChildByName(\"yinlong\").active = true;\r\n                        if(ziTi == \"金龙\"){\r\n                            ziTi = \"金龙\";\r\n                        }\r\n                        else{\r\n                            ziTi = \"银龙\";\r\n                        }\r\n                    }\r\n                    else if(userData.liangPai[k].type == \"jinLong\"){\r\n                        seatView.mahjongs.children[num-1].getChildByName(\"jinlong\").active = true;\r\n                        ziTi = \"金龙\";\r\n                    }\r\n                }\r\n                seatView.reason.string = ziTi;\r\n                if(ziTi == \"银龙\"){\r\n                    seatView.hu.active = true;\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"yinlong1\");\r\n                }\r\n                if(ziTi == \"金龙\"){\r\n                    seatView.hu.active = true;\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"jinlong1\");\r\n                }\r\n                clearance += 20;\r\n                for(var k = 0; k < userData.holds.holds.length; ++k){\r\n                    var pai = userData.holds.holds[k];\r\n                    var n = seatView.mahjongs.children[num];\r\n                    if(n){\r\n                        n.setPosition(n.x+clearance,n.y)\r\n                        n.active = true;\r\n                        var sprite = n.getComponent(cc.Sprite);\r\n                        sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",pai);\r\n                        num++;\r\n                    }\r\n                }\r\n\r\n                var arrSuopaiIndex = [];\r\n                 \r\n                \r\n                for(var m = 0;m < userData.holds.longPai.length;m++){//获取所有锁牌的index\r\n                    var suopai = userData.holds.longPai[m];\r\n                    for(var k = 0; k < userData.holds.holds.length; ++k){\r\n                        var pai = userData.holds.holds[k];\r\n                        if(pai.type === suopai[0].type && pai.value === suopai[0].value){\r\n                            arrSuopaiIndex.push(k);\r\n                            break;\r\n                        }\r\n                    } \r\n                }\r\n\r\n                if(arrSuopaiIndex){//如果有锁牌\r\n                    for(var m = 0;m < arrSuopaiIndex.length;m++){\r\n                        var liangpaiNum = 0;\r\n                        for(var p = 0;p < userData.liangPai.length;p++){\r\n                            liangpaiNum += userData.liangPai[p].pai.length;\r\n                        }\r\n                        var num = arrSuopaiIndex[m] + liangpaiNum + 3;\r\n                        if(seatView.mahjongs.children[num]){\r\n                            seatView.mahjongs.children[num].getChildByName(\"suokuang\").active = true;\r\n                        }\r\n                    }\r\n                }\r\n                \r\n            }\r\n            else{  //胡的人\r\n                var huType = \"   \";\r\n                if(userData.type === 'daHu'){\r\n                    huType = \"   (大胡)\";\r\n                }\r\n                else if(userData.type === 'diHu'){\r\n                    huType = \"   (地胡)\";\r\n                }\r\n                else if(userData.type === 'tianHu'){\r\n                    huType = \"   (天胡)\";\r\n                }\r\n                else if(userData.type === 'yifanHu'){\r\n                    huType = \"   (一番胡)\";\r\n                }\r\n                var ziTi = null;\r\n                if(userData.score.yinLongFan > 0 && userData.score.jinLongFan > 0){\r\n                    ziTi = \"[番X\" + userData.score.fan + \"   金龙X\" + userData.score.jinLongFan + \"   银龙X\" + userData.score.yinLongFan\r\n                     + \"   底X3]X\"+userData.multiple+huType;\r\n                }\r\n                else if(userData.score.yinLongFan > 0 && userData.score.jinLongFan <= 0){\r\n                    ziTi = \"[番X\" + userData.score.fan + \"   银龙X\" + userData.score.yinLongFan\r\n                     + \"   底X3]X\"+userData.multiple+huType;\r\n                }\r\n                else if(userData.score.jinLongFan > 0 && userData.score.yinLongFan <= 0){\r\n                    ziTi = \"[番X\" + userData.score.fan + \"   金龙X\" + userData.score.jinLongFan\r\n                     + \"   底X3]X\"+userData.multiple+huType;\r\n                }\r\n                else{\r\n                    ziTi = \"番X\" + userData.score.fan + \"   底X3\"+huType;\r\n                }\r\n\r\n                var clearance = 0;//每个吃碰杠之间的间隙之和\r\n                seatView.reason.string = ziTi;\r\n                if(userData.type === 'pingHu'){\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"pinghu\");\r\n                }\r\n                else if(userData.type === 'daHu'){\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"dahu1\");\r\n                }\r\n                else if(userData.type === 'diHu'){\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"dihu\");\r\n                }\r\n                else if(userData.type === 'tianHu'){\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"tianhu\");\r\n                }\r\n                else if(userData.type === 'yifanHu'){\r\n                    seatView.hu.getComponent(cc.Sprite).spriteFrame = this.SSPTeXiaoAtlas.getSpriteFrame(\"yufanhu1\");\r\n                }\r\n                var num = 0;\r\n                //显示相关的牌\r\n                for(var k = 0; k < userData.liangPai.length; ++k){\r\n                    cc.vv.SSPMgr.sortSSPF(userData.liangPai[k].pai);\r\n                    clearance += 20;\r\n                    for(var l = 0;l < userData.liangPai[k].pai.length;l++){\r\n                        var pai = userData.liangPai[k].pai[l];\r\n                        var n = seatView.mahjongs.children[num];\r\n                        if(n){\r\n                            n.setPosition(n.x+clearance,n.y);\r\n                            n.active = true;\r\n                            var sprite = n.getComponent(cc.Sprite);\r\n                            sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",pai);\r\n                            num++;\r\n                        } \r\n                    }\r\n                    if(userData.liangPai[k].type == \"kaiYinLong\"){\r\n                        if(num === 3){\r\n                            continue;\r\n                        }\r\n                        seatView.mahjongs.children[num-1].getChildByName(\"yinlong\").active = true;\r\n                    }\r\n                    else if(userData.liangPai[k].type == \"jinLong\"){\r\n                        seatView.mahjongs.children[num-1].getChildByName(\"jinlong\").active = true;\r\n                    }\r\n                }\r\n\r\n                clearance += 20;\r\n                for(var k = 0; k < userData.holds.holds.length; ++k){\r\n                    var pai = userData.holds.holds[k];\r\n                    var n = seatView.mahjongs.children[num];\r\n                    if(n){\r\n                        n.setPosition(n.x+clearance,n.y)\r\n                        n.active = true;\r\n                        var sprite = n.getComponent(cc.Sprite);\r\n                        sprite.spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",pai);\r\n                        num++;\r\n                    }\r\n                }\r\n\r\n                var arrSuopaiIndex = [];\r\n                for(var m = 0;m < userData.holds.longPai.length;m++){//获取所有锁牌的index\r\n                    var suopai = userData.holds.longPai[m];\r\n                    for(var k = 0; k < userData.holds.holds.length; ++k){\r\n                        var pai = userData.holds.holds[k];\r\n                        if(pai.type === suopai[0].type && pai.value === suopai[0].value){\r\n                            arrSuopaiIndex.push(k);\r\n                            break;\r\n                        }\r\n                    } \r\n                }\r\n\r\n                if(arrSuopaiIndex){//如果有锁牌\r\n                    for(var m = 0;m < arrSuopaiIndex.length;m++){\r\n                        var liangpaiNum = 0;\r\n                        for(var p = 0;p < userData.liangPai.length;p++){\r\n                            liangpaiNum += userData.liangPai[p].pai.length;\r\n                        }\r\n                        var num = arrSuopaiIndex[m] + liangpaiNum + 3;\r\n                        if(seatView.mahjongs.children[num]){\r\n                            seatView.mahjongs.children[num].getChildByName(\"suokuang\").active = true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if(userData.type !== 'tianHu'){\r\n                    var hupaiView = hupaiRoot.children[0]; \r\n                    hupaiView.active = true;\r\n                    hupaiView.getComponent(cc.Sprite).spriteFrame = cc.vv.SSPMgr.getSpriteFrameByPai(\"M_\",userData.huPai);\r\n                }\r\n            }      \r\n            \r\n            for(var k = 0; k < seatView._pengandgang.length; ++k){\r\n                seatView._pengandgang[k].active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    onBtnReadyClicked:function(event){\r\n        console.log(\"onBtnReadyClicked\");\r\n        this._gameover.active = false;\r\n        if(this._isGameEnd){\r\n            this._gameresult.active = true;\r\n        }\r\n        else{\r\n            cc.vv.sspNet.send('next_game_data'); \r\n        }\r\n        this._gameover.active = false; \r\n    },\r\n    \r\n    onBtnShareClicked:function(){\r\n        console.log(\"onBtnShareClicked\");\r\n    }\r\n\r\n});\r\n"]}