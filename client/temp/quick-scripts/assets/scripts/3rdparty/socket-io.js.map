{"version":3,"sources":["socket-io.js"],"names":["CC_JSB","cc","sys","isNative","f","exports","module","define","amd","g","window","global","self","io","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","parser","transports","Emitter","debug","index","parseuri","parsejson","parseqs","Socket","noop","uri","opts","hostname","host","secure","protocol","port","query","location","agent","decode","upgrade","path","replace","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","readyState","writeBuffer","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","undefined","freeGlobal","extraHeaders","Object","keys","open","priorWebsocketSuccess","prototype","Transport","createTransport","name","clone","EIO","transport","id","sid","socket","obj","hasOwnProperty","indexOf","setTimeout","emit","shift","setTransport","removeAllListeners","on","onDrain","packet","onPacket","onError","onClose","probe","failed","onTransportOpen","upgradeLosesBinary","supportsBinary","send","type","data","once","msg","upgrading","pause","cleanup","flush","err","freezeTransport","close","onerror","error","onTransportClose","onclose","onupgrade","to","removeListener","onOpen","upgrades","onHandshake","setPing","filterUpgrades","pingInterval","pingTimeout","onHeartbeat","timeout","clearTimeout","pingTimeoutTimer","pingIntervalTimer","ping","sendPacket","splice","prevBufferLen","writable","write","options","fn","compress","push","waitForUpgrade","cleanupAndClose","reason","desc","filteredUpgrades","j","description","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xhr","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","JSONPPolling","rNewline","rEscapedNewline","callbacks","empty","___eio","document","addEventListener","script","parentNode","removeChild","form","iframe","doPoll","createElement","async","src","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","isUAgecko","navigator","test","userAgent","doWrite","area","iframeId","className","style","position","top","left","target","method","setAttribute","action","complete","initIframe","html","value","submit","attachEvent","onreadystatechange","onload","Request","request","isBinary","req","sendXhr","pollXhr","create","setDisableHeaderCheck","setRequestHeader","responseType","withCredentials","hasXDR","onLoad","responseText","status","requestsCount","requests","onSuccess","fromError","abort","contentType","getResponseHeader","split","response","String","fromCharCode","apply","Uint8Array","ui8Arr","dataArray","idx","XDomainRequest","unloadHandler","yeast","hasXHR2","poll","onPause","pending","total","callback","decodePayload","callbackfn","encodePayload","schema","b64","encode","ipv6","BrowserWebSocket","WebSocket","MozWebSocket","WS","check","protocols","headers","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","len","Buffer","byteLength","done","hasCORS","ActiveXObject","after","count","err_cb","bail","proxy","result","arraybuffer","start","end","bytes","slice","ArrayBuffer","abv","ii","buffer","chars","base64","substring","bufferLength","p","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","size","blobSupportsArrayBufferView","b","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","buf","copy","set","byteOffset","BlobBuilderConstructor","bb","BlobConstructor","mixin","event","_callbacks","off","arguments","removeEventListener","cb","args","listeners","hasListeners","constructor","log","formatArgs","save","load","useColors","storage","chrome","local","localstorage","colors","documentElement","console","firebug","exception","table","toLowerCase","match","parseInt","RegExp","$1","formatters","v","JSON","stringify","namespace","humanize","diff","c","color","concat","Array","lastC","Function","namespaces","removeItem","enable","localStorage","coerce","disable","enabled","names","skips","prevColor","prevTime","selectColor","disabled","curr","Date","ms","prev","format","formatter","val","logFn","bind","substr","stack","message","hasBinary","sliceBuffer","base64encoder","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","utf8encode","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","blob","readAsDataURL","b64data","typed","basic","btoa","utf8decode","charAt","decodeBase64Packet","Number","asArray","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","map","results","join","each","next","eachWithIndex","el","decodePayloadAsBinary","chr","ret","encodedPackets","totalLength","reduce","acc","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","numberTooLong","tailArray","msgLength","arr","has","isArray","_hasBinary","isBuffer","File","toJSON","m","h","d","y","parse","long","short","str","exec","parseFloat","Math","round","plural","floor","ceil","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","re","parts","source","authority","ipv6uri","root","freeExports","freeModule","stringFromCharCode","ucs2decode","string","output","counter","extra","ucs2encode","array","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","nodeType","object","alphabet","seed","num","decoded","now","url","Manager","lookup","cache","managers","parsed","sameNamespace","nsps","newConnection","forceNew","multiplex","connect","eio","Backoff","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","min","max","jitter","connecting","lastPing","encoding","packetBuffer","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","skipReconnect","openSub","errorSub","timer","destroy","onping","onpong","ondata","add","ondecoded","onConnecting","processPacketQueue","pack","sub","disconnect","reset","delay","duration","onreconnect","attempt","toArray","hasBin","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","subEvents","unshift","parserType","EVENT","BINARY_EVENT","flags","pop","CONNECT","onpacket","onconnect","onevent","ACK","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","loc","href","factor","pow","rand","random","deviation","isBuf","deconstructPacket","packetData","_deconstructPacket","placeholder","_placeholder","newData","attachments","reconstructPacket","curPlaceHolder","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","types","encodeAsBinary","encodeAsString","writeEncoding","deconstruction","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","finishedReconstruction","binData","isLoader","objectTypes","runInContext","context","SyntaxError","TypeError","nativeJSON","objectProto","getClass","isProperty","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","isSupported","serialized","stringifySupported","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","__proto__","original","parent","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","width","unicodePrefix","quote","useCharIndex","symbols","charCode","serialize","properties","whitespace","indentation","date","time","hours","minutes","seconds","milliseconds","element","prefix","filter","Unescapes","Index","Source","lex","begin","isSigned","get","hasMembers","update","walk","previousJSON","isRestored","JSON3","list"],"mappings":"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","file":"socket-io.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\3rdparty","sourcesContent":["if (!CC_JSB && !cc.sys.isNative) {\r\n\t(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.io = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\r\n\r\n\tmodule.exports =  _dereq_('./lib/');\r\n\r\n\t},{\"./lib/\":2}],2:[function(_dereq_,module,exports){\r\n\r\n\tmodule.exports = _dereq_('./socket');\r\n\r\n\t/**\r\n\t * Exports parser\r\n\t *\r\n\t * @api public\r\n\t *\r\n\t */\r\n\tmodule.exports.parser = _dereq_('engine.io-parser');\r\n\r\n\t},{\"./socket\":3,\"engine.io-parser\":19}],3:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar transports = _dereq_('./transports');\r\n\tvar Emitter = _dereq_('component-emitter');\r\n\tvar debug = _dereq_('debug')('engine.io-client:socket');\r\n\tvar index = _dereq_('indexof');\r\n\tvar parser = _dereq_('engine.io-parser');\r\n\tvar parseuri = _dereq_('parseuri');\r\n\tvar parsejson = _dereq_('parsejson');\r\n\tvar parseqs = _dereq_('parseqs');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = Socket;\r\n\r\n\t/**\r\n\t * Noop function.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction noop(){}\r\n\r\n\t/**\r\n\t * Socket constructor.\r\n\t *\r\n\t * @param {String|Object} uri or options\r\n\t * @param {Object} options\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Socket(uri, opts){\r\n\t  if (!(this instanceof Socket)) return new Socket(uri, opts);\r\n\r\n\t  opts = opts || {};\r\n\r\n\t  if (uri && 'object' == typeof uri) {\r\n\t\topts = uri;\r\n\t\turi = null;\r\n\t  }\r\n\r\n\t  if (uri) {\r\n\t\turi = parseuri(uri);\r\n\t\topts.hostname = uri.host;\r\n\t\topts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\r\n\t\topts.port = uri.port;\r\n\t\tif (uri.query) opts.query = uri.query;\r\n\t  } else if (opts.host) {\r\n\t\topts.hostname = parseuri(opts.host).host;\r\n\t  }\r\n\r\n\t  this.secure = null != opts.secure ? opts.secure :\r\n\t\t(global.location && 'https:' == location.protocol);\r\n\r\n\t  if (opts.hostname && !opts.port) {\r\n\t\t// if no port is specified manually, use the protocol default\r\n\t\topts.port = this.secure ? '443' : '80';\r\n\t  }\r\n\r\n\t  this.agent = opts.agent || false;\r\n\t  this.hostname = opts.hostname ||\r\n\t\t(global.location ? location.hostname : 'localhost');\r\n\t  this.port = opts.port || (global.location && location.port ?\r\n\t\t   location.port :\r\n\t\t   (this.secure ? 443 : 80));\r\n\t  this.query = opts.query || {};\r\n\t  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\r\n\t  this.upgrade = false !== opts.upgrade;\r\n\t  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\r\n\t  this.forceJSONP = !!opts.forceJSONP;\r\n\t  this.jsonp = false !== opts.jsonp;\r\n\t  this.forceBase64 = !!opts.forceBase64;\r\n\t  this.enablesXDR = !!opts.enablesXDR;\r\n\t  this.timestampParam = opts.timestampParam || 't';\r\n\t  this.timestampRequests = opts.timestampRequests;\r\n\t  this.transports = opts.transports || ['polling', 'websocket'];\r\n\t  this.readyState = '';\r\n\t  this.writeBuffer = [];\r\n\t  this.policyPort = opts.policyPort || 843;\r\n\t  this.rememberUpgrade = opts.rememberUpgrade || false;\r\n\t  this.binaryType = null;\r\n\t  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\r\n\t  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\r\n\r\n\t  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\r\n\t  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\r\n\t\tthis.perMessageDeflate.threshold = 1024;\r\n\t  }\r\n\r\n\t  // SSL options for Node.js client\r\n\t  this.pfx = opts.pfx || null;\r\n\t  this.key = opts.key || null;\r\n\t  this.passphrase = opts.passphrase || null;\r\n\t  this.cert = opts.cert || null;\r\n\t  this.ca = opts.ca || null;\r\n\t  this.ciphers = opts.ciphers || null;\r\n\t  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\r\n\r\n\t  // other options for Node.js client\r\n\t  var freeGlobal = typeof global == 'object' && global;\r\n\t  if (freeGlobal.global === freeGlobal) {\r\n\t\tif (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\r\n\t\t  this.extraHeaders = opts.extraHeaders;\r\n\t\t}\r\n\t  }\r\n\r\n\t  this.open();\r\n\t}\r\n\r\n\tSocket.priorWebsocketSuccess = false;\r\n\r\n\t/**\r\n\t * Mix in `Emitter`.\r\n\t */\r\n\r\n\tEmitter(Socket.prototype);\r\n\r\n\t/**\r\n\t * Protocol version.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.protocol = parser.protocol; // this is an int\r\n\r\n\t/**\r\n\t * Expose deps for legacy compatibility\r\n\t * and standalone browser access.\r\n\t */\r\n\r\n\tSocket.Socket = Socket;\r\n\tSocket.Transport = _dereq_('./transport');\r\n\tSocket.transports = _dereq_('./transports');\r\n\tSocket.parser = _dereq_('engine.io-parser');\r\n\r\n\t/**\r\n\t * Creates transport of the given type.\r\n\t *\r\n\t * @param {String} transport name\r\n\t * @return {Transport}\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.createTransport = function (name) {\r\n\t  debug('creating transport \"%s\"', name);\r\n\t  var query = clone(this.query);\r\n\r\n\t  // append engine.io protocol identifier\r\n\t  query.EIO = parser.protocol;\r\n\r\n\t  // transport name\r\n\t  query.transport = name;\r\n\r\n\t  // session id if we already have one\r\n\t  if (this.id) query.sid = this.id;\r\n\r\n\t  var transport = new transports[name]({\r\n\t\tagent: this.agent,\r\n\t\thostname: this.hostname,\r\n\t\tport: this.port,\r\n\t\tsecure: this.secure,\r\n\t\tpath: this.path,\r\n\t\tquery: query,\r\n\t\tforceJSONP: this.forceJSONP,\r\n\t\tjsonp: this.jsonp,\r\n\t\tforceBase64: this.forceBase64,\r\n\t\tenablesXDR: this.enablesXDR,\r\n\t\ttimestampRequests: this.timestampRequests,\r\n\t\ttimestampParam: this.timestampParam,\r\n\t\tpolicyPort: this.policyPort,\r\n\t\tsocket: this,\r\n\t\tpfx: this.pfx,\r\n\t\tkey: this.key,\r\n\t\tpassphrase: this.passphrase,\r\n\t\tcert: this.cert,\r\n\t\tca: this.ca,\r\n\t\tciphers: this.ciphers,\r\n\t\trejectUnauthorized: this.rejectUnauthorized,\r\n\t\tperMessageDeflate: this.perMessageDeflate,\r\n\t\textraHeaders: this.extraHeaders\r\n\t  });\r\n\r\n\t  return transport;\r\n\t};\r\n\r\n\tfunction clone (obj) {\r\n\t  var o = {};\r\n\t  for (var i in obj) {\r\n\t\tif (obj.hasOwnProperty(i)) {\r\n\t\t  o[i] = obj[i];\r\n\t\t}\r\n\t  }\r\n\t  return o;\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes transport to use and starts probe.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\tSocket.prototype.open = function () {\r\n\t  var transport;\r\n\t  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\r\n\t\ttransport = 'websocket';\r\n\t  } else if (0 === this.transports.length) {\r\n\t\t// Emit error on next tick so it can be listened to\r\n\t\tvar self = this;\r\n\t\tsetTimeout(function() {\r\n\t\t  self.emit('error', 'No transports available');\r\n\t\t}, 0);\r\n\t\treturn;\r\n\t  } else {\r\n\t\ttransport = this.transports[0];\r\n\t  }\r\n\t  this.readyState = 'opening';\r\n\r\n\t  // Retry with the next transport if the transport is disabled (jsonp: false)\r\n\t  try {\r\n\t\ttransport = this.createTransport(transport);\r\n\t  } catch (e) {\r\n\t\tthis.transports.shift();\r\n\t\tthis.open();\r\n\t\treturn;\r\n\t  }\r\n\r\n\t  transport.open();\r\n\t  this.setTransport(transport);\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the current transport. Disables the existing one (if any).\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.setTransport = function(transport){\r\n\t  debug('setting transport %s', transport.name);\r\n\t  var self = this;\r\n\r\n\t  if (this.transport) {\r\n\t\tdebug('clearing existing transport %s', this.transport.name);\r\n\t\tthis.transport.removeAllListeners();\r\n\t  }\r\n\r\n\t  // set up transport\r\n\t  this.transport = transport;\r\n\r\n\t  // set up transport listeners\r\n\t  transport\r\n\t  .on('drain', function(){\r\n\t\tself.onDrain();\r\n\t  })\r\n\t  .on('packet', function(packet){\r\n\t\tself.onPacket(packet);\r\n\t  })\r\n\t  .on('error', function(e){\r\n\t\tself.onError(e);\r\n\t  })\r\n\t  .on('close', function(){\r\n\t\tself.onClose('transport close');\r\n\t  });\r\n\t};\r\n\r\n\t/**\r\n\t * Probes a transport.\r\n\t *\r\n\t * @param {String} transport name\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.probe = function (name) {\r\n\t  debug('probing transport \"%s\"', name);\r\n\t  var transport = this.createTransport(name, { probe: 1 })\r\n\t\t, failed = false\r\n\t\t, self = this;\r\n\r\n\t  Socket.priorWebsocketSuccess = false;\r\n\r\n\t  function onTransportOpen(){\r\n\t\tif (self.onlyBinaryUpgrades) {\r\n\t\t  var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\r\n\t\t  failed = failed || upgradeLosesBinary;\r\n\t\t}\r\n\t\tif (failed) return;\r\n\r\n\t\tdebug('probe transport \"%s\" opened', name);\r\n\t\ttransport.send([{ type: 'ping', data: 'probe' }]);\r\n\t\ttransport.once('packet', function (msg) {\r\n\t\t  if (failed) return;\r\n\t\t  if ('pong' == msg.type && 'probe' == msg.data) {\r\n\t\t\tdebug('probe transport \"%s\" pong', name);\r\n\t\t\tself.upgrading = true;\r\n\t\t\tself.emit('upgrading', transport);\r\n\t\t\tif (!transport) return;\r\n\t\t\tSocket.priorWebsocketSuccess = 'websocket' == transport.name;\r\n\r\n\t\t\tdebug('pausing current transport \"%s\"', self.transport.name);\r\n\t\t\tself.transport.pause(function () {\r\n\t\t\t  if (failed) return;\r\n\t\t\t  if ('closed' == self.readyState) return;\r\n\t\t\t  debug('changing transport and sending upgrade packet');\r\n\r\n\t\t\t  cleanup();\r\n\r\n\t\t\t  self.setTransport(transport);\r\n\t\t\t  transport.send([{ type: 'upgrade' }]);\r\n\t\t\t  self.emit('upgrade', transport);\r\n\t\t\t  transport = null;\r\n\t\t\t  self.upgrading = false;\r\n\t\t\t  self.flush();\r\n\t\t\t});\r\n\t\t  } else {\r\n\t\t\tdebug('probe transport \"%s\" failed', name);\r\n\t\t\tvar err = new Error('probe error');\r\n\t\t\terr.transport = transport.name;\r\n\t\t\tself.emit('upgradeError', err);\r\n\t\t  }\r\n\t\t});\r\n\t  }\r\n\r\n\t  function freezeTransport() {\r\n\t\tif (failed) return;\r\n\r\n\t\t// Any callback called by transport should be ignored since now\r\n\t\tfailed = true;\r\n\r\n\t\tcleanup();\r\n\r\n\t\ttransport.close();\r\n\t\ttransport = null;\r\n\t  }\r\n\r\n\t  //Handle any error that happens while probing\r\n\t  function onerror(err) {\r\n\t\tvar error = new Error('probe error: ' + err);\r\n\t\terror.transport = transport.name;\r\n\r\n\t\tfreezeTransport();\r\n\r\n\t\tdebug('probe transport \"%s\" failed because of error: %s', name, err);\r\n\r\n\t\tself.emit('upgradeError', error);\r\n\t  }\r\n\r\n\t  function onTransportClose(){\r\n\t\tonerror(\"transport closed\");\r\n\t  }\r\n\r\n\t  //When the socket is closed while we're probing\r\n\t  function onclose(){\r\n\t\tonerror(\"socket closed\");\r\n\t  }\r\n\r\n\t  //When the socket is upgraded while we're probing\r\n\t  function onupgrade(to){\r\n\t\tif (transport && to.name != transport.name) {\r\n\t\t  debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\r\n\t\t  freezeTransport();\r\n\t\t}\r\n\t  }\r\n\r\n\t  //Remove all listeners on the transport and on self\r\n\t  function cleanup(){\r\n\t\ttransport.removeListener('open', onTransportOpen);\r\n\t\ttransport.removeListener('error', onerror);\r\n\t\ttransport.removeListener('close', onTransportClose);\r\n\t\tself.removeListener('close', onclose);\r\n\t\tself.removeListener('upgrading', onupgrade);\r\n\t  }\r\n\r\n\t  transport.once('open', onTransportOpen);\r\n\t  transport.once('error', onerror);\r\n\t  transport.once('close', onTransportClose);\r\n\r\n\t  this.once('close', onclose);\r\n\t  this.once('upgrading', onupgrade);\r\n\r\n\t  transport.open();\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Called when connection is deemed open.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.onOpen = function () {\r\n\t  debug('socket open');\r\n\t  this.readyState = 'open';\r\n\t  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\r\n\t  this.emit('open');\r\n\t  this.flush();\r\n\r\n\t  // we check for `readyState` in case an `open`\r\n\t  // listener already closed the socket\r\n\t  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\r\n\t\tdebug('starting upgrade probes');\r\n\t\tfor (var i = 0, l = this.upgrades.length; i < l; i++) {\r\n\t\t  this.probe(this.upgrades[i]);\r\n\t\t}\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Handles a packet.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onPacket = function (packet) {\r\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\r\n\t\tdebug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\r\n\r\n\t\tthis.emit('packet', packet);\r\n\r\n\t\t// Socket is live - any packet counts\r\n\t\tthis.emit('heartbeat');\r\n\r\n\t\tswitch (packet.type) {\r\n\t\t  case 'open':\r\n\t\t\tthis.onHandshake(parsejson(packet.data));\r\n\t\t\tbreak;\r\n\r\n\t\t  case 'pong':\r\n\t\t\tthis.setPing();\r\n\t\t\tthis.emit('pong');\r\n\t\t\tbreak;\r\n\r\n\t\t  case 'error':\r\n\t\t\tvar err = new Error('server error');\r\n\t\t\terr.code = packet.data;\r\n\t\t\tthis.onError(err);\r\n\t\t\tbreak;\r\n\r\n\t\t  case 'message':\r\n\t\t\tthis.emit('data', packet.data);\r\n\t\t\tthis.emit('message', packet.data);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t  } else {\r\n\t\tdebug('packet received with socket readyState \"%s\"', this.readyState);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon handshake completion.\r\n\t *\r\n\t * @param {Object} handshake obj\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onHandshake = function (data) {\r\n\t  this.emit('handshake', data);\r\n\t  this.id = data.sid;\r\n\t  this.transport.query.sid = data.sid;\r\n\t  this.upgrades = this.filterUpgrades(data.upgrades);\r\n\t  this.pingInterval = data.pingInterval;\r\n\t  this.pingTimeout = data.pingTimeout;\r\n\t  this.onOpen();\r\n\t  // In case open handler closes socket\r\n\t  if  ('closed' == this.readyState) return;\r\n\t  this.setPing();\r\n\r\n\t  // Prolong liveness of socket on heartbeat\r\n\t  this.removeListener('heartbeat', this.onHeartbeat);\r\n\t  this.on('heartbeat', this.onHeartbeat);\r\n\t};\r\n\r\n\t/**\r\n\t * Resets ping timeout.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onHeartbeat = function (timeout) {\r\n\t  clearTimeout(this.pingTimeoutTimer);\r\n\t  var self = this;\r\n\t  self.pingTimeoutTimer = setTimeout(function () {\r\n\t\tif ('closed' == self.readyState) return;\r\n\t\tself.onClose('ping timeout');\r\n\t  }, timeout || (self.pingInterval + self.pingTimeout));\r\n\t};\r\n\r\n\t/**\r\n\t * Pings server every `this.pingInterval` and expects response\r\n\t * within `this.pingTimeout` or closes connection.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.setPing = function () {\r\n\t  var self = this;\r\n\t  clearTimeout(self.pingIntervalTimer);\r\n\t  self.pingIntervalTimer = setTimeout(function () {\r\n\t\tdebug('writing ping packet - expecting pong within %sms', self.pingTimeout);\r\n\t\tself.ping();\r\n\t\tself.onHeartbeat(self.pingTimeout);\r\n\t  }, self.pingInterval);\r\n\t};\r\n\r\n\t/**\r\n\t* Sends a ping packet.\r\n\t*\r\n\t* @api private\r\n\t*/\r\n\r\n\tSocket.prototype.ping = function () {\r\n\t  var self = this;\r\n\t  this.sendPacket('ping', function(){\r\n\t\tself.emit('ping');\r\n\t  });\r\n\t};\r\n\r\n\t/**\r\n\t * Called on `drain` event\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onDrain = function() {\r\n\t  this.writeBuffer.splice(0, this.prevBufferLen);\r\n\r\n\t  // setting prevBufferLen = 0 is very important\r\n\t  // for example, when upgrading, upgrade packet is sent over,\r\n\t  // and a nonzero prevBufferLen could cause problems on `drain`\r\n\t  this.prevBufferLen = 0;\r\n\r\n\t  if (0 === this.writeBuffer.length) {\r\n\t\tthis.emit('drain');\r\n\t  } else {\r\n\t\tthis.flush();\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Flush write buffers.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.flush = function () {\r\n\t  if ('closed' != this.readyState && this.transport.writable &&\r\n\t\t!this.upgrading && this.writeBuffer.length) {\r\n\t\tdebug('flushing %d packets in socket', this.writeBuffer.length);\r\n\t\tthis.transport.send(this.writeBuffer);\r\n\t\t// keep track of current length of writeBuffer\r\n\t\t// splice writeBuffer and callbackBuffer on `drain`\r\n\t\tthis.prevBufferLen = this.writeBuffer.length;\r\n\t\tthis.emit('flush');\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a message.\r\n\t *\r\n\t * @param {String} message.\r\n\t * @param {Function} callback function.\r\n\t * @param {Object} options.\r\n\t * @return {Socket} for chaining.\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.write =\r\n\tSocket.prototype.send = function (msg, options, fn) {\r\n\t  this.sendPacket('message', msg, options, fn);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a packet.\r\n\t *\r\n\t * @param {String} packet type.\r\n\t * @param {String} data.\r\n\t * @param {Object} options.\r\n\t * @param {Function} callback function.\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.sendPacket = function (type, data, options, fn) {\r\n\t  if('function' == typeof data) {\r\n\t\tfn = data;\r\n\t\tdata = undefined;\r\n\t  }\r\n\r\n\t  if ('function' == typeof options) {\r\n\t\tfn = options;\r\n\t\toptions = null;\r\n\t  }\r\n\r\n\t  if ('closing' == this.readyState || 'closed' == this.readyState) {\r\n\t\treturn;\r\n\t  }\r\n\r\n\t  options = options || {};\r\n\t  options.compress = false !== options.compress;\r\n\r\n\t  var packet = {\r\n\t\ttype: type,\r\n\t\tdata: data,\r\n\t\toptions: options\r\n\t  };\r\n\t  this.emit('packetCreate', packet);\r\n\t  this.writeBuffer.push(packet);\r\n\t  if (fn) this.once('flush', fn);\r\n\t  this.flush();\r\n\t};\r\n\r\n\t/**\r\n\t * Closes the connection.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.close = function () {\r\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\r\n\t\tthis.readyState = 'closing';\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (this.writeBuffer.length) {\r\n\t\t  this.once('drain', function() {\r\n\t\t\tif (this.upgrading) {\r\n\t\t\t  waitForUpgrade();\r\n\t\t\t} else {\r\n\t\t\t  close();\r\n\t\t\t}\r\n\t\t  });\r\n\t\t} else if (this.upgrading) {\r\n\t\t  waitForUpgrade();\r\n\t\t} else {\r\n\t\t  close();\r\n\t\t}\r\n\t  }\r\n\r\n\t  function close() {\r\n\t\tself.onClose('forced close');\r\n\t\tdebug('socket closing - telling transport to close');\r\n\t\tself.transport.close();\r\n\t  }\r\n\r\n\t  function cleanupAndClose() {\r\n\t\tself.removeListener('upgrade', cleanupAndClose);\r\n\t\tself.removeListener('upgradeError', cleanupAndClose);\r\n\t\tclose();\r\n\t  }\r\n\r\n\t  function waitForUpgrade() {\r\n\t\t// wait for upgrade to finish since we can't send packets while pausing a transport\r\n\t\tself.once('upgrade', cleanupAndClose);\r\n\t\tself.once('upgradeError', cleanupAndClose);\r\n\t  }\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon transport error\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onError = function (err) {\r\n\t  debug('socket error %j', err);\r\n\t  Socket.priorWebsocketSuccess = false;\r\n\t  this.emit('error', err);\r\n\t  this.onClose('transport error', err);\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon transport close.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onClose = function (reason, desc) {\r\n\t  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\r\n\t\tdebug('socket close with reason: \"%s\"', reason);\r\n\t\tvar self = this;\r\n\r\n\t\t// clear timers\r\n\t\tclearTimeout(this.pingIntervalTimer);\r\n\t\tclearTimeout(this.pingTimeoutTimer);\r\n\r\n\t\t// stop event from firing again for transport\r\n\t\tthis.transport.removeAllListeners('close');\r\n\r\n\t\t// ensure transport won't stay open\r\n\t\tthis.transport.close();\r\n\r\n\t\t// ignore further transport communication\r\n\t\tthis.transport.removeAllListeners();\r\n\r\n\t\t// set ready state\r\n\t\tthis.readyState = 'closed';\r\n\r\n\t\t// clear session id\r\n\t\tthis.id = null;\r\n\r\n\t\t// emit close event\r\n\t\tthis.emit('close', reason, desc);\r\n\r\n\t\t// clean buffers after, so users can still\r\n\t\t// grab the buffers on `close` event\r\n\t\tself.writeBuffer = [];\r\n\t\tself.prevBufferLen = 0;\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Filters upgrades, returning only those matching client transports.\r\n\t *\r\n\t * @param {Array} server upgrades\r\n\t * @api private\r\n\t *\r\n\t */\r\n\r\n\tSocket.prototype.filterUpgrades = function (upgrades) {\r\n\t  var filteredUpgrades = [];\r\n\t  for (var i = 0, j = upgrades.length; i<j; i++) {\r\n\t\tif (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\r\n\t  }\r\n\t  return filteredUpgrades;\r\n\t};\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"./transport\":4,\"./transports\":5,\"component-emitter\":15,\"debug\":17,\"engine.io-parser\":19,\"indexof\":23,\"parsejson\":26,\"parseqs\":27,\"parseuri\":28}],4:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar parser = _dereq_('engine.io-parser');\r\n\tvar Emitter = _dereq_('component-emitter');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = Transport;\r\n\r\n\t/**\r\n\t * Transport abstract constructor.\r\n\t *\r\n\t * @param {Object} options.\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction Transport (opts) {\r\n\t  this.path = opts.path;\r\n\t  this.hostname = opts.hostname;\r\n\t  this.port = opts.port;\r\n\t  this.secure = opts.secure;\r\n\t  this.query = opts.query;\r\n\t  this.timestampParam = opts.timestampParam;\r\n\t  this.timestampRequests = opts.timestampRequests;\r\n\t  this.readyState = '';\r\n\t  this.agent = opts.agent || false;\r\n\t  this.socket = opts.socket;\r\n\t  this.enablesXDR = opts.enablesXDR;\r\n\r\n\t  // SSL options for Node.js client\r\n\t  this.pfx = opts.pfx;\r\n\t  this.key = opts.key;\r\n\t  this.passphrase = opts.passphrase;\r\n\t  this.cert = opts.cert;\r\n\t  this.ca = opts.ca;\r\n\t  this.ciphers = opts.ciphers;\r\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\r\n\r\n\t  // other options for Node.js client\r\n\t  this.extraHeaders = opts.extraHeaders;\r\n\t}\r\n\r\n\t/**\r\n\t * Mix in `Emitter`.\r\n\t */\r\n\r\n\tEmitter(Transport.prototype);\r\n\r\n\t/**\r\n\t * Emits an error.\r\n\t *\r\n\t * @param {String} str\r\n\t * @return {Transport} for chaining\r\n\t * @api public\r\n\t */\r\n\r\n\tTransport.prototype.onError = function (msg, desc) {\r\n\t  var err = new Error(msg);\r\n\t  err.type = 'TransportError';\r\n\t  err.description = desc;\r\n\t  this.emit('error', err);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Opens the transport.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tTransport.prototype.open = function () {\r\n\t  if ('closed' == this.readyState || '' == this.readyState) {\r\n\t\tthis.readyState = 'opening';\r\n\t\tthis.doOpen();\r\n\t  }\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Closes the transport.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tTransport.prototype.close = function () {\r\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\r\n\t\tthis.doClose();\r\n\t\tthis.onClose();\r\n\t  }\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sends multiple packets.\r\n\t *\r\n\t * @param {Array} packets\r\n\t * @api private\r\n\t */\r\n\r\n\tTransport.prototype.send = function(packets){\r\n\t  if ('open' == this.readyState) {\r\n\t\tthis.write(packets);\r\n\t  } else {\r\n\t\tthrow new Error('Transport not open');\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon open\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tTransport.prototype.onOpen = function () {\r\n\t  this.readyState = 'open';\r\n\t  this.writable = true;\r\n\t  this.emit('open');\r\n\t};\r\n\r\n\t/**\r\n\t * Called with data.\r\n\t *\r\n\t * @param {String} data\r\n\t * @api private\r\n\t */\r\n\r\n\tTransport.prototype.onData = function(data){\r\n\t  var packet = parser.decodePacket(data, this.socket.binaryType);\r\n\t  this.onPacket(packet);\r\n\t};\r\n\r\n\t/**\r\n\t * Called with a decoded packet.\r\n\t */\r\n\r\n\tTransport.prototype.onPacket = function (packet) {\r\n\t  this.emit('packet', packet);\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon close.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tTransport.prototype.onClose = function () {\r\n\t  this.readyState = 'closed';\r\n\t  this.emit('close');\r\n\t};\r\n\r\n\t},{\"component-emitter\":15,\"engine.io-parser\":19}],5:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * Module dependencies\r\n\t */\r\n\r\n\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\r\n\tvar XHR = _dereq_('./polling-xhr');\r\n\tvar JSONP = _dereq_('./polling-jsonp');\r\n\tvar websocket = _dereq_('./websocket');\r\n\r\n\t/**\r\n\t * Export transports.\r\n\t */\r\n\r\n\texports.polling = polling;\r\n\texports.websocket = websocket;\r\n\r\n\t/**\r\n\t * Polling transport polymorphic constructor.\r\n\t * Decides on xhr vs jsonp based on feature detection.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction polling(opts){\r\n\t  var xhr;\r\n\t  var xd = false;\r\n\t  var xs = false;\r\n\t  var jsonp = false !== opts.jsonp;\r\n\r\n\t  if (global.location) {\r\n\t\tvar isSSL = 'https:' == location.protocol;\r\n\t\tvar port = location.port;\r\n\r\n\t\t// some user agents have empty `location.port`\r\n\t\tif (!port) {\r\n\t\t  port = isSSL ? 443 : 80;\r\n\t\t}\r\n\r\n\t\txd = opts.hostname != location.hostname || port != opts.port;\r\n\t\txs = opts.secure != isSSL;\r\n\t  }\r\n\r\n\t  opts.xdomain = xd;\r\n\t  opts.xscheme = xs;\r\n\t  xhr = new XMLHttpRequest(opts);\r\n\r\n\t  if ('open' in xhr && !opts.forceJSONP) {\r\n\t\treturn new XHR(opts);\r\n\t  } else {\r\n\t\tif (!jsonp) throw new Error('JSONP disabled');\r\n\t\treturn new JSONP(opts);\r\n\t  }\r\n\t}\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"./polling-jsonp\":6,\"./polling-xhr\":7,\"./websocket\":9,\"xmlhttprequest-ssl\":10}],6:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\r\n\t/**\r\n\t * Module requirements.\r\n\t */\r\n\r\n\tvar Polling = _dereq_('./polling');\r\n\tvar inherit = _dereq_('component-inherit');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = JSONPPolling;\r\n\r\n\t/**\r\n\t * Cached regular expressions.\r\n\t */\r\n\r\n\tvar rNewline = /\\n/g;\r\n\tvar rEscapedNewline = /\\\\n/g;\r\n\r\n\t/**\r\n\t * Global JSONP callbacks.\r\n\t */\r\n\r\n\tvar callbacks;\r\n\r\n\t/**\r\n\t * Callbacks count.\r\n\t */\r\n\r\n\tvar index = 0;\r\n\r\n\t/**\r\n\t * Noop.\r\n\t */\r\n\r\n\tfunction empty () { }\r\n\r\n\t/**\r\n\t * JSONP Polling constructor.\r\n\t *\r\n\t * @param {Object} opts.\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction JSONPPolling (opts) {\r\n\t  Polling.call(this, opts);\r\n\r\n\t  this.query = this.query || {};\r\n\r\n\t  // define global callbacks array if not present\r\n\t  // we do this here (lazily) to avoid unneeded global pollution\r\n\t  if (!callbacks) {\r\n\t\t// we need to consider multiple engines in the same page\r\n\t\tif (!global.___eio) global.___eio = [];\r\n\t\tcallbacks = global.___eio;\r\n\t  }\r\n\r\n\t  // callback identifier\r\n\t  this.index = callbacks.length;\r\n\r\n\t  // add callback to jsonp global\r\n\t  var self = this;\r\n\t  callbacks.push(function (msg) {\r\n\t\tself.onData(msg);\r\n\t  });\r\n\r\n\t  // append to query string\r\n\t  this.query.j = this.index;\r\n\r\n\t  // prevent spurious errors from being emitted when the window is unloaded\r\n\t  if (global.document && global.addEventListener) {\r\n\t\tglobal.addEventListener('beforeunload', function () {\r\n\t\t  if (self.script) self.script.onerror = empty;\r\n\t\t}, false);\r\n\t  }\r\n\t}\r\n\r\n\t/**\r\n\t * Inherits from Polling.\r\n\t */\r\n\r\n\tinherit(JSONPPolling, Polling);\r\n\r\n\t/*\r\n\t * JSONP only supports binary as base64 encoded strings\r\n\t */\r\n\r\n\tJSONPPolling.prototype.supportsBinary = false;\r\n\r\n\t/**\r\n\t * Closes the socket.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tJSONPPolling.prototype.doClose = function () {\r\n\t  if (this.script) {\r\n\t\tthis.script.parentNode.removeChild(this.script);\r\n\t\tthis.script = null;\r\n\t  }\r\n\r\n\t  if (this.form) {\r\n\t\tthis.form.parentNode.removeChild(this.form);\r\n\t\tthis.form = null;\r\n\t\tthis.iframe = null;\r\n\t  }\r\n\r\n\t  Polling.prototype.doClose.call(this);\r\n\t};\r\n\r\n\t/**\r\n\t * Starts a poll cycle.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tJSONPPolling.prototype.doPoll = function () {\r\n\t  var self = this;\r\n\t  var script = document.createElement('script');\r\n\r\n\t  if (this.script) {\r\n\t\tthis.script.parentNode.removeChild(this.script);\r\n\t\tthis.script = null;\r\n\t  }\r\n\r\n\t  script.async = true;\r\n\t  script.src = this.uri();\r\n\t  script.onerror = function(e){\r\n\t\tself.onError('jsonp poll error',e);\r\n\t  };\r\n\r\n\t  var insertAt = document.getElementsByTagName('script')[0];\r\n\t  if (insertAt) {\r\n\t\tinsertAt.parentNode.insertBefore(script, insertAt);\r\n\t  }\r\n\t  else {\r\n\t\t(document.head || document.body).appendChild(script);\r\n\t  }\r\n\t  this.script = script;\r\n\r\n\t  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\r\n\t  \r\n\t  if (isUAgecko) {\r\n\t\tsetTimeout(function () {\r\n\t\t  var iframe = document.createElement('iframe');\r\n\t\t  document.body.appendChild(iframe);\r\n\t\t  document.body.removeChild(iframe);\r\n\t\t}, 100);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Writes with a hidden iframe.\r\n\t *\r\n\t * @param {String} data to send\r\n\t * @param {Function} called upon flush.\r\n\t * @api private\r\n\t */\r\n\r\n\tJSONPPolling.prototype.doWrite = function (data, fn) {\r\n\t  var self = this;\r\n\r\n\t  if (!this.form) {\r\n\t\tvar form = document.createElement('form');\r\n\t\tvar area = document.createElement('textarea');\r\n\t\tvar id = this.iframeId = 'eio_iframe_' + this.index;\r\n\t\tvar iframe;\r\n\r\n\t\tform.className = 'socketio';\r\n\t\tform.style.position = 'absolute';\r\n\t\tform.style.top = '-1000px';\r\n\t\tform.style.left = '-1000px';\r\n\t\tform.target = id;\r\n\t\tform.method = 'POST';\r\n\t\tform.setAttribute('accept-charset', 'utf-8');\r\n\t\tarea.name = 'd';\r\n\t\tform.appendChild(area);\r\n\t\tdocument.body.appendChild(form);\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.area = area;\r\n\t  }\r\n\r\n\t  this.form.action = this.uri();\r\n\r\n\t  function complete () {\r\n\t\tinitIframe();\r\n\t\tfn();\r\n\t  }\r\n\r\n\t  function initIframe () {\r\n\t\tif (self.iframe) {\r\n\t\t  try {\r\n\t\t\tself.form.removeChild(self.iframe);\r\n\t\t  } catch (e) {\r\n\t\t\tself.onError('jsonp polling iframe removal error', e);\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t  // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\r\n\t\t  var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\r\n\t\t  iframe = document.createElement(html);\r\n\t\t} catch (e) {\r\n\t\t  iframe = document.createElement('iframe');\r\n\t\t  iframe.name = self.iframeId;\r\n\t\t  iframe.src = 'javascript:0';\r\n\t\t}\r\n\r\n\t\tiframe.id = self.iframeId;\r\n\r\n\t\tself.form.appendChild(iframe);\r\n\t\tself.iframe = iframe;\r\n\t  }\r\n\r\n\t  initIframe();\r\n\r\n\t  // escape \\n to prevent it from being converted into \\r\\n by some UAs\r\n\t  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\r\n\t  data = data.replace(rEscapedNewline, '\\\\\\n');\r\n\t  this.area.value = data.replace(rNewline, '\\\\n');\r\n\r\n\t  try {\r\n\t\tthis.form.submit();\r\n\t  } catch(e) {}\r\n\r\n\t  if (this.iframe.attachEvent) {\r\n\t\tthis.iframe.onreadystatechange = function(){\r\n\t\t  if (self.iframe.readyState == 'complete') {\r\n\t\t\tcomplete();\r\n\t\t  }\r\n\t\t};\r\n\t  } else {\r\n\t\tthis.iframe.onload = complete;\r\n\t  }\r\n\t};\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"./polling\":8,\"component-inherit\":16}],7:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * Module requirements.\r\n\t */\r\n\r\n\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\r\n\tvar Polling = _dereq_('./polling');\r\n\tvar Emitter = _dereq_('component-emitter');\r\n\tvar inherit = _dereq_('component-inherit');\r\n\tvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = XHR;\r\n\tmodule.exports.Request = Request;\r\n\r\n\t/**\r\n\t * Empty function\r\n\t */\r\n\r\n\tfunction empty(){}\r\n\r\n\t/**\r\n\t * XHR Polling constructor.\r\n\t *\r\n\t * @param {Object} opts\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction XHR(opts){\r\n\t  Polling.call(this, opts);\r\n\r\n\t  if (global.location) {\r\n\t\tvar isSSL = 'https:' == location.protocol;\r\n\t\tvar port = location.port;\r\n\r\n\t\t// some user agents have empty `location.port`\r\n\t\tif (!port) {\r\n\t\t  port = isSSL ? 443 : 80;\r\n\t\t}\r\n\r\n\t\tthis.xd = opts.hostname != global.location.hostname ||\r\n\t\t  port != opts.port;\r\n\t\tthis.xs = opts.secure != isSSL;\r\n\t  } else {\r\n\t\tthis.extraHeaders = opts.extraHeaders;\r\n\t  }\r\n\t}\r\n\r\n\t/**\r\n\t * Inherits from Polling.\r\n\t */\r\n\r\n\tinherit(XHR, Polling);\r\n\r\n\t/**\r\n\t * XHR supports binary\r\n\t */\r\n\r\n\tXHR.prototype.supportsBinary = true;\r\n\r\n\t/**\r\n\t * Creates a request.\r\n\t *\r\n\t * @param {String} method\r\n\t * @api private\r\n\t */\r\n\r\n\tXHR.prototype.request = function(opts){\r\n\t  opts = opts || {};\r\n\t  opts.uri = this.uri();\r\n\t  opts.xd = this.xd;\r\n\t  opts.xs = this.xs;\r\n\t  opts.agent = this.agent || false;\r\n\t  opts.supportsBinary = this.supportsBinary;\r\n\t  opts.enablesXDR = this.enablesXDR;\r\n\r\n\t  // SSL options for Node.js client\r\n\t  opts.pfx = this.pfx;\r\n\t  opts.key = this.key;\r\n\t  opts.passphrase = this.passphrase;\r\n\t  opts.cert = this.cert;\r\n\t  opts.ca = this.ca;\r\n\t  opts.ciphers = this.ciphers;\r\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\r\n\r\n\t  // other options for Node.js client\r\n\t  opts.extraHeaders = this.extraHeaders;\r\n\r\n\t  return new Request(opts);\r\n\t};\r\n\r\n\t/**\r\n\t * Sends data.\r\n\t *\r\n\t * @param {String} data to send.\r\n\t * @param {Function} called upon flush.\r\n\t * @api private\r\n\t */\r\n\r\n\tXHR.prototype.doWrite = function(data, fn){\r\n\t  var isBinary = typeof data !== 'string' && data !== undefined;\r\n\t  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\r\n\t  var self = this;\r\n\t  req.on('success', fn);\r\n\t  req.on('error', function(err){\r\n\t\tself.onError('xhr post error', err);\r\n\t  });\r\n\t  this.sendXhr = req;\r\n\t};\r\n\r\n\t/**\r\n\t * Starts a poll cycle.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tXHR.prototype.doPoll = function(){\r\n\t  debug('xhr poll');\r\n\t  var req = this.request();\r\n\t  var self = this;\r\n\t  req.on('data', function(data){\r\n\t\tself.onData(data);\r\n\t  });\r\n\t  req.on('error', function(err){\r\n\t\tself.onError('xhr poll error', err);\r\n\t  });\r\n\t  this.pollXhr = req;\r\n\t};\r\n\r\n\t/**\r\n\t * Request constructor\r\n\t *\r\n\t * @param {Object} options\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Request(opts){\r\n\t  this.method = opts.method || 'GET';\r\n\t  this.uri = opts.uri;\r\n\t  this.xd = !!opts.xd;\r\n\t  this.xs = !!opts.xs;\r\n\t  this.async = false !== opts.async;\r\n\t  this.data = undefined != opts.data ? opts.data : null;\r\n\t  this.agent = opts.agent;\r\n\t  this.isBinary = opts.isBinary;\r\n\t  this.supportsBinary = opts.supportsBinary;\r\n\t  this.enablesXDR = opts.enablesXDR;\r\n\r\n\t  // SSL options for Node.js client\r\n\t  this.pfx = opts.pfx;\r\n\t  this.key = opts.key;\r\n\t  this.passphrase = opts.passphrase;\r\n\t  this.cert = opts.cert;\r\n\t  this.ca = opts.ca;\r\n\t  this.ciphers = opts.ciphers;\r\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\r\n\r\n\t  // other options for Node.js client\r\n\t  this.extraHeaders = opts.extraHeaders;\r\n\r\n\t  this.create();\r\n\t}\r\n\r\n\t/**\r\n\t * Mix in `Emitter`.\r\n\t */\r\n\r\n\tEmitter(Request.prototype);\r\n\r\n\t/**\r\n\t * Creates the XHR object and sends the request.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.create = function(){\r\n\t  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\r\n\r\n\t  // SSL options for Node.js client\r\n\t  opts.pfx = this.pfx;\r\n\t  opts.key = this.key;\r\n\t  opts.passphrase = this.passphrase;\r\n\t  opts.cert = this.cert;\r\n\t  opts.ca = this.ca;\r\n\t  opts.ciphers = this.ciphers;\r\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\r\n\r\n\t  var xhr = this.xhr = new XMLHttpRequest(opts);\r\n\t  var self = this;\r\n\r\n\t  try {\r\n\t\tdebug('xhr open %s: %s', this.method, this.uri);\r\n\t\txhr.open(this.method, this.uri, this.async);\r\n\t\ttry {\r\n\t\t  if (this.extraHeaders) {\r\n\t\t\txhr.setDisableHeaderCheck(true);\r\n\t\t\tfor (var i in this.extraHeaders) {\r\n\t\t\t  if (this.extraHeaders.hasOwnProperty(i)) {\r\n\t\t\t\txhr.setRequestHeader(i, this.extraHeaders[i]);\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t  }\r\n\t\t} catch (e) {}\r\n\t\tif (this.supportsBinary) {\r\n\t\t  // This has to be done after open because Firefox is stupid\r\n\t\t  // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\r\n\t\t  xhr.responseType = 'arraybuffer';\r\n\t\t}\r\n\r\n\t\tif ('POST' == this.method) {\r\n\t\t  try {\r\n\t\t\tif (this.isBinary) {\r\n\t\t\t  xhr.setRequestHeader('Content-type', 'application/octet-stream');\r\n\t\t\t} else {\r\n\t\t\t  xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\r\n\t\t\t}\r\n\t\t  } catch (e) {}\r\n\t\t}\r\n\r\n\t\t// ie6 check\r\n\t\tif ('withCredentials' in xhr) {\r\n\t\t  xhr.withCredentials = true;\r\n\t\t}\r\n\r\n\t\tif (this.hasXDR()) {\r\n\t\t  xhr.onload = function(){\r\n\t\t\tself.onLoad();\r\n\t\t  };\r\n\t\t  xhr.onerror = function(){\r\n\t\t\tself.onError(xhr.responseText);\r\n\t\t  };\r\n\t\t} else {\r\n\t\t  xhr.onreadystatechange = function(){\r\n\t\t\tif (4 != xhr.readyState) return;\r\n\t\t\tif (200 == xhr.status || 1223 == xhr.status) {\r\n\t\t\t  self.onLoad();\r\n\t\t\t} else {\r\n\t\t\t  // make sure the `error` event handler that's user-set\r\n\t\t\t  // does not throw in the same tick and gets caught here\r\n\t\t\t  setTimeout(function(){\r\n\t\t\t\tself.onError(xhr.status);\r\n\t\t\t  }, 0);\r\n\t\t\t}\r\n\t\t  };\r\n\t\t}\r\n\r\n\t\tdebug('xhr data %s', this.data);\r\n\t\txhr.send(this.data);\r\n\t  } catch (e) {\r\n\t\t// Need to defer since .create() is called directly fhrom the constructor\r\n\t\t// and thus the 'error' event can only be only bound *after* this exception\r\n\t\t// occurs.  Therefore, also, we cannot throw here at all.\r\n\t\tsetTimeout(function() {\r\n\t\t  self.onError(e);\r\n\t\t}, 0);\r\n\t\treturn;\r\n\t  }\r\n\r\n\t  if (global.document) {\r\n\t\tthis.index = Request.requestsCount++;\r\n\t\tRequest.requests[this.index] = this;\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon successful response.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.onSuccess = function(){\r\n\t  this.emit('success');\r\n\t  this.cleanup();\r\n\t};\r\n\r\n\t/**\r\n\t * Called if we have data.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.onData = function(data){\r\n\t  this.emit('data', data);\r\n\t  this.onSuccess();\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon error.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.onError = function(err){\r\n\t  this.emit('error', err);\r\n\t  this.cleanup(true);\r\n\t};\r\n\r\n\t/**\r\n\t * Cleans up house.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.cleanup = function(fromError){\r\n\t  if ('undefined' == typeof this.xhr || null === this.xhr) {\r\n\t\treturn;\r\n\t  }\r\n\t  // xmlhttprequest\r\n\t  if (this.hasXDR()) {\r\n\t\tthis.xhr.onload = this.xhr.onerror = empty;\r\n\t  } else {\r\n\t\tthis.xhr.onreadystatechange = empty;\r\n\t  }\r\n\r\n\t  if (fromError) {\r\n\t\ttry {\r\n\t\t  this.xhr.abort();\r\n\t\t} catch(e) {}\r\n\t  }\r\n\r\n\t  if (global.document) {\r\n\t\tdelete Request.requests[this.index];\r\n\t  }\r\n\r\n\t  this.xhr = null;\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon load.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.onLoad = function(){\r\n\t  var data;\r\n\t  try {\r\n\t\tvar contentType;\r\n\t\ttry {\r\n\t\t  contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\r\n\t\t} catch (e) {}\r\n\t\tif (contentType === 'application/octet-stream') {\r\n\t\t  data = this.xhr.response;\r\n\t\t} else {\r\n\t\t  if (!this.supportsBinary) {\r\n\t\t\tdata = this.xhr.responseText;\r\n\t\t  } else {\r\n\t\t\ttry {\r\n\t\t\t  data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\r\n\t\t\t} catch (e) {\r\n\t\t\t  var ui8Arr = new Uint8Array(this.xhr.response);\r\n\t\t\t  var dataArray = [];\r\n\t\t\t  for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\r\n\t\t\t\tdataArray.push(ui8Arr[idx]);\r\n\t\t\t  }\r\n\r\n\t\t\t  data = String.fromCharCode.apply(null, dataArray);\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\t  } catch (e) {\r\n\t\tthis.onError(e);\r\n\t  }\r\n\t  if (null != data) {\r\n\t\tthis.onData(data);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Check if it has XDomainRequest.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tRequest.prototype.hasXDR = function(){\r\n\t  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\r\n\t};\r\n\r\n\t/**\r\n\t * Aborts the request.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tRequest.prototype.abort = function(){\r\n\t  this.cleanup();\r\n\t};\r\n\r\n\t/**\r\n\t * Aborts pending requests when unloading the window. This is needed to prevent\r\n\t * memory leaks (e.g. when using IE) and to ensure that no spurious error is\r\n\t * emitted.\r\n\t */\r\n\r\n\tif (global.document) {\r\n\t  Request.requestsCount = 0;\r\n\t  Request.requests = {};\r\n\t  if (global.attachEvent) {\r\n\t\tglobal.attachEvent('onunload', unloadHandler);\r\n\t  } else if (global.addEventListener) {\r\n\t\tglobal.addEventListener('beforeunload', unloadHandler, false);\r\n\t  }\r\n\t}\r\n\r\n\tfunction unloadHandler() {\r\n\t  for (var i in Request.requests) {\r\n\t\tif (Request.requests.hasOwnProperty(i)) {\r\n\t\t  Request.requests[i].abort();\r\n\t\t}\r\n\t  }\r\n\t}\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"./polling\":8,\"component-emitter\":15,\"component-inherit\":16,\"debug\":17,\"xmlhttprequest-ssl\":10}],8:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar Transport = _dereq_('../transport');\r\n\tvar parseqs = _dereq_('parseqs');\r\n\tvar parser = _dereq_('engine.io-parser');\r\n\tvar inherit = _dereq_('component-inherit');\r\n\tvar yeast = _dereq_('yeast');\r\n\tvar debug = _dereq_('debug')('engine.io-client:polling');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = Polling;\r\n\r\n\t/**\r\n\t * Is XHR2 supported?\r\n\t */\r\n\r\n\tvar hasXHR2 = (function() {\r\n\t  var XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\r\n\t  var xhr = new XMLHttpRequest({ xdomain: false });\r\n\t  return null != xhr.responseType;\r\n\t})();\r\n\r\n\t/**\r\n\t * Polling interface.\r\n\t *\r\n\t * @param {Object} opts\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction Polling(opts){\r\n\t  var forceBase64 = (opts && opts.forceBase64);\r\n\t  if (!hasXHR2 || forceBase64) {\r\n\t\tthis.supportsBinary = false;\r\n\t  }\r\n\t  Transport.call(this, opts);\r\n\t}\r\n\r\n\t/**\r\n\t * Inherits from Transport.\r\n\t */\r\n\r\n\tinherit(Polling, Transport);\r\n\r\n\t/**\r\n\t * Transport name.\r\n\t */\r\n\r\n\tPolling.prototype.name = 'polling';\r\n\r\n\t/**\r\n\t * Opens the socket (triggers polling). We write a PING message to determine\r\n\t * when the transport is open.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tPolling.prototype.doOpen = function(){\r\n\t  this.poll();\r\n\t};\r\n\r\n\t/**\r\n\t * Pauses polling.\r\n\t *\r\n\t * @param {Function} callback upon buffers are flushed and transport is paused\r\n\t * @api private\r\n\t */\r\n\r\n\tPolling.prototype.pause = function(onPause){\r\n\t  var pending = 0;\r\n\t  var self = this;\r\n\r\n\t  this.readyState = 'pausing';\r\n\r\n\t  function pause(){\r\n\t\tdebug('paused');\r\n\t\tself.readyState = 'paused';\r\n\t\tonPause();\r\n\t  }\r\n\r\n\t  if (this.polling || !this.writable) {\r\n\t\tvar total = 0;\r\n\r\n\t\tif (this.polling) {\r\n\t\t  debug('we are currently polling - waiting to pause');\r\n\t\t  total++;\r\n\t\t  this.once('pollComplete', function(){\r\n\t\t\tdebug('pre-pause polling complete');\r\n\t\t\t--total || pause();\r\n\t\t  });\r\n\t\t}\r\n\r\n\t\tif (!this.writable) {\r\n\t\t  debug('we are currently writing - waiting to pause');\r\n\t\t  total++;\r\n\t\t  this.once('drain', function(){\r\n\t\t\tdebug('pre-pause writing complete');\r\n\t\t\t--total || pause();\r\n\t\t  });\r\n\t\t}\r\n\t  } else {\r\n\t\tpause();\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Starts polling cycle.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tPolling.prototype.poll = function(){\r\n\t  debug('polling');\r\n\t  this.polling = true;\r\n\t  this.doPoll();\r\n\t  this.emit('poll');\r\n\t};\r\n\r\n\t/**\r\n\t * Overloads onData to detect payloads.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tPolling.prototype.onData = function(data){\r\n\t  var self = this;\r\n\t  debug('polling got data %s', data);\r\n\t  var callback = function(packet, index, total) {\r\n\t\t// if its the first message we consider the transport open\r\n\t\tif ('opening' == self.readyState) {\r\n\t\t  self.onOpen();\r\n\t\t}\r\n\r\n\t\t// if its a close packet, we close the ongoing requests\r\n\t\tif ('close' == packet.type) {\r\n\t\t  self.onClose();\r\n\t\t  return false;\r\n\t\t}\r\n\r\n\t\t// otherwise bypass onData and handle the message\r\n\t\tself.onPacket(packet);\r\n\t  };\r\n\r\n\t  // decode payload\r\n\t  parser.decodePayload(data, this.socket.binaryType, callback);\r\n\r\n\t  // if an event did not trigger closing\r\n\t  if ('closed' != this.readyState) {\r\n\t\t// if we got data we're not polling\r\n\t\tthis.polling = false;\r\n\t\tthis.emit('pollComplete');\r\n\r\n\t\tif ('open' == this.readyState) {\r\n\t\t  this.poll();\r\n\t\t} else {\r\n\t\t  debug('ignoring poll - transport state \"%s\"', this.readyState);\r\n\t\t}\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * For polling, send a close packet.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tPolling.prototype.doClose = function(){\r\n\t  var self = this;\r\n\r\n\t  function close(){\r\n\t\tdebug('writing close packet');\r\n\t\tself.write([{ type: 'close' }]);\r\n\t  }\r\n\r\n\t  if ('open' == this.readyState) {\r\n\t\tdebug('transport open - closing');\r\n\t\tclose();\r\n\t  } else {\r\n\t\t// in case we're trying to close while\r\n\t\t// handshaking is in progress (GH-164)\r\n\t\tdebug('transport not open - deferring close');\r\n\t\tthis.once('open', close);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Writes a packets payload.\r\n\t *\r\n\t * @param {Array} data packets\r\n\t * @param {Function} drain callback\r\n\t * @api private\r\n\t */\r\n\r\n\tPolling.prototype.write = function(packets){\r\n\t  var self = this;\r\n\t  this.writable = false;\r\n\t  var callbackfn = function() {\r\n\t\tself.writable = true;\r\n\t\tself.emit('drain');\r\n\t  };\r\n\r\n\t  var self = this;\r\n\t  parser.encodePayload(packets, this.supportsBinary, function(data) {\r\n\t\tself.doWrite(data, callbackfn);\r\n\t  });\r\n\t};\r\n\r\n\t/**\r\n\t * Generates uri for connection.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tPolling.prototype.uri = function(){\r\n\t  var query = this.query || {};\r\n\t  var schema = this.secure ? 'https' : 'http';\r\n\t  var port = '';\r\n\r\n\t  // cache busting is forced\r\n\t  if (false !== this.timestampRequests) {\r\n\t\tquery[this.timestampParam] = yeast();\r\n\t  }\r\n\r\n\t  if (!this.supportsBinary && !query.sid) {\r\n\t\tquery.b64 = 1;\r\n\t  }\r\n\r\n\t  query = parseqs.encode(query);\r\n\r\n\t  // avoid port if default for schema\r\n\t  if (this.port && (('https' == schema && this.port != 443) ||\r\n\t\t ('http' == schema && this.port != 80))) {\r\n\t\tport = ':' + this.port;\r\n\t  }\r\n\r\n\t  // prepend ? to query\r\n\t  if (query.length) {\r\n\t\tquery = '?' + query;\r\n\t  }\r\n\r\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\r\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\r\n\t};\r\n\r\n\t},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"xmlhttprequest-ssl\":10,\"yeast\":30}],9:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar Transport = _dereq_('../transport');\r\n\tvar parser = _dereq_('engine.io-parser');\r\n\tvar parseqs = _dereq_('parseqs');\r\n\tvar inherit = _dereq_('component-inherit');\r\n\tvar yeast = _dereq_('yeast');\r\n\tvar debug = _dereq_('debug')('engine.io-client:websocket');\r\n\tvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\r\n\r\n\t/**\r\n\t * Get either the `WebSocket` or `MozWebSocket` globals\r\n\t * in the browser or try to resolve WebSocket-compatible\r\n\t * interface exposed by `ws` for Node-like environment.\r\n\t */\r\n\r\n\tvar WebSocket = BrowserWebSocket;\r\n\tif (!WebSocket && typeof window === 'undefined') {\r\n\t  try {\r\n\t\tWebSocket = _dereq_('ws');\r\n\t  } catch (e) { }\r\n\t}\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = WS;\r\n\r\n\t/**\r\n\t * WebSocket transport constructor.\r\n\t *\r\n\t * @api {Object} connection options\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction WS(opts){\r\n\t  var forceBase64 = (opts && opts.forceBase64);\r\n\t  if (forceBase64) {\r\n\t\tthis.supportsBinary = false;\r\n\t  }\r\n\t  this.perMessageDeflate = opts.perMessageDeflate;\r\n\t  Transport.call(this, opts);\r\n\t}\r\n\r\n\t/**\r\n\t * Inherits from Transport.\r\n\t */\r\n\r\n\tinherit(WS, Transport);\r\n\r\n\t/**\r\n\t * Transport name.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tWS.prototype.name = 'websocket';\r\n\r\n\t/*\r\n\t * WebSockets support binary\r\n\t */\r\n\r\n\tWS.prototype.supportsBinary = true;\r\n\r\n\t/**\r\n\t * Opens socket.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tWS.prototype.doOpen = function(){\r\n\t  if (!this.check()) {\r\n\t\t// let probe timeout\r\n\t\treturn;\r\n\t  }\r\n\r\n\t  var self = this;\r\n\t  var uri = this.uri();\r\n\t  var protocols = void(0);\r\n\t  var opts = {\r\n\t\tagent: this.agent,\r\n\t\tperMessageDeflate: this.perMessageDeflate\r\n\t  };\r\n\r\n\t  // SSL options for Node.js client\r\n\t  opts.pfx = this.pfx;\r\n\t  opts.key = this.key;\r\n\t  opts.passphrase = this.passphrase;\r\n\t  opts.cert = this.cert;\r\n\t  opts.ca = this.ca;\r\n\t  opts.ciphers = this.ciphers;\r\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\r\n\t  if (this.extraHeaders) {\r\n\t\topts.headers = this.extraHeaders;\r\n\t  }\r\n\r\n\t  this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\r\n\r\n\t  if (this.ws.binaryType === undefined) {\r\n\t\tthis.supportsBinary = false;\r\n\t  }\r\n\r\n\t  if (this.ws.supports && this.ws.supports.binary) {\r\n\t\tthis.supportsBinary = true;\r\n\t\tthis.ws.binaryType = 'buffer';\r\n\t  } else {\r\n\t\tthis.ws.binaryType = 'arraybuffer';\r\n\t  }\r\n\r\n\t  this.addEventListeners();\r\n\t};\r\n\r\n\t/**\r\n\t * Adds event listeners to the socket\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tWS.prototype.addEventListeners = function(){\r\n\t  var self = this;\r\n\r\n\t  this.ws.onopen = function(){\r\n\t\tself.onOpen();\r\n\t  };\r\n\t  this.ws.onclose = function(){\r\n\t\tself.onClose();\r\n\t  };\r\n\t  this.ws.onmessage = function(ev){\r\n\t\tself.onData(ev.data);\r\n\t  };\r\n\t  this.ws.onerror = function(e){\r\n\t\tself.onError('websocket error', e);\r\n\t  };\r\n\t};\r\n\r\n\t/**\r\n\t * Override `onData` to use a timer on iOS.\r\n\t * See: https://gist.github.com/mloughran/2052006\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tif ('undefined' != typeof navigator\r\n\t  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\r\n\t  WS.prototype.onData = function(data){\r\n\t\tvar self = this;\r\n\t\tsetTimeout(function(){\r\n\t\t  Transport.prototype.onData.call(self, data);\r\n\t\t}, 0);\r\n\t  };\r\n\t}\r\n\r\n\t/**\r\n\t * Writes data to socket.\r\n\t *\r\n\t * @param {Array} array of packets.\r\n\t * @api private\r\n\t */\r\n\r\n\tWS.prototype.write = function(packets){\r\n\t  var self = this;\r\n\t  this.writable = false;\r\n\r\n\t  // encodePacket efficient as it uses WS framing\r\n\t  // no need for encodePayload\r\n\t  var total = packets.length;\r\n\t  for (var i = 0, l = total; i < l; i++) {\r\n\t\t(function(packet) {\r\n\t\t  parser.encodePacket(packet, self.supportsBinary, function(data) {\r\n\t\t\tif (!BrowserWebSocket) {\r\n\t\t\t  // always create a new object (GH-437)\r\n\t\t\t  var opts = {};\r\n\t\t\t  if (packet.options) {\r\n\t\t\t\topts.compress = packet.options.compress;\r\n\t\t\t  }\r\n\r\n\t\t\t  if (self.perMessageDeflate) {\r\n\t\t\t\tvar len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\r\n\t\t\t\tif (len < self.perMessageDeflate.threshold) {\r\n\t\t\t\t  opts.compress = false;\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t}\r\n\r\n\t\t\t//Sometimes the websocket has already been closed but the browser didn't\r\n\t\t\t//have a chance of informing us about it yet, in that case send will\r\n\t\t\t//throw an error\r\n\t\t\ttry {\r\n\t\t\t  if (BrowserWebSocket) {\r\n\t\t\t\t// TypeError is thrown when passing the second argument on Safari\r\n\t\t\t\tself.ws.send(data);\r\n\t\t\t  } else {\r\n\t\t\t\tself.ws.send(data, opts);\r\n\t\t\t  }\r\n\t\t\t} catch (e){\r\n\t\t\t  debug('websocket closed before onclose event');\r\n\t\t\t}\r\n\r\n\t\t\t--total || done();\r\n\t\t  });\r\n\t\t})(packets[i]);\r\n\t  }\r\n\r\n\t  function done(){\r\n\t\tself.emit('flush');\r\n\r\n\t\t// fake drain\r\n\t\t// defer to next tick to allow Socket to clear writeBuffer\r\n\t\tsetTimeout(function(){\r\n\t\t  self.writable = true;\r\n\t\t  self.emit('drain');\r\n\t\t}, 0);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon close\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tWS.prototype.onClose = function(){\r\n\t  Transport.prototype.onClose.call(this);\r\n\t};\r\n\r\n\t/**\r\n\t * Closes socket.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tWS.prototype.doClose = function(){\r\n\t  if (typeof this.ws !== 'undefined') {\r\n\t\tthis.ws.close();\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Generates uri for connection.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tWS.prototype.uri = function(){\r\n\t  var query = this.query || {};\r\n\t  var schema = this.secure ? 'wss' : 'ws';\r\n\t  var port = '';\r\n\r\n\t  // avoid port if default for schema\r\n\t  if (this.port && (('wss' == schema && this.port != 443)\r\n\t\t|| ('ws' == schema && this.port != 80))) {\r\n\t\tport = ':' + this.port;\r\n\t  }\r\n\r\n\t  // append timestamp to URI\r\n\t  if (this.timestampRequests) {\r\n\t\tquery[this.timestampParam] = yeast();\r\n\t  }\r\n\r\n\t  // communicate binary support capabilities\r\n\t  if (!this.supportsBinary) {\r\n\t\tquery.b64 = 1;\r\n\t  }\r\n\r\n\t  query = parseqs.encode(query);\r\n\r\n\t  // prepend ? to query\r\n\t  if (query.length) {\r\n\t\tquery = '?' + query;\r\n\t  }\r\n\r\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\r\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\r\n\t};\r\n\r\n\t/**\r\n\t * Feature detection for WebSocket.\r\n\t *\r\n\t * @return {Boolean} whether this transport is available.\r\n\t * @api public\r\n\t */\r\n\r\n\tWS.prototype.check = function(){\r\n\t  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\r\n\t};\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"ws\":undefined,\"yeast\":30}],10:[function(_dereq_,module,exports){\r\n\t// browser shim for xmlhttprequest module\r\n\tvar hasCORS = _dereq_('has-cors');\r\n\r\n\tmodule.exports = function(opts) {\r\n\t  var xdomain = opts.xdomain;\r\n\r\n\t  // scheme must be same when usign XDomainRequest\r\n\t  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\r\n\t  var xscheme = opts.xscheme;\r\n\r\n\t  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\r\n\t  // https://github.com/Automattic/engine.io-client/pull/217\r\n\t  var enablesXDR = opts.enablesXDR;\r\n\r\n\t  // XMLHttpRequest can be disabled on IE\r\n\t  try {\r\n\t\tif ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\r\n\t\t  return new XMLHttpRequest();\r\n\t\t}\r\n\t  } catch (e) { }\r\n\r\n\t  // Use XDomainRequest for IE8 if enablesXDR is true\r\n\t  // because loading bar keeps flashing when using jsonp-polling\r\n\t  // https://github.com/yujiosaka/socke.io-ie8-loading-example\r\n\t  try {\r\n\t\tif ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\r\n\t\t  return new XDomainRequest();\r\n\t\t}\r\n\t  } catch (e) { }\r\n\r\n\t  if (!xdomain) {\r\n\t\ttry {\r\n\t\t  return new ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t} catch(e) { }\r\n\t  }\r\n\t}\r\n\r\n\t},{\"has-cors\":22}],11:[function(_dereq_,module,exports){\r\n\tmodule.exports = after\r\n\r\n\tfunction after(count, callback, err_cb) {\r\n\t\tvar bail = false\r\n\t\terr_cb = err_cb || noop\r\n\t\tproxy.count = count\r\n\r\n\t\treturn (count === 0) ? callback() : proxy\r\n\r\n\t\tfunction proxy(err, result) {\r\n\t\t\tif (proxy.count <= 0) {\r\n\t\t\t\tthrow new Error('after called too many times')\r\n\t\t\t}\r\n\t\t\t--proxy.count\r\n\r\n\t\t\t// after first error, rest are passed to err_cb\r\n\t\t\tif (err) {\r\n\t\t\t\tbail = true\r\n\t\t\t\tcallback(err)\r\n\t\t\t\t// future error callbacks will go to error handler\r\n\t\t\t\tcallback = err_cb\r\n\t\t\t} else if (proxy.count === 0 && !bail) {\r\n\t\t\t\tcallback(null, result)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction noop() {}\r\n\r\n\t},{}],12:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * An abstraction for slicing an arraybuffer even when\r\n\t * ArrayBuffer.prototype.slice is not supported\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tmodule.exports = function(arraybuffer, start, end) {\r\n\t  var bytes = arraybuffer.byteLength;\r\n\t  start = start || 0;\r\n\t  end = end || bytes;\r\n\r\n\t  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\r\n\r\n\t  if (start < 0) { start += bytes; }\r\n\t  if (end < 0) { end += bytes; }\r\n\t  if (end > bytes) { end = bytes; }\r\n\r\n\t  if (start >= bytes || start >= end || bytes === 0) {\r\n\t\treturn new ArrayBuffer(0);\r\n\t  }\r\n\r\n\t  var abv = new Uint8Array(arraybuffer);\r\n\t  var result = new Uint8Array(end - start);\r\n\t  for (var i = start, ii = 0; i < end; i++, ii++) {\r\n\t\tresult[ii] = abv[i];\r\n\t  }\r\n\t  return result.buffer;\r\n\t};\r\n\r\n\t},{}],13:[function(_dereq_,module,exports){\r\n\t/*\r\n\t * base64-arraybuffer\r\n\t * https://github.com/niklasvh/base64-arraybuffer\r\n\t *\r\n\t * Copyright (c) 2012 Niklas von Hertzen\r\n\t * Licensed under the MIT license.\r\n\t */\r\n\t(function(chars){\r\n\t  \"use strict\";\r\n\r\n\t  exports.encode = function(arraybuffer) {\r\n\t\tvar bytes = new Uint8Array(arraybuffer),\r\n\t\ti, len = bytes.length, base64 = \"\";\r\n\r\n\t\tfor (i = 0; i < len; i+=3) {\r\n\t\t  base64 += chars[bytes[i] >> 2];\r\n\t\t  base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\r\n\t\t  base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\r\n\t\t  base64 += chars[bytes[i + 2] & 63];\r\n\t\t}\r\n\r\n\t\tif ((len % 3) === 2) {\r\n\t\t  base64 = base64.substring(0, base64.length - 1) + \"=\";\r\n\t\t} else if (len % 3 === 1) {\r\n\t\t  base64 = base64.substring(0, base64.length - 2) + \"==\";\r\n\t\t}\r\n\r\n\t\treturn base64;\r\n\t  };\r\n\r\n\t  exports.decode =  function(base64) {\r\n\t\tvar bufferLength = base64.length * 0.75,\r\n\t\tlen = base64.length, i, p = 0,\r\n\t\tencoded1, encoded2, encoded3, encoded4;\r\n\r\n\t\tif (base64[base64.length - 1] === \"=\") {\r\n\t\t  bufferLength--;\r\n\t\t  if (base64[base64.length - 2] === \"=\") {\r\n\t\t\tbufferLength--;\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tvar arraybuffer = new ArrayBuffer(bufferLength),\r\n\t\tbytes = new Uint8Array(arraybuffer);\r\n\r\n\t\tfor (i = 0; i < len; i+=4) {\r\n\t\t  encoded1 = chars.indexOf(base64[i]);\r\n\t\t  encoded2 = chars.indexOf(base64[i+1]);\r\n\t\t  encoded3 = chars.indexOf(base64[i+2]);\r\n\t\t  encoded4 = chars.indexOf(base64[i+3]);\r\n\r\n\t\t  bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\r\n\t\t  bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n\t\t  bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\r\n\t\t}\r\n\r\n\t\treturn arraybuffer;\r\n\t  };\r\n\t})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\r\n\r\n\t},{}],14:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * Create a blob builder even when vendor prefixes exist\r\n\t */\r\n\r\n\tvar BlobBuilder = global.BlobBuilder\r\n\t  || global.WebKitBlobBuilder\r\n\t  || global.MSBlobBuilder\r\n\t  || global.MozBlobBuilder;\r\n\r\n\t/**\r\n\t * Check if Blob constructor is supported\r\n\t */\r\n\r\n\tvar blobSupported = (function() {\r\n\t  try {\r\n\t\tvar a = new Blob(['hi']);\r\n\t\treturn a.size === 2;\r\n\t  } catch(e) {\r\n\t\treturn false;\r\n\t  }\r\n\t})();\r\n\r\n\t/**\r\n\t * Check if Blob constructor supports ArrayBufferViews\r\n\t * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n\t */\r\n\r\n\tvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n\t  try {\r\n\t\tvar b = new Blob([new Uint8Array([1,2])]);\r\n\t\treturn b.size === 2;\r\n\t  } catch(e) {\r\n\t\treturn false;\r\n\t  }\r\n\t})();\r\n\r\n\t/**\r\n\t * Check if BlobBuilder is supported\r\n\t */\r\n\r\n\tvar blobBuilderSupported = BlobBuilder\r\n\t  && BlobBuilder.prototype.append\r\n\t  && BlobBuilder.prototype.getBlob;\r\n\r\n\t/**\r\n\t * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n\t * Used by BlobBuilder constructor and old browsers that didn't\r\n\t * support it in the Blob constructor.\r\n\t */\r\n\r\n\tfunction mapArrayBufferViews(ary) {\r\n\t  for (var i = 0; i < ary.length; i++) {\r\n\t\tvar chunk = ary[i];\r\n\t\tif (chunk.buffer instanceof ArrayBuffer) {\r\n\t\t  var buf = chunk.buffer;\r\n\r\n\t\t  // if this is a subarray, make a copy so we only\r\n\t\t  // include the subarray region from the underlying buffer\r\n\t\t  if (chunk.byteLength !== buf.byteLength) {\r\n\t\t\tvar copy = new Uint8Array(chunk.byteLength);\r\n\t\t\tcopy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n\t\t\tbuf = copy.buffer;\r\n\t\t  }\r\n\r\n\t\t  ary[i] = buf;\r\n\t\t}\r\n\t  }\r\n\t}\r\n\r\n\tfunction BlobBuilderConstructor(ary, options) {\r\n\t  options = options || {};\r\n\r\n\t  var bb = new BlobBuilder();\r\n\t  mapArrayBufferViews(ary);\r\n\r\n\t  for (var i = 0; i < ary.length; i++) {\r\n\t\tbb.append(ary[i]);\r\n\t  }\r\n\r\n\t  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n\t};\r\n\r\n\tfunction BlobConstructor(ary, options) {\r\n\t  mapArrayBufferViews(ary);\r\n\t  return new Blob(ary, options || {});\r\n\t};\r\n\r\n\tmodule.exports = (function() {\r\n\t  if (blobSupported) {\r\n\t\treturn blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\r\n\t  } else if (blobBuilderSupported) {\r\n\t\treturn BlobBuilderConstructor;\r\n\t  } else {\r\n\t\treturn undefined;\r\n\t  }\r\n\t})();\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{}],15:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Expose `Emitter`.\r\n\t */\r\n\r\n\tmodule.exports = Emitter;\r\n\r\n\t/**\r\n\t * Initialize a new `Emitter`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Emitter(obj) {\r\n\t  if (obj) return mixin(obj);\r\n\t};\r\n\r\n\t/**\r\n\t * Mixin the emitter properties.\r\n\t *\r\n\t * @param {Object} obj\r\n\t * @return {Object}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction mixin(obj) {\r\n\t  for (var key in Emitter.prototype) {\r\n\t\tobj[key] = Emitter.prototype[key];\r\n\t  }\r\n\t  return obj;\r\n\t}\r\n\r\n\t/**\r\n\t * Listen on the given `event` with `fn`.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.on =\r\n\tEmitter.prototype.addEventListener = function(event, fn){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  (this._callbacks[event] = this._callbacks[event] || [])\r\n\t\t.push(fn);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds an `event` listener that will be invoked a single\r\n\t * time then automatically removed.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.once = function(event, fn){\r\n\t  var self = this;\r\n\t  this._callbacks = this._callbacks || {};\r\n\r\n\t  function on() {\r\n\t\tself.off(event, on);\r\n\t\tfn.apply(this, arguments);\r\n\t  }\r\n\r\n\t  on.fn = fn;\r\n\t  this.on(event, on);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove the given callback for `event` or all\r\n\t * registered callbacks.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.off =\r\n\tEmitter.prototype.removeListener =\r\n\tEmitter.prototype.removeAllListeners =\r\n\tEmitter.prototype.removeEventListener = function(event, fn){\r\n\t  this._callbacks = this._callbacks || {};\r\n\r\n\t  // all\r\n\t  if (0 == arguments.length) {\r\n\t\tthis._callbacks = {};\r\n\t\treturn this;\r\n\t  }\r\n\r\n\t  // specific event\r\n\t  var callbacks = this._callbacks[event];\r\n\t  if (!callbacks) return this;\r\n\r\n\t  // remove all handlers\r\n\t  if (1 == arguments.length) {\r\n\t\tdelete this._callbacks[event];\r\n\t\treturn this;\r\n\t  }\r\n\r\n\t  // remove specific handler\r\n\t  var cb;\r\n\t  for (var i = 0; i < callbacks.length; i++) {\r\n\t\tcb = callbacks[i];\r\n\t\tif (cb === fn || cb.fn === fn) {\r\n\t\t  callbacks.splice(i, 1);\r\n\t\t  break;\r\n\t\t}\r\n\t  }\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Emit `event` with the given args.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Mixed} ...\r\n\t * @return {Emitter}\r\n\t */\r\n\r\n\tEmitter.prototype.emit = function(event){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  var args = [].slice.call(arguments, 1)\r\n\t\t, callbacks = this._callbacks[event];\r\n\r\n\t  if (callbacks) {\r\n\t\tcallbacks = callbacks.slice(0);\r\n\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\r\n\t\t  callbacks[i].apply(this, args);\r\n\t\t}\r\n\t  }\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Return array of callbacks for `event`.\r\n\t *\r\n\t * @param {String} event\r\n\t * @return {Array}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.listeners = function(event){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  return this._callbacks[event] || [];\r\n\t};\r\n\r\n\t/**\r\n\t * Check if this emitter has `event` handlers.\r\n\t *\r\n\t * @param {String} event\r\n\t * @return {Boolean}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.hasListeners = function(event){\r\n\t  return !! this.listeners(event).length;\r\n\t};\r\n\r\n\t},{}],16:[function(_dereq_,module,exports){\r\n\r\n\tmodule.exports = function(a, b){\r\n\t  var fn = function(){};\r\n\t  fn.prototype = b.prototype;\r\n\t  a.prototype = new fn;\r\n\t  a.prototype.constructor = a;\r\n\t};\r\n\t},{}],17:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * This is the web browser implementation of `debug()`.\r\n\t *\r\n\t * Expose `debug()` as the module.\r\n\t */\r\n\r\n\texports = module.exports = _dereq_('./debug');\r\n\texports.log = log;\r\n\texports.formatArgs = formatArgs;\r\n\texports.save = save;\r\n\texports.load = load;\r\n\texports.useColors = useColors;\r\n\texports.storage = 'undefined' != typeof chrome\r\n\t\t\t\t   && 'undefined' != typeof chrome.storage\r\n\t\t\t\t\t  ? chrome.storage.local\r\n\t\t\t\t\t  : localstorage();\r\n\r\n\t/**\r\n\t * Colors.\r\n\t */\r\n\r\n\texports.colors = [\r\n\t  'lightseagreen',\r\n\t  'forestgreen',\r\n\t  'goldenrod',\r\n\t  'dodgerblue',\r\n\t  'darkorchid',\r\n\t  'crimson'\r\n\t];\r\n\r\n\t/**\r\n\t * Currently only WebKit-based Web Inspectors, Firefox >= v31,\r\n\t * and the Firebug extension (any Firefox version) are known\r\n\t * to support \"%c\" CSS customizations.\r\n\t *\r\n\t * TODO: add a `localStorage` variable to explicitly enable/disable colors\r\n\t */\r\n\r\n\tfunction useColors() {\r\n\t  // is webkit? http://stackoverflow.com/a/16459606/376773\r\n\t  return ('WebkitAppearance' in document.documentElement.style) ||\r\n\t\t// is firebug? http://stackoverflow.com/a/398120/376773\r\n\t\t(window.console && (console.firebug || (console.exception && console.table))) ||\r\n\t\t// is firefox >= v31?\r\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\r\n\t\t(navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\r\n\t}\r\n\r\n\t/**\r\n\t * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\r\n\t */\r\n\r\n\texports.formatters.j = function(v) {\r\n\t  return JSON.stringify(v);\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Colorize log arguments if enabled.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction formatArgs() {\r\n\t  var args = arguments;\r\n\t  var useColors = this.useColors;\r\n\r\n\t  args[0] = (useColors ? '%c' : '')\r\n\t\t+ this.namespace\r\n\t\t+ (useColors ? ' %c' : ' ')\r\n\t\t+ args[0]\r\n\t\t+ (useColors ? '%c ' : ' ')\r\n\t\t+ '+' + exports.humanize(this.diff);\r\n\r\n\t  if (!useColors) return args;\r\n\r\n\t  var c = 'color: ' + this.color;\r\n\t  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\r\n\r\n\t  // the final \"%c\" is somewhat tricky, because there could be other\r\n\t  // arguments passed either before or after the %c, so we need to\r\n\t  // figure out the correct index to insert the CSS into\r\n\t  var index = 0;\r\n\t  var lastC = 0;\r\n\t  args[0].replace(/%[a-z%]/g, function(match) {\r\n\t\tif ('%%' === match) return;\r\n\t\tindex++;\r\n\t\tif ('%c' === match) {\r\n\t\t  // we only are interested in the *last* %c\r\n\t\t  // (the user may have provided their own)\r\n\t\t  lastC = index;\r\n\t\t}\r\n\t  });\r\n\r\n\t  args.splice(lastC, 0, c);\r\n\t  return args;\r\n\t}\r\n\r\n\t/**\r\n\t * Invokes `console.log()` when available.\r\n\t * No-op when `console.log` is not a \"function\".\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction log() {\r\n\t  // this hackery is required for IE8/9, where\r\n\t  // the `console.log` function doesn't have 'apply'\r\n\t  return 'object' === typeof console\r\n\t\t&& console.log\r\n\t\t&& Function.prototype.apply.call(console.log, console, arguments);\r\n\t}\r\n\r\n\t/**\r\n\t * Save `namespaces`.\r\n\t *\r\n\t * @param {String} namespaces\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction save(namespaces) {\r\n\t  try {\r\n\t\tif (null == namespaces) {\r\n\t\t  exports.storage.removeItem('debug');\r\n\t\t} else {\r\n\t\t  exports.storage.debug = namespaces;\r\n\t\t}\r\n\t  } catch(e) {}\r\n\t}\r\n\r\n\t/**\r\n\t * Load `namespaces`.\r\n\t *\r\n\t * @return {String} returns the previously persisted debug modes\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction load() {\r\n\t  var r;\r\n\t  try {\r\n\t\tr = exports.storage.debug;\r\n\t  } catch(e) {}\r\n\t  return r;\r\n\t}\r\n\r\n\t/**\r\n\t * Enable namespaces listed in `localStorage.debug` initially.\r\n\t */\r\n\r\n\texports.enable(load());\r\n\r\n\t/**\r\n\t * Localstorage attempts to return the localstorage.\r\n\t *\r\n\t * This is necessary because safari throws\r\n\t * when a user disables cookies/localstorage\r\n\t * and you attempt to access it.\r\n\t *\r\n\t * @return {LocalStorage}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction localstorage(){\r\n\t  try {\r\n\t\treturn window.localStorage;\r\n\t  } catch (e) {}\r\n\t}\r\n\r\n\t},{\"./debug\":18}],18:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * This is the common logic for both the Node.js and web browser\r\n\t * implementations of `debug()`.\r\n\t *\r\n\t * Expose `debug()` as the module.\r\n\t */\r\n\r\n\texports = module.exports = debug;\r\n\texports.coerce = coerce;\r\n\texports.disable = disable;\r\n\texports.enable = enable;\r\n\texports.enabled = enabled;\r\n\texports.humanize = _dereq_('ms');\r\n\r\n\t/**\r\n\t * The currently active debug mode names, and names to skip.\r\n\t */\r\n\r\n\texports.names = [];\r\n\texports.skips = [];\r\n\r\n\t/**\r\n\t * Map of special \"%n\" handling functions, for the debug \"format\" argument.\r\n\t *\r\n\t * Valid key names are a single, lowercased letter, i.e. \"n\".\r\n\t */\r\n\r\n\texports.formatters = {};\r\n\r\n\t/**\r\n\t * Previously assigned color.\r\n\t */\r\n\r\n\tvar prevColor = 0;\r\n\r\n\t/**\r\n\t * Previous log timestamp.\r\n\t */\r\n\r\n\tvar prevTime;\r\n\r\n\t/**\r\n\t * Select a color.\r\n\t *\r\n\t * @return {Number}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction selectColor() {\r\n\t  return exports.colors[prevColor++ % exports.colors.length];\r\n\t}\r\n\r\n\t/**\r\n\t * Create a debugger with the given `namespace`.\r\n\t *\r\n\t * @param {String} namespace\r\n\t * @return {Function}\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction debug(namespace) {\r\n\r\n\t  // define the `disabled` version\r\n\t  function disabled() {\r\n\t  }\r\n\t  disabled.enabled = false;\r\n\r\n\t  // define the `enabled` version\r\n\t  function enabled() {\r\n\r\n\t\tvar self = enabled;\r\n\r\n\t\t// set `diff` timestamp\r\n\t\tvar curr = +new Date();\r\n\t\tvar ms = curr - (prevTime || curr);\r\n\t\tself.diff = ms;\r\n\t\tself.prev = prevTime;\r\n\t\tself.curr = curr;\r\n\t\tprevTime = curr;\r\n\r\n\t\t// add the `color` if not set\r\n\t\tif (null == self.useColors) self.useColors = exports.useColors();\r\n\t\tif (null == self.color && self.useColors) self.color = selectColor();\r\n\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\r\n\t\targs[0] = exports.coerce(args[0]);\r\n\r\n\t\tif ('string' !== typeof args[0]) {\r\n\t\t  // anything else let's inspect with %o\r\n\t\t  args = ['%o'].concat(args);\r\n\t\t}\r\n\r\n\t\t// apply any `formatters` transformations\r\n\t\tvar index = 0;\r\n\t\targs[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\r\n\t\t  // if we encounter an escaped % then don't increase the array index\r\n\t\t  if (match === '%%') return match;\r\n\t\t  index++;\r\n\t\t  var formatter = exports.formatters[format];\r\n\t\t  if ('function' === typeof formatter) {\r\n\t\t\tvar val = args[index];\r\n\t\t\tmatch = formatter.call(self, val);\r\n\r\n\t\t\t// now we need to remove `args[index]` since it's inlined in the `format`\r\n\t\t\targs.splice(index, 1);\r\n\t\t\tindex--;\r\n\t\t  }\r\n\t\t  return match;\r\n\t\t});\r\n\r\n\t\tif ('function' === typeof exports.formatArgs) {\r\n\t\t  args = exports.formatArgs.apply(self, args);\r\n\t\t}\r\n\t\tvar logFn = enabled.log || exports.log || console.log.bind(console);\r\n\t\tlogFn.apply(self, args);\r\n\t  }\r\n\t  enabled.enabled = true;\r\n\r\n\t  var fn = exports.enabled(namespace) ? enabled : disabled;\r\n\r\n\t  fn.namespace = namespace;\r\n\r\n\t  return fn;\r\n\t}\r\n\r\n\t/**\r\n\t * Enables a debug mode by namespaces. This can include modes\r\n\t * separated by a colon and wildcards.\r\n\t *\r\n\t * @param {String} namespaces\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction enable(namespaces) {\r\n\t  exports.save(namespaces);\r\n\r\n\t  var split = (namespaces || '').split(/[\\s,]+/);\r\n\t  var len = split.length;\r\n\r\n\t  for (var i = 0; i < len; i++) {\r\n\t\tif (!split[i]) continue; // ignore empty strings\r\n\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\r\n\t\tif (namespaces[0] === '-') {\r\n\t\t  exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\r\n\t\t} else {\r\n\t\t  exports.names.push(new RegExp('^' + namespaces + '$'));\r\n\t\t}\r\n\t  }\r\n\t}\r\n\r\n\t/**\r\n\t * Disable debug output.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction disable() {\r\n\t  exports.enable('');\r\n\t}\r\n\r\n\t/**\r\n\t * Returns true if the given mode name is enabled, false otherwise.\r\n\t *\r\n\t * @param {String} name\r\n\t * @return {Boolean}\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction enabled(name) {\r\n\t  var i, len;\r\n\t  for (i = 0, len = exports.skips.length; i < len; i++) {\r\n\t\tif (exports.skips[i].test(name)) {\r\n\t\t  return false;\r\n\t\t}\r\n\t  }\r\n\t  for (i = 0, len = exports.names.length; i < len; i++) {\r\n\t\tif (exports.names[i].test(name)) {\r\n\t\t  return true;\r\n\t\t}\r\n\t  }\r\n\t  return false;\r\n\t}\r\n\r\n\t/**\r\n\t * Coerce `val`.\r\n\t *\r\n\t * @param {Mixed} val\r\n\t * @return {Mixed}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction coerce(val) {\r\n\t  if (val instanceof Error) return val.stack || val.message;\r\n\t  return val;\r\n\t}\r\n\r\n\t},{\"ms\":25}],19:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar keys = _dereq_('./keys');\r\n\tvar hasBinary = _dereq_('has-binary');\r\n\tvar sliceBuffer = _dereq_('arraybuffer.slice');\r\n\tvar base64encoder = _dereq_('base64-arraybuffer');\r\n\tvar after = _dereq_('after');\r\n\tvar utf8 = _dereq_('utf8');\r\n\r\n\t/**\r\n\t * Check if we are running an android browser. That requires us to use\r\n\t * ArrayBuffer with polling transports...\r\n\t *\r\n\t * http://ghinda.net/jpeg-blob-ajax-android/\r\n\t */\r\n\r\n\tvar isAndroid = navigator.userAgent.match(/Android/i);\r\n\r\n\t/**\r\n\t * Check if we are running in PhantomJS.\r\n\t * Uploading a Blob with PhantomJS does not work correctly, as reported here:\r\n\t * https://github.com/ariya/phantomjs/issues/11395\r\n\t * @type boolean\r\n\t */\r\n\tvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\r\n\r\n\t/**\r\n\t * When true, avoids using Blobs to encode payloads.\r\n\t * @type boolean\r\n\t */\r\n\tvar dontSendBlobs = isAndroid || isPhantomJS;\r\n\r\n\t/**\r\n\t * Current protocol version.\r\n\t */\r\n\r\n\texports.protocol = 3;\r\n\r\n\t/**\r\n\t * Packet types.\r\n\t */\r\n\r\n\tvar packets = exports.packets = {\r\n\t\topen:     0    // non-ws\r\n\t  , close:    1    // non-ws\r\n\t  , ping:     2\r\n\t  , pong:     3\r\n\t  , message:  4\r\n\t  , upgrade:  5\r\n\t  , noop:     6\r\n\t};\r\n\r\n\tvar packetslist = keys(packets);\r\n\r\n\t/**\r\n\t * Premade error packet.\r\n\t */\r\n\r\n\tvar err = { type: 'error', data: 'parser error' };\r\n\r\n\t/**\r\n\t * Create a blob api even for blob builder when vendor prefixes exist\r\n\t */\r\n\r\n\tvar Blob = _dereq_('blob');\r\n\r\n\t/**\r\n\t * Encodes a packet.\r\n\t *\r\n\t *     <packet type id> [ <data> ]\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t *     5hello world\r\n\t *     3\r\n\t *     4\r\n\t *\r\n\t * Binary is encoded in an identical principle\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\texports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\r\n\t  if ('function' == typeof supportsBinary) {\r\n\t\tcallback = supportsBinary;\r\n\t\tsupportsBinary = false;\r\n\t  }\r\n\r\n\t  if ('function' == typeof utf8encode) {\r\n\t\tcallback = utf8encode;\r\n\t\tutf8encode = null;\r\n\t  }\r\n\r\n\t  var data = (packet.data === undefined)\r\n\t\t? undefined\r\n\t\t: packet.data.buffer || packet.data;\r\n\r\n\t  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\r\n\t\treturn encodeArrayBuffer(packet, supportsBinary, callback);\r\n\t  } else if (Blob && data instanceof global.Blob) {\r\n\t\treturn encodeBlob(packet, supportsBinary, callback);\r\n\t  }\r\n\r\n\t  // might be an object with { base64: true, data: dataAsBase64String }\r\n\t  if (data && data.base64) {\r\n\t\treturn encodeBase64Object(packet, callback);\r\n\t  }\r\n\r\n\t  // Sending data as a utf-8 string\r\n\t  var encoded = packets[packet.type];\r\n\r\n\t  // data fragment is optional\r\n\t  if (undefined !== packet.data) {\r\n\t\tencoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\r\n\t  }\r\n\r\n\t  return callback('' + encoded);\r\n\r\n\t};\r\n\r\n\tfunction encodeBase64Object(packet, callback) {\r\n\t  // packet data is an object { base64: true, data: dataAsBase64String }\r\n\t  var message = 'b' + exports.packets[packet.type] + packet.data.data;\r\n\t  return callback(message);\r\n\t}\r\n\r\n\t/**\r\n\t * Encode packet helpers for binary types\r\n\t */\r\n\r\n\tfunction encodeArrayBuffer(packet, supportsBinary, callback) {\r\n\t  if (!supportsBinary) {\r\n\t\treturn exports.encodeBase64Packet(packet, callback);\r\n\t  }\r\n\r\n\t  var data = packet.data;\r\n\t  var contentArray = new Uint8Array(data);\r\n\t  var resultBuffer = new Uint8Array(1 + data.byteLength);\r\n\r\n\t  resultBuffer[0] = packets[packet.type];\r\n\t  for (var i = 0; i < contentArray.length; i++) {\r\n\t\tresultBuffer[i+1] = contentArray[i];\r\n\t  }\r\n\r\n\t  return callback(resultBuffer.buffer);\r\n\t}\r\n\r\n\tfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\r\n\t  if (!supportsBinary) {\r\n\t\treturn exports.encodeBase64Packet(packet, callback);\r\n\t  }\r\n\r\n\t  var fr = new FileReader();\r\n\t  fr.onload = function() {\r\n\t\tpacket.data = fr.result;\r\n\t\texports.encodePacket(packet, supportsBinary, true, callback);\r\n\t  };\r\n\t  return fr.readAsArrayBuffer(packet.data);\r\n\t}\r\n\r\n\tfunction encodeBlob(packet, supportsBinary, callback) {\r\n\t  if (!supportsBinary) {\r\n\t\treturn exports.encodeBase64Packet(packet, callback);\r\n\t  }\r\n\r\n\t  if (dontSendBlobs) {\r\n\t\treturn encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\r\n\t  }\r\n\r\n\t  var length = new Uint8Array(1);\r\n\t  length[0] = packets[packet.type];\r\n\t  var blob = new Blob([length.buffer, packet.data]);\r\n\r\n\t  return callback(blob);\r\n\t}\r\n\r\n\t/**\r\n\t * Encodes a packet with binary data in a base64 string\r\n\t *\r\n\t * @param {Object} packet, has `type` and `data`\r\n\t * @return {String} base64 encoded message\r\n\t */\r\n\r\n\texports.encodeBase64Packet = function(packet, callback) {\r\n\t  var message = 'b' + exports.packets[packet.type];\r\n\t  if (Blob && packet.data instanceof global.Blob) {\r\n\t\tvar fr = new FileReader();\r\n\t\tfr.onload = function() {\r\n\t\t  var b64 = fr.result.split(',')[1];\r\n\t\t  callback(message + b64);\r\n\t\t};\r\n\t\treturn fr.readAsDataURL(packet.data);\r\n\t  }\r\n\r\n\t  var b64data;\r\n\t  try {\r\n\t\tb64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\r\n\t  } catch (e) {\r\n\t\t// iPhone Safari doesn't let you apply with typed arrays\r\n\t\tvar typed = new Uint8Array(packet.data);\r\n\t\tvar basic = new Array(typed.length);\r\n\t\tfor (var i = 0; i < typed.length; i++) {\r\n\t\t  basic[i] = typed[i];\r\n\t\t}\r\n\t\tb64data = String.fromCharCode.apply(null, basic);\r\n\t  }\r\n\t  message += global.btoa(b64data);\r\n\t  return callback(message);\r\n\t};\r\n\r\n\t/**\r\n\t * Decodes a packet. Changes format to Blob if requested.\r\n\t *\r\n\t * @return {Object} with `type` and `data` (if any)\r\n\t * @api private\r\n\t */\r\n\r\n\texports.decodePacket = function (data, binaryType, utf8decode) {\r\n\t  // String data\r\n\t  if (typeof data == 'string' || data === undefined) {\r\n\t\tif (data.charAt(0) == 'b') {\r\n\t\t  return exports.decodeBase64Packet(data.substr(1), binaryType);\r\n\t\t}\r\n\r\n\t\tif (utf8decode) {\r\n\t\t  try {\r\n\t\t\tdata = utf8.decode(data);\r\n\t\t  } catch (e) {\r\n\t\t\treturn err;\r\n\t\t  }\r\n\t\t}\r\n\t\tvar type = data.charAt(0);\r\n\r\n\t\tif (Number(type) != type || !packetslist[type]) {\r\n\t\t  return err;\r\n\t\t}\r\n\r\n\t\tif (data.length > 1) {\r\n\t\t  return { type: packetslist[type], data: data.substring(1) };\r\n\t\t} else {\r\n\t\t  return { type: packetslist[type] };\r\n\t\t}\r\n\t  }\r\n\r\n\t  var asArray = new Uint8Array(data);\r\n\t  var type = asArray[0];\r\n\t  var rest = sliceBuffer(data, 1);\r\n\t  if (Blob && binaryType === 'blob') {\r\n\t\trest = new Blob([rest]);\r\n\t  }\r\n\t  return { type: packetslist[type], data: rest };\r\n\t};\r\n\r\n\t/**\r\n\t * Decodes a packet encoded in a base64 string\r\n\t *\r\n\t * @param {String} base64 encoded message\r\n\t * @return {Object} with `type` and `data` (if any)\r\n\t */\r\n\r\n\texports.decodeBase64Packet = function(msg, binaryType) {\r\n\t  var type = packetslist[msg.charAt(0)];\r\n\t  if (!global.ArrayBuffer) {\r\n\t\treturn { type: type, data: { base64: true, data: msg.substr(1) } };\r\n\t  }\r\n\r\n\t  var data = base64encoder.decode(msg.substr(1));\r\n\r\n\t  if (binaryType === 'blob' && Blob) {\r\n\t\tdata = new Blob([data]);\r\n\t  }\r\n\r\n\t  return { type: type, data: data };\r\n\t};\r\n\r\n\t/**\r\n\t * Encodes multiple messages (payload).\r\n\t *\r\n\t *     <length>:data\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t *     11:hello world2:hi\r\n\t *\r\n\t * If any contents are binary, they will be encoded as base64 strings. Base64\r\n\t * encoded strings are marked with a b before the length specifier\r\n\t *\r\n\t * @param {Array} packets\r\n\t * @api private\r\n\t */\r\n\r\n\texports.encodePayload = function (packets, supportsBinary, callback) {\r\n\t  if (typeof supportsBinary == 'function') {\r\n\t\tcallback = supportsBinary;\r\n\t\tsupportsBinary = null;\r\n\t  }\r\n\r\n\t  var isBinary = hasBinary(packets);\r\n\r\n\t  if (supportsBinary && isBinary) {\r\n\t\tif (Blob && !dontSendBlobs) {\r\n\t\t  return exports.encodePayloadAsBlob(packets, callback);\r\n\t\t}\r\n\r\n\t\treturn exports.encodePayloadAsArrayBuffer(packets, callback);\r\n\t  }\r\n\r\n\t  if (!packets.length) {\r\n\t\treturn callback('0:');\r\n\t  }\r\n\r\n\t  function setLengthHeader(message) {\r\n\t\treturn message.length + ':' + message;\r\n\t  }\r\n\r\n\t  function encodeOne(packet, doneCallback) {\r\n\t\texports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\r\n\t\t  doneCallback(null, setLengthHeader(message));\r\n\t\t});\r\n\t  }\r\n\r\n\t  map(packets, encodeOne, function(err, results) {\r\n\t\treturn callback(results.join(''));\r\n\t  });\r\n\t};\r\n\r\n\t/**\r\n\t * Async array map using after\r\n\t */\r\n\r\n\tfunction map(ary, each, done) {\r\n\t  var result = new Array(ary.length);\r\n\t  var next = after(ary.length, done);\r\n\r\n\t  var eachWithIndex = function(i, el, cb) {\r\n\t\teach(el, function(error, msg) {\r\n\t\t  result[i] = msg;\r\n\t\t  cb(error, result);\r\n\t\t});\r\n\t  };\r\n\r\n\t  for (var i = 0; i < ary.length; i++) {\r\n\t\teachWithIndex(i, ary[i], next);\r\n\t  }\r\n\t}\r\n\r\n\t/*\r\n\t * Decodes data when a payload is maybe expected. Possible binary contents are\r\n\t * decoded from their base64 representation\r\n\t *\r\n\t * @param {String} data, callback method\r\n\t * @api public\r\n\t */\r\n\r\n\texports.decodePayload = function (data, binaryType, callback) {\r\n\t  if (typeof data != 'string') {\r\n\t\treturn exports.decodePayloadAsBinary(data, binaryType, callback);\r\n\t  }\r\n\r\n\t  if (typeof binaryType === 'function') {\r\n\t\tcallback = binaryType;\r\n\t\tbinaryType = null;\r\n\t  }\r\n\r\n\t  var packet;\r\n\t  if (data == '') {\r\n\t\t// parser error - ignoring payload\r\n\t\treturn callback(err, 0, 1);\r\n\t  }\r\n\r\n\t  var length = ''\r\n\t\t, n, msg;\r\n\r\n\t  for (var i = 0, l = data.length; i < l; i++) {\r\n\t\tvar chr = data.charAt(i);\r\n\r\n\t\tif (':' != chr) {\r\n\t\t  length += chr;\r\n\t\t} else {\r\n\t\t  if ('' == length || (length != (n = Number(length)))) {\r\n\t\t\t// parser error - ignoring payload\r\n\t\t\treturn callback(err, 0, 1);\r\n\t\t  }\r\n\r\n\t\t  msg = data.substr(i + 1, n);\r\n\r\n\t\t  if (length != msg.length) {\r\n\t\t\t// parser error - ignoring payload\r\n\t\t\treturn callback(err, 0, 1);\r\n\t\t  }\r\n\r\n\t\t  if (msg.length) {\r\n\t\t\tpacket = exports.decodePacket(msg, binaryType, true);\r\n\r\n\t\t\tif (err.type == packet.type && err.data == packet.data) {\r\n\t\t\t  // parser error in individual packet - ignoring payload\r\n\t\t\t  return callback(err, 0, 1);\r\n\t\t\t}\r\n\r\n\t\t\tvar ret = callback(packet, i + n, l);\r\n\t\t\tif (false === ret) return;\r\n\t\t  }\r\n\r\n\t\t  // advance cursor\r\n\t\t  i += n;\r\n\t\t  length = '';\r\n\t\t}\r\n\t  }\r\n\r\n\t  if (length != '') {\r\n\t\t// parser error - ignoring payload\r\n\t\treturn callback(err, 0, 1);\r\n\t  }\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Encodes multiple messages (payload) as binary.\r\n\t *\r\n\t * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\r\n\t * 255><data>\r\n\t *\r\n\t * Example:\r\n\t * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\r\n\t *\r\n\t * @param {Array} packets\r\n\t * @return {ArrayBuffer} encoded payload\r\n\t * @api private\r\n\t */\r\n\r\n\texports.encodePayloadAsArrayBuffer = function(packets, callback) {\r\n\t  if (!packets.length) {\r\n\t\treturn callback(new ArrayBuffer(0));\r\n\t  }\r\n\r\n\t  function encodeOne(packet, doneCallback) {\r\n\t\texports.encodePacket(packet, true, true, function(data) {\r\n\t\t  return doneCallback(null, data);\r\n\t\t});\r\n\t  }\r\n\r\n\t  map(packets, encodeOne, function(err, encodedPackets) {\r\n\t\tvar totalLength = encodedPackets.reduce(function(acc, p) {\r\n\t\t  var len;\r\n\t\t  if (typeof p === 'string'){\r\n\t\t\tlen = p.length;\r\n\t\t  } else {\r\n\t\t\tlen = p.byteLength;\r\n\t\t  }\r\n\t\t  return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\r\n\t\t}, 0);\r\n\r\n\t\tvar resultArray = new Uint8Array(totalLength);\r\n\r\n\t\tvar bufferIndex = 0;\r\n\t\tencodedPackets.forEach(function(p) {\r\n\t\t  var isString = typeof p === 'string';\r\n\t\t  var ab = p;\r\n\t\t  if (isString) {\r\n\t\t\tvar view = new Uint8Array(p.length);\r\n\t\t\tfor (var i = 0; i < p.length; i++) {\r\n\t\t\t  view[i] = p.charCodeAt(i);\r\n\t\t\t}\r\n\t\t\tab = view.buffer;\r\n\t\t  }\r\n\r\n\t\t  if (isString) { // not true binary\r\n\t\t\tresultArray[bufferIndex++] = 0;\r\n\t\t  } else { // true binary\r\n\t\t\tresultArray[bufferIndex++] = 1;\r\n\t\t  }\r\n\r\n\t\t  var lenStr = ab.byteLength.toString();\r\n\t\t  for (var i = 0; i < lenStr.length; i++) {\r\n\t\t\tresultArray[bufferIndex++] = parseInt(lenStr[i]);\r\n\t\t  }\r\n\t\t  resultArray[bufferIndex++] = 255;\r\n\r\n\t\t  var view = new Uint8Array(ab);\r\n\t\t  for (var i = 0; i < view.length; i++) {\r\n\t\t\tresultArray[bufferIndex++] = view[i];\r\n\t\t  }\r\n\t\t});\r\n\r\n\t\treturn callback(resultArray.buffer);\r\n\t  });\r\n\t};\r\n\r\n\t/**\r\n\t * Encode as Blob\r\n\t */\r\n\r\n\texports.encodePayloadAsBlob = function(packets, callback) {\r\n\t  function encodeOne(packet, doneCallback) {\r\n\t\texports.encodePacket(packet, true, true, function(encoded) {\r\n\t\t  var binaryIdentifier = new Uint8Array(1);\r\n\t\t  binaryIdentifier[0] = 1;\r\n\t\t  if (typeof encoded === 'string') {\r\n\t\t\tvar view = new Uint8Array(encoded.length);\r\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\r\n\t\t\t  view[i] = encoded.charCodeAt(i);\r\n\t\t\t}\r\n\t\t\tencoded = view.buffer;\r\n\t\t\tbinaryIdentifier[0] = 0;\r\n\t\t  }\r\n\r\n\t\t  var len = (encoded instanceof ArrayBuffer)\r\n\t\t\t? encoded.byteLength\r\n\t\t\t: encoded.size;\r\n\r\n\t\t  var lenStr = len.toString();\r\n\t\t  var lengthAry = new Uint8Array(lenStr.length + 1);\r\n\t\t  for (var i = 0; i < lenStr.length; i++) {\r\n\t\t\tlengthAry[i] = parseInt(lenStr[i]);\r\n\t\t  }\r\n\t\t  lengthAry[lenStr.length] = 255;\r\n\r\n\t\t  if (Blob) {\r\n\t\t\tvar blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\r\n\t\t\tdoneCallback(null, blob);\r\n\t\t  }\r\n\t\t});\r\n\t  }\r\n\r\n\t  map(packets, encodeOne, function(err, results) {\r\n\t\treturn callback(new Blob(results));\r\n\t  });\r\n\t};\r\n\r\n\t/*\r\n\t * Decodes data when a payload is maybe expected. Strings are decoded by\r\n\t * interpreting each byte as a key code for entries marked to start with 0. See\r\n\t * description of encodePayloadAsBinary\r\n\t *\r\n\t * @param {ArrayBuffer} data, callback method\r\n\t * @api public\r\n\t */\r\n\r\n\texports.decodePayloadAsBinary = function (data, binaryType, callback) {\r\n\t  if (typeof binaryType === 'function') {\r\n\t\tcallback = binaryType;\r\n\t\tbinaryType = null;\r\n\t  }\r\n\r\n\t  var bufferTail = data;\r\n\t  var buffers = [];\r\n\r\n\t  var numberTooLong = false;\r\n\t  while (bufferTail.byteLength > 0) {\r\n\t\tvar tailArray = new Uint8Array(bufferTail);\r\n\t\tvar isString = tailArray[0] === 0;\r\n\t\tvar msgLength = '';\r\n\r\n\t\tfor (var i = 1; ; i++) {\r\n\t\t  if (tailArray[i] == 255) break;\r\n\r\n\t\t  if (msgLength.length > 310) {\r\n\t\t\tnumberTooLong = true;\r\n\t\t\tbreak;\r\n\t\t  }\r\n\r\n\t\t  msgLength += tailArray[i];\r\n\t\t}\r\n\r\n\t\tif(numberTooLong) return callback(err, 0, 1);\r\n\r\n\t\tbufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\r\n\t\tmsgLength = parseInt(msgLength);\r\n\r\n\t\tvar msg = sliceBuffer(bufferTail, 0, msgLength);\r\n\t\tif (isString) {\r\n\t\t  try {\r\n\t\t\tmsg = String.fromCharCode.apply(null, new Uint8Array(msg));\r\n\t\t  } catch (e) {\r\n\t\t\t// iPhone Safari doesn't let you apply to typed arrays\r\n\t\t\tvar typed = new Uint8Array(msg);\r\n\t\t\tmsg = '';\r\n\t\t\tfor (var i = 0; i < typed.length; i++) {\r\n\t\t\t  msg += String.fromCharCode(typed[i]);\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tbuffers.push(msg);\r\n\t\tbufferTail = sliceBuffer(bufferTail, msgLength);\r\n\t  }\r\n\r\n\t  var total = buffers.length;\r\n\t  buffers.forEach(function(buffer, i) {\r\n\t\tcallback(exports.decodePacket(buffer, binaryType, true), i, total);\r\n\t  });\r\n\t};\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"./keys\":20,\"after\":11,\"arraybuffer.slice\":12,\"base64-arraybuffer\":13,\"blob\":14,\"has-binary\":21,\"utf8\":29}],20:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Gets the keys for an object.\r\n\t *\r\n\t * @return {Array} keys\r\n\t * @api private\r\n\t */\r\n\r\n\tmodule.exports = Object.keys || function keys (obj){\r\n\t  var arr = [];\r\n\t  var has = Object.prototype.hasOwnProperty;\r\n\r\n\t  for (var i in obj) {\r\n\t\tif (has.call(obj, i)) {\r\n\t\t  arr.push(i);\r\n\t\t}\r\n\t  }\r\n\t  return arr;\r\n\t};\r\n\r\n\t},{}],21:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\r\n\t/*\r\n\t * Module requirements.\r\n\t */\r\n\r\n\tvar isArray = _dereq_('isarray');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = hasBinary;\r\n\r\n\t/**\r\n\t * Checks for binary data.\r\n\t *\r\n\t * Right now only Buffer and ArrayBuffer are supported..\r\n\t *\r\n\t * @param {Object} anything\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction hasBinary(data) {\r\n\r\n\t  function _hasBinary(obj) {\r\n\t\tif (!obj) return false;\r\n\r\n\t\tif ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\r\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\r\n\t\t\t (global.Blob && obj instanceof Blob) ||\r\n\t\t\t (global.File && obj instanceof File)\r\n\t\t\t) {\r\n\t\t  return true;\r\n\t\t}\r\n\r\n\t\tif (isArray(obj)) {\r\n\t\t  for (var i = 0; i < obj.length; i++) {\r\n\t\t\t  if (_hasBinary(obj[i])) {\r\n\t\t\t\t  return true;\r\n\t\t\t  }\r\n\t\t  }\r\n\t\t} else if (obj && 'object' == typeof obj) {\r\n\t\t  if (obj.toJSON) {\r\n\t\t\tobj = obj.toJSON();\r\n\t\t  }\r\n\r\n\t\t  for (var key in obj) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\r\n\t\t\t  return true;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t  }\r\n\r\n\t  return _hasBinary(data);\r\n\t}\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"isarray\":24}],22:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t *\r\n\t * Logic borrowed from Modernizr:\r\n\t *\r\n\t *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\r\n\t */\r\n\r\n\ttry {\r\n\t  module.exports = typeof XMLHttpRequest !== 'undefined' &&\r\n\t\t'withCredentials' in new XMLHttpRequest();\r\n\t} catch (err) {\r\n\t  // if XMLHttp support is disabled in IE then it will throw\r\n\t  // when trying to create\r\n\t  module.exports = false;\r\n\t}\r\n\r\n\t},{}],23:[function(_dereq_,module,exports){\r\n\r\n\tvar indexOf = [].indexOf;\r\n\r\n\tmodule.exports = function(arr, obj){\r\n\t  if (indexOf) return arr.indexOf(obj);\r\n\t  for (var i = 0; i < arr.length; ++i) {\r\n\t\tif (arr[i] === obj) return i;\r\n\t  }\r\n\t  return -1;\r\n\t};\r\n\t},{}],24:[function(_dereq_,module,exports){\r\n\tmodule.exports = Array.isArray || function (arr) {\r\n\t  return Object.prototype.toString.call(arr) == '[object Array]';\r\n\t};\r\n\r\n\t},{}],25:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * Helpers.\r\n\t */\r\n\r\n\tvar s = 1000;\r\n\tvar m = s * 60;\r\n\tvar h = m * 60;\r\n\tvar d = h * 24;\r\n\tvar y = d * 365.25;\r\n\r\n\t/**\r\n\t * Parse or format the given `val`.\r\n\t *\r\n\t * Options:\r\n\t *\r\n\t *  - `long` verbose formatting [false]\r\n\t *\r\n\t * @param {String|Number} val\r\n\t * @param {Object} options\r\n\t * @return {String|Number}\r\n\t * @api public\r\n\t */\r\n\r\n\tmodule.exports = function(val, options){\r\n\t  options = options || {};\r\n\t  if ('string' == typeof val) return parse(val);\r\n\t  return options.long\r\n\t\t? long(val)\r\n\t\t: short(val);\r\n\t};\r\n\r\n\t/**\r\n\t * Parse the given `str` and return milliseconds.\r\n\t *\r\n\t * @param {String} str\r\n\t * @return {Number}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction parse(str) {\r\n\t  str = '' + str;\r\n\t  if (str.length > 10000) return;\r\n\t  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\r\n\t  if (!match) return;\r\n\t  var n = parseFloat(match[1]);\r\n\t  var type = (match[2] || 'ms').toLowerCase();\r\n\t  switch (type) {\r\n\t\tcase 'years':\r\n\t\tcase 'year':\r\n\t\tcase 'yrs':\r\n\t\tcase 'yr':\r\n\t\tcase 'y':\r\n\t\t  return n * y;\r\n\t\tcase 'days':\r\n\t\tcase 'day':\r\n\t\tcase 'd':\r\n\t\t  return n * d;\r\n\t\tcase 'hours':\r\n\t\tcase 'hour':\r\n\t\tcase 'hrs':\r\n\t\tcase 'hr':\r\n\t\tcase 'h':\r\n\t\t  return n * h;\r\n\t\tcase 'minutes':\r\n\t\tcase 'minute':\r\n\t\tcase 'mins':\r\n\t\tcase 'min':\r\n\t\tcase 'm':\r\n\t\t  return n * m;\r\n\t\tcase 'seconds':\r\n\t\tcase 'second':\r\n\t\tcase 'secs':\r\n\t\tcase 'sec':\r\n\t\tcase 's':\r\n\t\t  return n * s;\r\n\t\tcase 'milliseconds':\r\n\t\tcase 'millisecond':\r\n\t\tcase 'msecs':\r\n\t\tcase 'msec':\r\n\t\tcase 'ms':\r\n\t\t  return n;\r\n\t  }\r\n\t}\r\n\r\n\t/**\r\n\t * Short format for `ms`.\r\n\t *\r\n\t * @param {Number} ms\r\n\t * @return {String}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction short(ms) {\r\n\t  if (ms >= d) return Math.round(ms / d) + 'd';\r\n\t  if (ms >= h) return Math.round(ms / h) + 'h';\r\n\t  if (ms >= m) return Math.round(ms / m) + 'm';\r\n\t  if (ms >= s) return Math.round(ms / s) + 's';\r\n\t  return ms + 'ms';\r\n\t}\r\n\r\n\t/**\r\n\t * Long format for `ms`.\r\n\t *\r\n\t * @param {Number} ms\r\n\t * @return {String}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction long(ms) {\r\n\t  return plural(ms, d, 'day')\r\n\t\t|| plural(ms, h, 'hour')\r\n\t\t|| plural(ms, m, 'minute')\r\n\t\t|| plural(ms, s, 'second')\r\n\t\t|| ms + ' ms';\r\n\t}\r\n\r\n\t/**\r\n\t * Pluralization helper.\r\n\t */\r\n\r\n\tfunction plural(ms, n, name) {\r\n\t  if (ms < n) return;\r\n\t  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\r\n\t  return Math.ceil(ms / n) + ' ' + name + 's';\r\n\t}\r\n\r\n\t},{}],26:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/**\r\n\t * JSON parse.\r\n\t *\r\n\t * @see Based on jQuery#parseJSON (MIT) and JSON2\r\n\t * @api private\r\n\t */\r\n\r\n\tvar rvalidchars = /^[\\],:{}\\s]*$/;\r\n\tvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\r\n\tvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\r\n\tvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\r\n\tvar rtrimLeft = /^\\s+/;\r\n\tvar rtrimRight = /\\s+$/;\r\n\r\n\tmodule.exports = function parsejson(data) {\r\n\t  if ('string' != typeof data || !data) {\r\n\t\treturn null;\r\n\t  }\r\n\r\n\t  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\r\n\r\n\t  // Attempt to parse using the native JSON parser first\r\n\t  if (global.JSON && JSON.parse) {\r\n\t\treturn JSON.parse(data);\r\n\t  }\r\n\r\n\t  if (rvalidchars.test(data.replace(rvalidescape, '@')\r\n\t\t  .replace(rvalidtokens, ']')\r\n\t\t  .replace(rvalidbraces, ''))) {\r\n\t\treturn (new Function('return ' + data))();\r\n\t  }\r\n\t};\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{}],27:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * Compiles a querystring\r\n\t * Returns string representation of the object\r\n\t *\r\n\t * @param {Object}\r\n\t * @api private\r\n\t */\r\n\r\n\texports.encode = function (obj) {\r\n\t  var str = '';\r\n\r\n\t  for (var i in obj) {\r\n\t\tif (obj.hasOwnProperty(i)) {\r\n\t\t  if (str.length) str += '&';\r\n\t\t  str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n\t\t}\r\n\t  }\r\n\r\n\t  return str;\r\n\t};\r\n\r\n\t/**\r\n\t * Parses a simple querystring into an object\r\n\t *\r\n\t * @param {String} qs\r\n\t * @api private\r\n\t */\r\n\r\n\texports.decode = function(qs){\r\n\t  var qry = {};\r\n\t  var pairs = qs.split('&');\r\n\t  for (var i = 0, l = pairs.length; i < l; i++) {\r\n\t\tvar pair = pairs[i].split('=');\r\n\t\tqry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n\t  }\r\n\t  return qry;\r\n\t};\r\n\r\n\t},{}],28:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * Parses an URI\r\n\t *\r\n\t * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n\t * @api private\r\n\t */\r\n\r\n\tvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\n\tvar parts = [\r\n\t\t'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n\t];\r\n\r\n\tmodule.exports = function parseuri(str) {\r\n\t\tvar src = str,\r\n\t\t\tb = str.indexOf('['),\r\n\t\t\te = str.indexOf(']');\r\n\r\n\t\tif (b != -1 && e != -1) {\r\n\t\t\tstr = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n\t\t}\r\n\r\n\t\tvar m = re.exec(str || ''),\r\n\t\t\turi = {},\r\n\t\t\ti = 14;\r\n\r\n\t\twhile (i--) {\r\n\t\t\turi[parts[i]] = m[i] || '';\r\n\t\t}\r\n\r\n\t\tif (b != -1 && e != -1) {\r\n\t\t\turi.source = src;\r\n\t\t\turi.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n\t\t\turi.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n\t\t\turi.ipv6uri = true;\r\n\t\t}\r\n\r\n\t\treturn uri;\r\n\t};\r\n\r\n\t},{}],29:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/*! https://mths.be/utf8js v2.0.0 by @mathias */\r\n\t;(function(root) {\r\n\r\n\t\t// Detect free variables `exports`\r\n\t\tvar freeExports = typeof exports == 'object' && exports;\r\n\r\n\t\t// Detect free variable `module`\r\n\t\tvar freeModule = typeof module == 'object' && module &&\r\n\t\t\tmodule.exports == freeExports && module;\r\n\r\n\t\t// Detect free variable `global`, from Node.js or Browserified code,\r\n\t\t// and use it as `root`\r\n\t\tvar freeGlobal = typeof global == 'object' && global;\r\n\t\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\r\n\t\t\troot = freeGlobal;\r\n\t\t}\r\n\r\n\t\t/*--------------------------------------------------------------------------*/\r\n\r\n\t\tvar stringFromCharCode = String.fromCharCode;\r\n\r\n\t\t// Taken from https://mths.be/punycode\r\n\t\tfunction ucs2decode(string) {\r\n\t\t\tvar output = [];\r\n\t\t\tvar counter = 0;\r\n\t\t\tvar length = string.length;\r\n\t\t\tvar value;\r\n\t\t\tvar extra;\r\n\t\t\twhile (counter < length) {\r\n\t\t\t\tvalue = string.charCodeAt(counter++);\r\n\t\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\r\n\t\t\t\t\t// high surrogate, and there is a next character\r\n\t\t\t\t\textra = string.charCodeAt(counter++);\r\n\t\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\r\n\t\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\r\n\t\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\r\n\t\t\t\t\t\toutput.push(value);\r\n\t\t\t\t\t\tcounter--;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\toutput.push(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t// Taken from https://mths.be/punycode\r\n\t\tfunction ucs2encode(array) {\r\n\t\t\tvar length = array.length;\r\n\t\t\tvar index = -1;\r\n\t\t\tvar value;\r\n\t\t\tvar output = '';\r\n\t\t\twhile (++index < length) {\r\n\t\t\t\tvalue = array[index];\r\n\t\t\t\tif (value > 0xFFFF) {\r\n\t\t\t\t\tvalue -= 0x10000;\r\n\t\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\r\n\t\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\r\n\t\t\t\t}\r\n\t\t\t\toutput += stringFromCharCode(value);\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\tfunction checkScalarValue(codePoint) {\r\n\t\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\r\n\t\t\t\tthrow Error(\r\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\r\n\t\t\t\t\t' is not a scalar value'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*--------------------------------------------------------------------------*/\r\n\r\n\t\tfunction createByte(codePoint, shift) {\r\n\t\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\r\n\t\t}\r\n\r\n\t\tfunction encodeCodePoint(codePoint) {\r\n\t\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\r\n\t\t\t\treturn stringFromCharCode(codePoint);\r\n\t\t\t}\r\n\t\t\tvar symbol = '';\r\n\t\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\r\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\r\n\t\t\t}\r\n\t\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\r\n\t\t\t\tcheckScalarValue(codePoint);\r\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\r\n\t\t\t\tsymbol += createByte(codePoint, 6);\r\n\t\t\t}\r\n\t\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\r\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\r\n\t\t\t\tsymbol += createByte(codePoint, 12);\r\n\t\t\t\tsymbol += createByte(codePoint, 6);\r\n\t\t\t}\r\n\t\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\r\n\t\t\treturn symbol;\r\n\t\t}\r\n\r\n\t\tfunction utf8encode(string) {\r\n\t\t\tvar codePoints = ucs2decode(string);\r\n\t\t\tvar length = codePoints.length;\r\n\t\t\tvar index = -1;\r\n\t\t\tvar codePoint;\r\n\t\t\tvar byteString = '';\r\n\t\t\twhile (++index < length) {\r\n\t\t\t\tcodePoint = codePoints[index];\r\n\t\t\t\tbyteString += encodeCodePoint(codePoint);\r\n\t\t\t}\r\n\t\t\treturn byteString;\r\n\t\t}\r\n\r\n\t\t/*--------------------------------------------------------------------------*/\r\n\r\n\t\tfunction readContinuationByte() {\r\n\t\t\tif (byteIndex >= byteCount) {\r\n\t\t\t\tthrow Error('Invalid byte index');\r\n\t\t\t}\r\n\r\n\t\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\r\n\t\t\tbyteIndex++;\r\n\r\n\t\t\tif ((continuationByte & 0xC0) == 0x80) {\r\n\t\t\t\treturn continuationByte & 0x3F;\r\n\t\t\t}\r\n\r\n\t\t\t// If we end up here, its not a continuation byte\r\n\t\t\tthrow Error('Invalid continuation byte');\r\n\t\t}\r\n\r\n\t\tfunction decodeSymbol() {\r\n\t\t\tvar byte1;\r\n\t\t\tvar byte2;\r\n\t\t\tvar byte3;\r\n\t\t\tvar byte4;\r\n\t\t\tvar codePoint;\r\n\r\n\t\t\tif (byteIndex > byteCount) {\r\n\t\t\t\tthrow Error('Invalid byte index');\r\n\t\t\t}\r\n\r\n\t\t\tif (byteIndex == byteCount) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Read first byte\r\n\t\t\tbyte1 = byteArray[byteIndex] & 0xFF;\r\n\t\t\tbyteIndex++;\r\n\r\n\t\t\t// 1-byte sequence (no continuation bytes)\r\n\t\t\tif ((byte1 & 0x80) == 0) {\r\n\t\t\t\treturn byte1;\r\n\t\t\t}\r\n\r\n\t\t\t// 2-byte sequence\r\n\t\t\tif ((byte1 & 0xE0) == 0xC0) {\r\n\t\t\t\tvar byte2 = readContinuationByte();\r\n\t\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\r\n\t\t\t\tif (codePoint >= 0x80) {\r\n\t\t\t\t\treturn codePoint;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow Error('Invalid continuation byte');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 3-byte sequence (may include unpaired surrogates)\r\n\t\t\tif ((byte1 & 0xF0) == 0xE0) {\r\n\t\t\t\tbyte2 = readContinuationByte();\r\n\t\t\t\tbyte3 = readContinuationByte();\r\n\t\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\r\n\t\t\t\tif (codePoint >= 0x0800) {\r\n\t\t\t\t\tcheckScalarValue(codePoint);\r\n\t\t\t\t\treturn codePoint;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow Error('Invalid continuation byte');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 4-byte sequence\r\n\t\t\tif ((byte1 & 0xF8) == 0xF0) {\r\n\t\t\t\tbyte2 = readContinuationByte();\r\n\t\t\t\tbyte3 = readContinuationByte();\r\n\t\t\t\tbyte4 = readContinuationByte();\r\n\t\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\r\n\t\t\t\t\t(byte3 << 0x06) | byte4;\r\n\t\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\r\n\t\t\t\t\treturn codePoint;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthrow Error('Invalid UTF-8 detected');\r\n\t\t}\r\n\r\n\t\tvar byteArray;\r\n\t\tvar byteCount;\r\n\t\tvar byteIndex;\r\n\t\tfunction utf8decode(byteString) {\r\n\t\t\tbyteArray = ucs2decode(byteString);\r\n\t\t\tbyteCount = byteArray.length;\r\n\t\t\tbyteIndex = 0;\r\n\t\t\tvar codePoints = [];\r\n\t\t\tvar tmp;\r\n\t\t\twhile ((tmp = decodeSymbol()) !== false) {\r\n\t\t\t\tcodePoints.push(tmp);\r\n\t\t\t}\r\n\t\t\treturn ucs2encode(codePoints);\r\n\t\t}\r\n\r\n\t\t/*--------------------------------------------------------------------------*/\r\n\r\n\t\tvar utf8 = {\r\n\t\t\t'version': '2.0.0',\r\n\t\t\t'encode': utf8encode,\r\n\t\t\t'decode': utf8decode\r\n\t\t};\r\n\r\n\t\t// Some AMD build optimizers, like r.js, check for specific condition patterns\r\n\t\t// like the following:\r\n\t\tif (\r\n\t\t\ttypeof define == 'function' &&\r\n\t\t\ttypeof define.amd == 'object' &&\r\n\t\t\tdefine.amd\r\n\t\t) {\r\n\t\t\tdefine(function() {\r\n\t\t\t\treturn utf8;\r\n\t\t\t});\r\n\t\t}\telse if (freeExports && !freeExports.nodeType) {\r\n\t\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\r\n\t\t\t\tfreeModule.exports = utf8;\r\n\t\t\t} else { // in Narwhal or RingoJS v0.7.0-\r\n\t\t\t\tvar object = {};\r\n\t\t\t\tvar hasOwnProperty = object.hasOwnProperty;\r\n\t\t\t\tfor (var key in utf8) {\r\n\t\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else { // in Rhino or a web browser\r\n\t\t\troot.utf8 = utf8;\r\n\t\t}\r\n\r\n\t}(this));\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{}],30:[function(_dereq_,module,exports){\r\n\t'use strict';\r\n\r\n\tvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\r\n\t  , length = 64\r\n\t  , map = {}\r\n\t  , seed = 0\r\n\t  , i = 0\r\n\t  , prev;\r\n\r\n\t/**\r\n\t * Return a string representing the specified number.\r\n\t *\r\n\t * @param {Number} num The number to convert.\r\n\t * @returns {String} The string representation of the number.\r\n\t * @api public\r\n\t */\r\n\tfunction encode(num) {\r\n\t  var encoded = '';\r\n\r\n\t  do {\r\n\t\tencoded = alphabet[num % length] + encoded;\r\n\t\tnum = Math.floor(num / length);\r\n\t  } while (num > 0);\r\n\r\n\t  return encoded;\r\n\t}\r\n\r\n\t/**\r\n\t * Return the integer value specified by the given string.\r\n\t *\r\n\t * @param {String} str The string to convert.\r\n\t * @returns {Number} The integer value represented by the string.\r\n\t * @api public\r\n\t */\r\n\tfunction decode(str) {\r\n\t  var decoded = 0;\r\n\r\n\t  for (i = 0; i < str.length; i++) {\r\n\t\tdecoded = decoded * length + map[str.charAt(i)];\r\n\t  }\r\n\r\n\t  return decoded;\r\n\t}\r\n\r\n\t/**\r\n\t * Yeast: A tiny growing id generator.\r\n\t *\r\n\t * @returns {String} A unique id.\r\n\t * @api public\r\n\t */\r\n\tfunction yeast() {\r\n\t  var now = encode(+new Date());\r\n\r\n\t  if (now !== prev) return seed = 0, prev = now;\r\n\t  return now +'.'+ encode(seed++);\r\n\t}\r\n\r\n\t//\r\n\t// Map each character to its index.\r\n\t//\r\n\tfor (; i < length; i++) map[alphabet[i]] = i;\r\n\r\n\t//\r\n\t// Expose the `yeast`, `encode` and `decode` functions.\r\n\t//\r\n\tyeast.encode = encode;\r\n\tyeast.decode = decode;\r\n\tmodule.exports = yeast;\r\n\r\n\t},{}],31:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar url = _dereq_('./url');\r\n\tvar parser = _dereq_('socket.io-parser');\r\n\tvar Manager = _dereq_('./manager');\r\n\tvar debug = _dereq_('debug')('socket.io-client');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = exports = lookup;\r\n\r\n\t/**\r\n\t * Managers cache.\r\n\t */\r\n\r\n\tvar cache = exports.managers = {};\r\n\r\n\t/**\r\n\t * Looks up an existing `Manager` for multiplexing.\r\n\t * If the user summons:\r\n\t *\r\n\t *   `io('http://localhost/a');`\r\n\t *   `io('http://localhost/b');`\r\n\t *\r\n\t * We reuse the existing instance based on same scheme/port/host,\r\n\t * and we initialize sockets for each namespace.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction lookup(uri, opts) {\r\n\t  if (typeof uri == 'object') {\r\n\t\topts = uri;\r\n\t\turi = undefined;\r\n\t  }\r\n\r\n\t  opts = opts || {};\r\n\r\n\t  var parsed = url(uri);\r\n\t  var source = parsed.source;\r\n\t  var id = parsed.id;\r\n\t  var path = parsed.path;\r\n\t  var sameNamespace = cache[id] && path in cache[id].nsps;\r\n\t  var newConnection = opts.forceNew || opts['force new connection'] ||\r\n\t\t\t\t\t\t  false === opts.multiplex || sameNamespace;\r\n\r\n\t  var io;\r\n\r\n\t  if (newConnection) {\r\n\t\tdebug('ignoring socket cache for %s', source);\r\n\t\tio = Manager(source, opts);\r\n\t  } else {\r\n\t\tif (!cache[id]) {\r\n\t\t  debug('new io instance for %s', source);\r\n\t\t  cache[id] = Manager(source, opts);\r\n\t\t}\r\n\t\tio = cache[id];\r\n\t  }\r\n\r\n\t  return io.socket(parsed.path);\r\n\t}\r\n\r\n\t/**\r\n\t * Protocol version.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.protocol = parser.protocol;\r\n\r\n\t/**\r\n\t * `connect`.\r\n\t *\r\n\t * @param {String} uri\r\n\t * @api public\r\n\t */\r\n\r\n\texports.connect = lookup;\r\n\r\n\t/**\r\n\t * Expose constructors for standalone build.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.Manager = _dereq_('./manager');\r\n\texports.Socket = _dereq_('./socket');\r\n\r\n\t},{\"./manager\":32,\"./socket\":34,\"./url\":35,\"debug\":39,\"socket.io-parser\":47}],32:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar eio = _dereq_('engine.io-client');\r\n\tvar Socket = _dereq_('./socket');\r\n\tvar Emitter = _dereq_('component-emitter');\r\n\tvar parser = _dereq_('socket.io-parser');\r\n\tvar on = _dereq_('./on');\r\n\tvar bind = _dereq_('component-bind');\r\n\tvar debug = _dereq_('debug')('socket.io-client:manager');\r\n\tvar indexOf = _dereq_('indexof');\r\n\tvar Backoff = _dereq_('backo2');\r\n\r\n\t/**\r\n\t * IE6+ hasOwnProperty\r\n\t */\r\n\r\n\tvar has = Object.prototype.hasOwnProperty;\r\n\r\n\t/**\r\n\t * Module exports\r\n\t */\r\n\r\n\tmodule.exports = Manager;\r\n\r\n\t/**\r\n\t * `Manager` constructor.\r\n\t *\r\n\t * @param {String} engine instance or engine uri/opts\r\n\t * @param {Object} options\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Manager(uri, opts){\r\n\t  if (!(this instanceof Manager)) return new Manager(uri, opts);\r\n\t  if (uri && ('object' == typeof uri)) {\r\n\t\topts = uri;\r\n\t\turi = undefined;\r\n\t  }\r\n\t  opts = opts || {};\r\n\r\n\t  opts.path = opts.path || '/socket.io';\r\n\t  this.nsps = {};\r\n\t  this.subs = [];\r\n\t  this.opts = opts;\r\n\t  this.reconnection(opts.reconnection !== false);\r\n\t  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\r\n\t  this.reconnectionDelay(opts.reconnectionDelay || 1000);\r\n\t  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\r\n\t  this.randomizationFactor(opts.randomizationFactor || 0.5);\r\n\t  this.backoff = new Backoff({\r\n\t\tmin: this.reconnectionDelay(),\r\n\t\tmax: this.reconnectionDelayMax(),\r\n\t\tjitter: this.randomizationFactor()\r\n\t  });\r\n\t  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\r\n\t  this.readyState = 'closed';\r\n\t  this.uri = uri;\r\n\t  this.connecting = [];\r\n\t  this.lastPing = null;\r\n\t  this.encoding = false;\r\n\t  this.packetBuffer = [];\r\n\t  this.encoder = new parser.Encoder();\r\n\t  this.decoder = new parser.Decoder();\r\n\t  this.autoConnect = opts.autoConnect !== false;\r\n\t  if (this.autoConnect) this.open();\r\n\t}\r\n\r\n\t/**\r\n\t * Propagate given event to sockets and emit on `this`\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.emitAll = function() {\r\n\t  this.emit.apply(this, arguments);\r\n\t  for (var nsp in this.nsps) {\r\n\t\tif (has.call(this.nsps, nsp)) {\r\n\t\t  this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\r\n\t\t}\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Update `socket.id` of all sockets\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.updateSocketIds = function(){\r\n\t  for (var nsp in this.nsps) {\r\n\t\tif (has.call(this.nsps, nsp)) {\r\n\t\t  this.nsps[nsp].id = this.engine.id;\r\n\t\t}\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Mix in `Emitter`.\r\n\t */\r\n\r\n\tEmitter(Manager.prototype);\r\n\r\n\t/**\r\n\t * Sets the `reconnection` config.\r\n\t *\r\n\t * @param {Boolean} true/false if it should automatically reconnect\r\n\t * @return {Manager} self or value\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.reconnection = function(v){\r\n\t  if (!arguments.length) return this._reconnection;\r\n\t  this._reconnection = !!v;\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the reconnection attempts config.\r\n\t *\r\n\t * @param {Number} max reconnection attempts before giving up\r\n\t * @return {Manager} self or value\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.reconnectionAttempts = function(v){\r\n\t  if (!arguments.length) return this._reconnectionAttempts;\r\n\t  this._reconnectionAttempts = v;\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the delay between reconnections.\r\n\t *\r\n\t * @param {Number} delay\r\n\t * @return {Manager} self or value\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.reconnectionDelay = function(v){\r\n\t  if (!arguments.length) return this._reconnectionDelay;\r\n\t  this._reconnectionDelay = v;\r\n\t  this.backoff && this.backoff.setMin(v);\r\n\t  return this;\r\n\t};\r\n\r\n\tManager.prototype.randomizationFactor = function(v){\r\n\t  if (!arguments.length) return this._randomizationFactor;\r\n\t  this._randomizationFactor = v;\r\n\t  this.backoff && this.backoff.setJitter(v);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the maximum delay between reconnections.\r\n\t *\r\n\t * @param {Number} delay\r\n\t * @return {Manager} self or value\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.reconnectionDelayMax = function(v){\r\n\t  if (!arguments.length) return this._reconnectionDelayMax;\r\n\t  this._reconnectionDelayMax = v;\r\n\t  this.backoff && this.backoff.setMax(v);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the connection timeout. `false` to disable\r\n\t *\r\n\t * @return {Manager} self or value\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.timeout = function(v){\r\n\t  if (!arguments.length) return this._timeout;\r\n\t  this._timeout = v;\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Starts trying to reconnect if reconnection is enabled and we have not\r\n\t * started reconnecting yet\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.maybeReconnectOnOpen = function() {\r\n\t  // Only try to reconnect if it's the first time we're connecting\r\n\t  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\r\n\t\t// keeps reconnection from firing twice for the same reconnection loop\r\n\t\tthis.reconnect();\r\n\t  }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Sets the current transport `socket`.\r\n\t *\r\n\t * @param {Function} optional, callback\r\n\t * @return {Manager} self\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.open =\r\n\tManager.prototype.connect = function(fn){\r\n\t  debug('readyState %s', this.readyState);\r\n\t  if (~this.readyState.indexOf('open')) return this;\r\n\r\n\t  debug('opening %s', this.uri);\r\n\t  this.engine = eio(this.uri, this.opts);\r\n\t  var socket = this.engine;\r\n\t  var self = this;\r\n\t  this.readyState = 'opening';\r\n\t  this.skipReconnect = false;\r\n\r\n\t  // emit `open`\r\n\t  var openSub = on(socket, 'open', function() {\r\n\t\tself.onopen();\r\n\t\tfn && fn();\r\n\t  });\r\n\r\n\t  // emit `connect_error`\r\n\t  var errorSub = on(socket, 'error', function(data){\r\n\t\tdebug('connect_error');\r\n\t\tself.cleanup();\r\n\t\tself.readyState = 'closed';\r\n\t\tself.emitAll('connect_error', data);\r\n\t\tif (fn) {\r\n\t\t  var err = new Error('Connection error');\r\n\t\t  err.data = data;\r\n\t\t  fn(err);\r\n\t\t} else {\r\n\t\t  // Only do this if there is no fn to handle the error\r\n\t\t  self.maybeReconnectOnOpen();\r\n\t\t}\r\n\t  });\r\n\r\n\t  // emit `connect_timeout`\r\n\t  if (false !== this._timeout) {\r\n\t\tvar timeout = this._timeout;\r\n\t\tdebug('connect attempt will timeout after %d', timeout);\r\n\r\n\t\t// set timer\r\n\t\tvar timer = setTimeout(function(){\r\n\t\t  debug('connect attempt timed out after %d', timeout);\r\n\t\t  openSub.destroy();\r\n\t\t  socket.close();\r\n\t\t  socket.emit('error', 'timeout');\r\n\t\t  self.emitAll('connect_timeout', timeout);\r\n\t\t}, timeout);\r\n\r\n\t\tthis.subs.push({\r\n\t\t  destroy: function(){\r\n\t\t\tclearTimeout(timer);\r\n\t\t  }\r\n\t\t});\r\n\t  }\r\n\r\n\t  this.subs.push(openSub);\r\n\t  this.subs.push(errorSub);\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon transport open.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.onopen = function(){\r\n\t  debug('open');\r\n\r\n\t  // clear old subs\r\n\t  this.cleanup();\r\n\r\n\t  // mark as open\r\n\t  this.readyState = 'open';\r\n\t  this.emit('open');\r\n\r\n\t  // add new subs\r\n\t  var socket = this.engine;\r\n\t  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\r\n\t  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\r\n\t  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\r\n\t  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\r\n\t  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\r\n\t  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon a ping.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.onping = function(){\r\n\t  this.lastPing = new Date;\r\n\t  this.emitAll('ping');\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon a packet.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.onpong = function(){\r\n\t  this.emitAll('pong', new Date - this.lastPing);\r\n\t};\r\n\r\n\t/**\r\n\t * Called with data.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.ondata = function(data){\r\n\t  this.decoder.add(data);\r\n\t};\r\n\r\n\t/**\r\n\t * Called when parser fully decodes a packet.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.ondecoded = function(packet) {\r\n\t  this.emit('packet', packet);\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon socket error.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.onerror = function(err){\r\n\t  debug('error', err);\r\n\t  this.emitAll('error', err);\r\n\t};\r\n\r\n\t/**\r\n\t * Creates a new socket for the given `nsp`.\r\n\t *\r\n\t * @return {Socket}\r\n\t * @api public\r\n\t */\r\n\r\n\tManager.prototype.socket = function(nsp){\r\n\t  var socket = this.nsps[nsp];\r\n\t  if (!socket) {\r\n\t\tsocket = new Socket(this, nsp);\r\n\t\tthis.nsps[nsp] = socket;\r\n\t\tvar self = this;\r\n\t\tsocket.on('connecting', onConnecting);\r\n\t\tsocket.on('connect', function(){\r\n\t\t  socket.id = self.engine.id;\r\n\t\t});\r\n\r\n\t\tif (this.autoConnect) {\r\n\t\t  // manually call here since connecting evnet is fired before listening\r\n\t\t  onConnecting();\r\n\t\t}\r\n\t  }\r\n\r\n\t  function onConnecting() {\r\n\t\tif (!~indexOf(self.connecting, socket)) {\r\n\t\t  self.connecting.push(socket);\r\n\t\t}\r\n\t  }\r\n\r\n\t  return socket;\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon a socket close.\r\n\t *\r\n\t * @param {Socket} socket\r\n\t */\r\n\r\n\tManager.prototype.destroy = function(socket){\r\n\t  var index = indexOf(this.connecting, socket);\r\n\t  if (~index) this.connecting.splice(index, 1);\r\n\t  if (this.connecting.length) return;\r\n\r\n\t  this.close();\r\n\t};\r\n\r\n\t/**\r\n\t * Writes a packet.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.packet = function(packet){\r\n\t  debug('writing packet %j', packet);\r\n\t  var self = this;\r\n\r\n\t  if (!self.encoding) {\r\n\t\t// encode, then write to engine with result\r\n\t\tself.encoding = true;\r\n\t\tthis.encoder.encode(packet, function(encodedPackets) {\r\n\t\t  for (var i = 0; i < encodedPackets.length; i++) {\r\n\t\t\tself.engine.write(encodedPackets[i], packet.options);\r\n\t\t  }\r\n\t\t  self.encoding = false;\r\n\t\t  self.processPacketQueue();\r\n\t\t});\r\n\t  } else { // add packet to the queue\r\n\t\tself.packetBuffer.push(packet);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * If packet buffer is non-empty, begins encoding the\r\n\t * next packet in line.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.processPacketQueue = function() {\r\n\t  if (this.packetBuffer.length > 0 && !this.encoding) {\r\n\t\tvar pack = this.packetBuffer.shift();\r\n\t\tthis.packet(pack);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Clean up transport subscriptions and packet buffer.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.cleanup = function(){\r\n\t  debug('cleanup');\r\n\r\n\t  var sub;\r\n\t  while (sub = this.subs.shift()) sub.destroy();\r\n\r\n\t  this.packetBuffer = [];\r\n\t  this.encoding = false;\r\n\t  this.lastPing = null;\r\n\r\n\t  this.decoder.destroy();\r\n\t};\r\n\r\n\t/**\r\n\t * Close the current socket.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.close =\r\n\tManager.prototype.disconnect = function(){\r\n\t  debug('disconnect');\r\n\t  this.skipReconnect = true;\r\n\t  this.reconnecting = false;\r\n\t  if ('opening' == this.readyState) {\r\n\t\t// `onclose` will not fire because\r\n\t\t// an open event never happened\r\n\t\tthis.cleanup();\r\n\t  }\r\n\t  this.backoff.reset();\r\n\t  this.readyState = 'closed';\r\n\t  if (this.engine) this.engine.close();\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon engine close.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.onclose = function(reason){\r\n\t  debug('onclose');\r\n\r\n\t  this.cleanup();\r\n\t  this.backoff.reset();\r\n\t  this.readyState = 'closed';\r\n\t  this.emit('close', reason);\r\n\r\n\t  if (this._reconnection && !this.skipReconnect) {\r\n\t\tthis.reconnect();\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Attempt a reconnection.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.reconnect = function(){\r\n\t  if (this.reconnecting || this.skipReconnect) return this;\r\n\r\n\t  var self = this;\r\n\r\n\t  if (this.backoff.attempts >= this._reconnectionAttempts) {\r\n\t\tdebug('reconnect failed');\r\n\t\tthis.backoff.reset();\r\n\t\tthis.emitAll('reconnect_failed');\r\n\t\tthis.reconnecting = false;\r\n\t  } else {\r\n\t\tvar delay = this.backoff.duration();\r\n\t\tdebug('will wait %dms before reconnect attempt', delay);\r\n\r\n\t\tthis.reconnecting = true;\r\n\t\tvar timer = setTimeout(function(){\r\n\t\t  if (self.skipReconnect) return;\r\n\r\n\t\t  debug('attempting reconnect');\r\n\t\t  self.emitAll('reconnect_attempt', self.backoff.attempts);\r\n\t\t  self.emitAll('reconnecting', self.backoff.attempts);\r\n\r\n\t\t  // check again for the case socket closed in above events\r\n\t\t  if (self.skipReconnect) return;\r\n\r\n\t\t  self.open(function(err){\r\n\t\t\tif (err) {\r\n\t\t\t  debug('reconnect attempt error');\r\n\t\t\t  self.reconnecting = false;\r\n\t\t\t  self.reconnect();\r\n\t\t\t  self.emitAll('reconnect_error', err.data);\r\n\t\t\t} else {\r\n\t\t\t  debug('reconnect success');\r\n\t\t\t  self.onreconnect();\r\n\t\t\t}\r\n\t\t  });\r\n\t\t}, delay);\r\n\r\n\t\tthis.subs.push({\r\n\t\t  destroy: function(){\r\n\t\t\tclearTimeout(timer);\r\n\t\t  }\r\n\t\t});\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon successful reconnect.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tManager.prototype.onreconnect = function(){\r\n\t  var attempt = this.backoff.attempts;\r\n\t  this.reconnecting = false;\r\n\t  this.backoff.reset();\r\n\t  this.updateSocketIds();\r\n\t  this.emitAll('reconnect', attempt);\r\n\t};\r\n\r\n\t},{\"./on\":33,\"./socket\":34,\"backo2\":36,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"engine.io-client\":1,\"indexof\":42,\"socket.io-parser\":47}],33:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = on;\r\n\r\n\t/**\r\n\t * Helper for subscriptions.\r\n\t *\r\n\t * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\r\n\t * @param {String} event name\r\n\t * @param {Function} callback\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction on(obj, ev, fn) {\r\n\t  obj.on(ev, fn);\r\n\t  return {\r\n\t\tdestroy: function(){\r\n\t\t  obj.removeListener(ev, fn);\r\n\t\t}\r\n\t  };\r\n\t}\r\n\r\n\t},{}],34:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar parser = _dereq_('socket.io-parser');\r\n\tvar Emitter = _dereq_('component-emitter');\r\n\tvar toArray = _dereq_('to-array');\r\n\tvar on = _dereq_('./on');\r\n\tvar bind = _dereq_('component-bind');\r\n\tvar debug = _dereq_('debug')('socket.io-client:socket');\r\n\tvar hasBin = _dereq_('has-binary');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = exports = Socket;\r\n\r\n\t/**\r\n\t * Internal events (blacklisted).\r\n\t * These events can't be emitted by the user.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tvar events = {\r\n\t  connect: 1,\r\n\t  connect_error: 1,\r\n\t  connect_timeout: 1,\r\n\t  connecting: 1,\r\n\t  disconnect: 1,\r\n\t  error: 1,\r\n\t  reconnect: 1,\r\n\t  reconnect_attempt: 1,\r\n\t  reconnect_failed: 1,\r\n\t  reconnect_error: 1,\r\n\t  reconnecting: 1,\r\n\t  ping: 1,\r\n\t  pong: 1\r\n\t};\r\n\r\n\t/**\r\n\t * Shortcut to `Emitter#emit`.\r\n\t */\r\n\r\n\tvar emit = Emitter.prototype.emit;\r\n\r\n\t/**\r\n\t * `Socket` constructor.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Socket(io, nsp){\r\n\t  this.io = io;\r\n\t  this.nsp = nsp;\r\n\t  this.json = this; // compat\r\n\t  this.ids = 0;\r\n\t  this.acks = {};\r\n\t  this.receiveBuffer = [];\r\n\t  this.sendBuffer = [];\r\n\t  this.connected = false;\r\n\t  this.disconnected = true;\r\n\t  if (this.io.autoConnect) this.open();\r\n\t}\r\n\r\n\t/**\r\n\t * Mix in `Emitter`.\r\n\t */\r\n\r\n\tEmitter(Socket.prototype);\r\n\r\n\t/**\r\n\t * Subscribe to open, close and packet events\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.subEvents = function() {\r\n\t  if (this.subs) return;\r\n\r\n\t  var io = this.io;\r\n\t  this.subs = [\r\n\t\ton(io, 'open', bind(this, 'onopen')),\r\n\t\ton(io, 'packet', bind(this, 'onpacket')),\r\n\t\ton(io, 'close', bind(this, 'onclose'))\r\n\t  ];\r\n\t};\r\n\r\n\t/**\r\n\t * \"Opens\" the socket.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.open =\r\n\tSocket.prototype.connect = function(){\r\n\t  if (this.connected) return this;\r\n\r\n\t  this.subEvents();\r\n\t  this.io.open(); // ensure open\r\n\t  if ('open' == this.io.readyState) this.onopen();\r\n\t  this.emit('connecting');\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a `message` event.\r\n\t *\r\n\t * @return {Socket} self\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.send = function(){\r\n\t  var args = toArray(arguments);\r\n\t  args.unshift('message');\r\n\t  this.emit.apply(this, args);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Override `emit`.\r\n\t * If the event is in `events`, it's emitted normally.\r\n\t *\r\n\t * @param {String} event name\r\n\t * @return {Socket} self\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.emit = function(ev){\r\n\t  if (events.hasOwnProperty(ev)) {\r\n\t\temit.apply(this, arguments);\r\n\t\treturn this;\r\n\t  }\r\n\r\n\t  var args = toArray(arguments);\r\n\t  var parserType = parser.EVENT; // default\r\n\t  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\r\n\t  var packet = { type: parserType, data: args };\r\n\r\n\t  packet.options = {};\r\n\t  packet.options.compress = !this.flags || false !== this.flags.compress;\r\n\r\n\t  // event ack callback\r\n\t  if ('function' == typeof args[args.length - 1]) {\r\n\t\tdebug('emitting packet with ack id %d', this.ids);\r\n\t\tthis.acks[this.ids] = args.pop();\r\n\t\tpacket.id = this.ids++;\r\n\t  }\r\n\r\n\t  if (this.connected) {\r\n\t\tthis.packet(packet);\r\n\t  } else {\r\n\t\tthis.sendBuffer.push(packet);\r\n\t  }\r\n\r\n\t  delete this.flags;\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a packet.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.packet = function(packet){\r\n\t  packet.nsp = this.nsp;\r\n\t  this.io.packet(packet);\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon engine `open`.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onopen = function(){\r\n\t  debug('transport is open - connecting');\r\n\r\n\t  // write connect packet if necessary\r\n\t  if ('/' != this.nsp) {\r\n\t\tthis.packet({ type: parser.CONNECT });\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon engine `close`.\r\n\t *\r\n\t * @param {String} reason\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onclose = function(reason){\r\n\t  debug('close (%s)', reason);\r\n\t  this.connected = false;\r\n\t  this.disconnected = true;\r\n\t  delete this.id;\r\n\t  this.emit('disconnect', reason);\r\n\t};\r\n\r\n\t/**\r\n\t * Called with socket packet.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onpacket = function(packet){\r\n\t  if (packet.nsp != this.nsp) return;\r\n\r\n\t  switch (packet.type) {\r\n\t\tcase parser.CONNECT:\r\n\t\t  this.onconnect();\r\n\t\t  break;\r\n\r\n\t\tcase parser.EVENT:\r\n\t\t  this.onevent(packet);\r\n\t\t  break;\r\n\r\n\t\tcase parser.BINARY_EVENT:\r\n\t\t  this.onevent(packet);\r\n\t\t  break;\r\n\r\n\t\tcase parser.ACK:\r\n\t\t  this.onack(packet);\r\n\t\t  break;\r\n\r\n\t\tcase parser.BINARY_ACK:\r\n\t\t  this.onack(packet);\r\n\t\t  break;\r\n\r\n\t\tcase parser.DISCONNECT:\r\n\t\t  this.ondisconnect();\r\n\t\t  break;\r\n\r\n\t\tcase parser.ERROR:\r\n\t\t  this.emit('error', packet.data);\r\n\t\t  break;\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon a server event.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onevent = function(packet){\r\n\t  var args = packet.data || [];\r\n\t  debug('emitting event %j', args);\r\n\r\n\t  if (null != packet.id) {\r\n\t\tdebug('attaching ack callback to event');\r\n\t\targs.push(this.ack(packet.id));\r\n\t  }\r\n\r\n\t  if (this.connected) {\r\n\t\temit.apply(this, args);\r\n\t  } else {\r\n\t\tthis.receiveBuffer.push(args);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Produces an ack callback to emit with an event.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.ack = function(id){\r\n\t  var self = this;\r\n\t  var sent = false;\r\n\t  return function(){\r\n\t\t// prevent double callbacks\r\n\t\tif (sent) return;\r\n\t\tsent = true;\r\n\t\tvar args = toArray(arguments);\r\n\t\tdebug('sending ack %j', args);\r\n\r\n\t\tvar type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\r\n\t\tself.packet({\r\n\t\t  type: type,\r\n\t\t  id: id,\r\n\t\t  data: args\r\n\t\t});\r\n\t  };\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon a server acknowlegement.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onack = function(packet){\r\n\t  var ack = this.acks[packet.id];\r\n\t  if ('function' == typeof ack) {\r\n\t\tdebug('calling ack %s with %j', packet.id, packet.data);\r\n\t\tack.apply(this, packet.data);\r\n\t\tdelete this.acks[packet.id];\r\n\t  } else {\r\n\t\tdebug('bad ack %s', packet.id);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon server connect.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.onconnect = function(){\r\n\t  this.connected = true;\r\n\t  this.disconnected = false;\r\n\t  this.emit('connect');\r\n\t  this.emitBuffered();\r\n\t};\r\n\r\n\t/**\r\n\t * Emit buffered events (received and emitted).\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.emitBuffered = function(){\r\n\t  var i;\r\n\t  for (i = 0; i < this.receiveBuffer.length; i++) {\r\n\t\temit.apply(this, this.receiveBuffer[i]);\r\n\t  }\r\n\t  this.receiveBuffer = [];\r\n\r\n\t  for (i = 0; i < this.sendBuffer.length; i++) {\r\n\t\tthis.packet(this.sendBuffer[i]);\r\n\t  }\r\n\t  this.sendBuffer = [];\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon server disconnect.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tSocket.prototype.ondisconnect = function(){\r\n\t  debug('server disconnect (%s)', this.nsp);\r\n\t  this.destroy();\r\n\t  this.onclose('io server disconnect');\r\n\t};\r\n\r\n\t/**\r\n\t * Called upon forced client/server side disconnections,\r\n\t * this method ensures the manager stops tracking us and\r\n\t * that reconnections don't get triggered for this.\r\n\t *\r\n\t * @api private.\r\n\t */\r\n\r\n\tSocket.prototype.destroy = function(){\r\n\t  if (this.subs) {\r\n\t\t// clean subscriptions to avoid reconnections\r\n\t\tfor (var i = 0; i < this.subs.length; i++) {\r\n\t\t  this.subs[i].destroy();\r\n\t\t}\r\n\t\tthis.subs = null;\r\n\t  }\r\n\r\n\t  this.io.destroy(this);\r\n\t};\r\n\r\n\t/**\r\n\t * Disconnects the socket manually.\r\n\t *\r\n\t * @return {Socket} self\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.close =\r\n\tSocket.prototype.disconnect = function(){\r\n\t  if (this.connected) {\r\n\t\tdebug('performing disconnect (%s)', this.nsp);\r\n\t\tthis.packet({ type: parser.DISCONNECT });\r\n\t  }\r\n\r\n\t  // remove socket from pool\r\n\t  this.destroy();\r\n\r\n\t  if (this.connected) {\r\n\t\t// fire events\r\n\t\tthis.onclose('io client disconnect');\r\n\t  }\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the compress flag.\r\n\t *\r\n\t * @param {Boolean} if `true`, compresses the sending data\r\n\t * @return {Socket} self\r\n\t * @api public\r\n\t */\r\n\r\n\tSocket.prototype.compress = function(compress){\r\n\t  this.flags = this.flags || {};\r\n\t  this.flags.compress = compress;\r\n\t  return this;\r\n\t};\r\n\r\n\t},{\"./on\":33,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"has-binary\":41,\"socket.io-parser\":47,\"to-array\":51}],35:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar parseuri = _dereq_('parseuri');\r\n\tvar debug = _dereq_('debug')('socket.io-client:url');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = url;\r\n\r\n\t/**\r\n\t * URL parser.\r\n\t *\r\n\t * @param {String} url\r\n\t * @param {Object} An object meant to mimic window.location.\r\n\t *                 Defaults to window.location.\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction url(uri, loc){\r\n\t  var obj = uri;\r\n\r\n\t  // default to window.location\r\n\t  var loc = loc || global.location;\r\n\t  if (null == uri) uri = loc.protocol + '//' + loc.host;\r\n\r\n\t  // relative path support\r\n\t  if ('string' == typeof uri) {\r\n\t\tif ('/' == uri.charAt(0)) {\r\n\t\t  if ('/' == uri.charAt(1)) {\r\n\t\t\turi = loc.protocol + uri;\r\n\t\t  } else {\r\n\t\t\turi = loc.host + uri;\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tif (!/^(https?|wss?):\\/\\//.test(uri)) {\r\n\t\t  debug('protocol-less url %s', uri);\r\n\t\t  if ('undefined' != typeof loc) {\r\n\t\t\turi = loc.protocol + '//' + uri;\r\n\t\t  } else {\r\n\t\t\turi = 'https://' + uri;\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\t// parse\r\n\t\tdebug('parse %s', uri);\r\n\t\tobj = parseuri(uri);\r\n\t  }\r\n\r\n\t  // make sure we treat `localhost:80` and `localhost` equally\r\n\t  if (!obj.port) {\r\n\t\tif (/^(http|ws)$/.test(obj.protocol)) {\r\n\t\t  obj.port = '80';\r\n\t\t}\r\n\t\telse if (/^(http|ws)s$/.test(obj.protocol)) {\r\n\t\t  obj.port = '443';\r\n\t\t}\r\n\t  }\r\n\r\n\t  obj.path = obj.path || '/';\r\n\r\n\t  var ipv6 = obj.host.indexOf(':') !== -1;\r\n\t  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\r\n\r\n\t  // define unique id\r\n\t  obj.id = obj.protocol + '://' + host + ':' + obj.port;\r\n\t  // define href\r\n\t  obj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\r\n\r\n\t  return obj;\r\n\t}\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"debug\":39,\"parseuri\":45}],36:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Expose `Backoff`.\r\n\t */\r\n\r\n\tmodule.exports = Backoff;\r\n\r\n\t/**\r\n\t * Initialize backoff timer with `opts`.\r\n\t *\r\n\t * - `min` initial timeout in milliseconds [100]\r\n\t * - `max` max timeout [10000]\r\n\t * - `jitter` [0]\r\n\t * - `factor` [2]\r\n\t *\r\n\t * @param {Object} opts\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Backoff(opts) {\r\n\t  opts = opts || {};\r\n\t  this.ms = opts.min || 100;\r\n\t  this.max = opts.max || 10000;\r\n\t  this.factor = opts.factor || 2;\r\n\t  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\r\n\t  this.attempts = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Return the backoff duration.\r\n\t *\r\n\t * @return {Number}\r\n\t * @api public\r\n\t */\r\n\r\n\tBackoff.prototype.duration = function(){\r\n\t  var ms = this.ms * Math.pow(this.factor, this.attempts++);\r\n\t  if (this.jitter) {\r\n\t\tvar rand =  Math.random();\r\n\t\tvar deviation = Math.floor(rand * this.jitter * ms);\r\n\t\tms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\r\n\t  }\r\n\t  return Math.min(ms, this.max) | 0;\r\n\t};\r\n\r\n\t/**\r\n\t * Reset the number of attempts.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tBackoff.prototype.reset = function(){\r\n\t  this.attempts = 0;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the minimum duration\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tBackoff.prototype.setMin = function(min){\r\n\t  this.ms = min;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the maximum duration\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tBackoff.prototype.setMax = function(max){\r\n\t  this.max = max;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the jitter\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tBackoff.prototype.setJitter = function(jitter){\r\n\t  this.jitter = jitter;\r\n\t};\r\n\r\n\r\n\t},{}],37:[function(_dereq_,module,exports){\r\n\t/**\r\n\t * Slice reference.\r\n\t */\r\n\r\n\tvar slice = [].slice;\r\n\r\n\t/**\r\n\t * Bind `obj` to `fn`.\r\n\t *\r\n\t * @param {Object} obj\r\n\t * @param {Function|String} fn or string\r\n\t * @return {Function}\r\n\t * @api public\r\n\t */\r\n\r\n\tmodule.exports = function(obj, fn){\r\n\t  if ('string' == typeof fn) fn = obj[fn];\r\n\t  if ('function' != typeof fn) throw new Error('bind() requires a function');\r\n\t  var args = slice.call(arguments, 2);\r\n\t  return function(){\r\n\t\treturn fn.apply(obj, args.concat(slice.call(arguments)));\r\n\t  }\r\n\t};\r\n\r\n\t},{}],38:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Expose `Emitter`.\r\n\t */\r\n\r\n\tmodule.exports = Emitter;\r\n\r\n\t/**\r\n\t * Initialize a new `Emitter`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Emitter(obj) {\r\n\t  if (obj) return mixin(obj);\r\n\t};\r\n\r\n\t/**\r\n\t * Mixin the emitter properties.\r\n\t *\r\n\t * @param {Object} obj\r\n\t * @return {Object}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction mixin(obj) {\r\n\t  for (var key in Emitter.prototype) {\r\n\t\tobj[key] = Emitter.prototype[key];\r\n\t  }\r\n\t  return obj;\r\n\t}\r\n\r\n\t/**\r\n\t * Listen on the given `event` with `fn`.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.on =\r\n\tEmitter.prototype.addEventListener = function(event, fn){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n\t\t.push(fn);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds an `event` listener that will be invoked a single\r\n\t * time then automatically removed.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.once = function(event, fn){\r\n\t  function on() {\r\n\t\tthis.off(event, on);\r\n\t\tfn.apply(this, arguments);\r\n\t  }\r\n\r\n\t  on.fn = fn;\r\n\t  this.on(event, on);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove the given callback for `event` or all\r\n\t * registered callbacks.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.off =\r\n\tEmitter.prototype.removeListener =\r\n\tEmitter.prototype.removeAllListeners =\r\n\tEmitter.prototype.removeEventListener = function(event, fn){\r\n\t  this._callbacks = this._callbacks || {};\r\n\r\n\t  // all\r\n\t  if (0 == arguments.length) {\r\n\t\tthis._callbacks = {};\r\n\t\treturn this;\r\n\t  }\r\n\r\n\t  // specific event\r\n\t  var callbacks = this._callbacks['$' + event];\r\n\t  if (!callbacks) return this;\r\n\r\n\t  // remove all handlers\r\n\t  if (1 == arguments.length) {\r\n\t\tdelete this._callbacks['$' + event];\r\n\t\treturn this;\r\n\t  }\r\n\r\n\t  // remove specific handler\r\n\t  var cb;\r\n\t  for (var i = 0; i < callbacks.length; i++) {\r\n\t\tcb = callbacks[i];\r\n\t\tif (cb === fn || cb.fn === fn) {\r\n\t\t  callbacks.splice(i, 1);\r\n\t\t  break;\r\n\t\t}\r\n\t  }\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Emit `event` with the given args.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Mixed} ...\r\n\t * @return {Emitter}\r\n\t */\r\n\r\n\tEmitter.prototype.emit = function(event){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  var args = [].slice.call(arguments, 1)\r\n\t\t, callbacks = this._callbacks['$' + event];\r\n\r\n\t  if (callbacks) {\r\n\t\tcallbacks = callbacks.slice(0);\r\n\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\r\n\t\t  callbacks[i].apply(this, args);\r\n\t\t}\r\n\t  }\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Return array of callbacks for `event`.\r\n\t *\r\n\t * @param {String} event\r\n\t * @return {Array}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.listeners = function(event){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  return this._callbacks['$' + event] || [];\r\n\t};\r\n\r\n\t/**\r\n\t * Check if this emitter has `event` handlers.\r\n\t *\r\n\t * @param {String} event\r\n\t * @return {Boolean}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.hasListeners = function(event){\r\n\t  return !! this.listeners(event).length;\r\n\t};\r\n\r\n\t},{}],39:[function(_dereq_,module,exports){\r\n\targuments[4][17][0].apply(exports,arguments)\r\n\t},{\"./debug\":40,\"dup\":17}],40:[function(_dereq_,module,exports){\r\n\targuments[4][18][0].apply(exports,arguments)\r\n\t},{\"dup\":18,\"ms\":44}],41:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\r\n\t/*\r\n\t * Module requirements.\r\n\t */\r\n\r\n\tvar isArray = _dereq_('isarray');\r\n\r\n\t/**\r\n\t * Module exports.\r\n\t */\r\n\r\n\tmodule.exports = hasBinary;\r\n\r\n\t/**\r\n\t * Checks for binary data.\r\n\t *\r\n\t * Right now only Buffer and ArrayBuffer are supported..\r\n\t *\r\n\t * @param {Object} anything\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction hasBinary(data) {\r\n\r\n\t  function _hasBinary(obj) {\r\n\t\tif (!obj) return false;\r\n\r\n\t\tif ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\r\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\r\n\t\t\t (global.Blob && obj instanceof Blob) ||\r\n\t\t\t (global.File && obj instanceof File)\r\n\t\t\t) {\r\n\t\t  return true;\r\n\t\t}\r\n\r\n\t\tif (isArray(obj)) {\r\n\t\t  for (var i = 0; i < obj.length; i++) {\r\n\t\t\t  if (_hasBinary(obj[i])) {\r\n\t\t\t\t  return true;\r\n\t\t\t  }\r\n\t\t  }\r\n\t\t} else if (obj && 'object' == typeof obj) {\r\n\t\t  // see: https://github.com/Automattic/has-binary/pull/4\r\n\t\t  if (obj.toJSON && 'function' == typeof obj.toJSON) {\r\n\t\t\tobj = obj.toJSON();\r\n\t\t  }\r\n\r\n\t\t  for (var key in obj) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\r\n\t\t\t  return true;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t  }\r\n\r\n\t  return _hasBinary(data);\r\n\t}\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"isarray\":43}],42:[function(_dereq_,module,exports){\r\n\targuments[4][23][0].apply(exports,arguments)\r\n\t},{\"dup\":23}],43:[function(_dereq_,module,exports){\r\n\targuments[4][24][0].apply(exports,arguments)\r\n\t},{\"dup\":24}],44:[function(_dereq_,module,exports){\r\n\targuments[4][25][0].apply(exports,arguments)\r\n\t},{\"dup\":25}],45:[function(_dereq_,module,exports){\r\n\targuments[4][28][0].apply(exports,arguments)\r\n\t},{\"dup\":28}],46:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/*global Blob,File*/\r\n\r\n\t/**\r\n\t * Module requirements\r\n\t */\r\n\r\n\tvar isArray = _dereq_('isarray');\r\n\tvar isBuf = _dereq_('./is-buffer');\r\n\r\n\t/**\r\n\t * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\r\n\t * Anything with blobs or files should be fed through removeBlobs before coming\r\n\t * here.\r\n\t *\r\n\t * @param {Object} packet - socket.io event packet\r\n\t * @return {Object} with deconstructed packet and list of buffers\r\n\t * @api public\r\n\t */\r\n\r\n\texports.deconstructPacket = function(packet){\r\n\t  var buffers = [];\r\n\t  var packetData = packet.data;\r\n\r\n\t  function _deconstructPacket(data) {\r\n\t\tif (!data) return data;\r\n\r\n\t\tif (isBuf(data)) {\r\n\t\t  var placeholder = { _placeholder: true, num: buffers.length };\r\n\t\t  buffers.push(data);\r\n\t\t  return placeholder;\r\n\t\t} else if (isArray(data)) {\r\n\t\t  var newData = new Array(data.length);\r\n\t\t  for (var i = 0; i < data.length; i++) {\r\n\t\t\tnewData[i] = _deconstructPacket(data[i]);\r\n\t\t  }\r\n\t\t  return newData;\r\n\t\t} else if ('object' == typeof data && !(data instanceof Date)) {\r\n\t\t  var newData = {};\r\n\t\t  for (var key in data) {\r\n\t\t\tnewData[key] = _deconstructPacket(data[key]);\r\n\t\t  }\r\n\t\t  return newData;\r\n\t\t}\r\n\t\treturn data;\r\n\t  }\r\n\r\n\t  var pack = packet;\r\n\t  pack.data = _deconstructPacket(packetData);\r\n\t  pack.attachments = buffers.length; // number of binary 'attachments'\r\n\t  return {packet: pack, buffers: buffers};\r\n\t};\r\n\r\n\t/**\r\n\t * Reconstructs a binary packet from its placeholder packet and buffers\r\n\t *\r\n\t * @param {Object} packet - event packet with placeholders\r\n\t * @param {Array} buffers - binary buffers to put in placeholder positions\r\n\t * @return {Object} reconstructed packet\r\n\t * @api public\r\n\t */\r\n\r\n\texports.reconstructPacket = function(packet, buffers) {\r\n\t  var curPlaceHolder = 0;\r\n\r\n\t  function _reconstructPacket(data) {\r\n\t\tif (data && data._placeholder) {\r\n\t\t  var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\r\n\t\t  return buf;\r\n\t\t} else if (isArray(data)) {\r\n\t\t  for (var i = 0; i < data.length; i++) {\r\n\t\t\tdata[i] = _reconstructPacket(data[i]);\r\n\t\t  }\r\n\t\t  return data;\r\n\t\t} else if (data && 'object' == typeof data) {\r\n\t\t  for (var key in data) {\r\n\t\t\tdata[key] = _reconstructPacket(data[key]);\r\n\t\t  }\r\n\t\t  return data;\r\n\t\t}\r\n\t\treturn data;\r\n\t  }\r\n\r\n\t  packet.data = _reconstructPacket(packet.data);\r\n\t  packet.attachments = undefined; // no longer useful\r\n\t  return packet;\r\n\t};\r\n\r\n\t/**\r\n\t * Asynchronously removes Blobs or Files from data via\r\n\t * FileReader's readAsArrayBuffer method. Used before encoding\r\n\t * data as msgpack. Calls callback with the blobless data.\r\n\t *\r\n\t * @param {Object} data\r\n\t * @param {Function} callback\r\n\t * @api private\r\n\t */\r\n\r\n\texports.removeBlobs = function(data, callback) {\r\n\t  function _removeBlobs(obj, curKey, containingObject) {\r\n\t\tif (!obj) return obj;\r\n\r\n\t\t// convert any blob\r\n\t\tif ((global.Blob && obj instanceof Blob) ||\r\n\t\t\t(global.File && obj instanceof File)) {\r\n\t\t  pendingBlobs++;\r\n\r\n\t\t  // async filereader\r\n\t\t  var fileReader = new FileReader();\r\n\t\t  fileReader.onload = function() { // this.result == arraybuffer\r\n\t\t\tif (containingObject) {\r\n\t\t\t  containingObject[curKey] = this.result;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t  bloblessData = this.result;\r\n\t\t\t}\r\n\r\n\t\t\t// if nothing pending its callback time\r\n\t\t\tif(! --pendingBlobs) {\r\n\t\t\t  callback(bloblessData);\r\n\t\t\t}\r\n\t\t  };\r\n\r\n\t\t  fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\r\n\t\t} else if (isArray(obj)) { // handle array\r\n\t\t  for (var i = 0; i < obj.length; i++) {\r\n\t\t\t_removeBlobs(obj[i], i, obj);\r\n\t\t  }\r\n\t\t} else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\r\n\t\t  for (var key in obj) {\r\n\t\t\t_removeBlobs(obj[key], key, obj);\r\n\t\t  }\r\n\t\t}\r\n\t  }\r\n\r\n\t  var pendingBlobs = 0;\r\n\t  var bloblessData = data;\r\n\t  _removeBlobs(bloblessData);\r\n\t  if (!pendingBlobs) {\r\n\t\tcallback(bloblessData);\r\n\t  }\r\n\t};\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{\"./is-buffer\":48,\"isarray\":43}],47:[function(_dereq_,module,exports){\r\n\r\n\t/**\r\n\t * Module dependencies.\r\n\t */\r\n\r\n\tvar debug = _dereq_('debug')('socket.io-parser');\r\n\tvar json = _dereq_('json3');\r\n\tvar isArray = _dereq_('isarray');\r\n\tvar Emitter = _dereq_('component-emitter');\r\n\tvar binary = _dereq_('./binary');\r\n\tvar isBuf = _dereq_('./is-buffer');\r\n\r\n\t/**\r\n\t * Protocol version.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.protocol = 4;\r\n\r\n\t/**\r\n\t * Packet types.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.types = [\r\n\t  'CONNECT',\r\n\t  'DISCONNECT',\r\n\t  'EVENT',\r\n\t  'BINARY_EVENT',\r\n\t  'ACK',\r\n\t  'BINARY_ACK',\r\n\t  'ERROR'\r\n\t];\r\n\r\n\t/**\r\n\t * Packet type `connect`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.CONNECT = 0;\r\n\r\n\t/**\r\n\t * Packet type `disconnect`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.DISCONNECT = 1;\r\n\r\n\t/**\r\n\t * Packet type `event`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.EVENT = 2;\r\n\r\n\t/**\r\n\t * Packet type `ack`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.ACK = 3;\r\n\r\n\t/**\r\n\t * Packet type `error`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.ERROR = 4;\r\n\r\n\t/**\r\n\t * Packet type 'binary event'\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.BINARY_EVENT = 5;\r\n\r\n\t/**\r\n\t * Packet type `binary ack`. For acks with binary arguments.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.BINARY_ACK = 6;\r\n\r\n\t/**\r\n\t * Encoder constructor.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.Encoder = Encoder;\r\n\r\n\t/**\r\n\t * Decoder constructor.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\texports.Decoder = Decoder;\r\n\r\n\t/**\r\n\t * A socket.io Encoder instance\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Encoder() {}\r\n\r\n\t/**\r\n\t * Encode a packet as a single string if non-binary, or as a\r\n\t * buffer sequence, depending on packet type.\r\n\t *\r\n\t * @param {Object} obj - packet object\r\n\t * @param {Function} callback - function to handle encodings (likely engine.write)\r\n\t * @return Calls callback with Array of encodings\r\n\t * @api public\r\n\t */\r\n\r\n\tEncoder.prototype.encode = function(obj, callback){\r\n\t  debug('encoding packet %j', obj);\r\n\r\n\t  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\r\n\t\tencodeAsBinary(obj, callback);\r\n\t  }\r\n\t  else {\r\n\t\tvar encoding = encodeAsString(obj);\r\n\t\tcallback([encoding]);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Encode packet as string.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @return {String} encoded\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction encodeAsString(obj) {\r\n\t  var str = '';\r\n\t  var nsp = false;\r\n\r\n\t  // first is type\r\n\t  str += obj.type;\r\n\r\n\t  // attachments if we have them\r\n\t  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\r\n\t\tstr += obj.attachments;\r\n\t\tstr += '-';\r\n\t  }\r\n\r\n\t  // if we have a namespace other than `/`\r\n\t  // we append it followed by a comma `,`\r\n\t  if (obj.nsp && '/' != obj.nsp) {\r\n\t\tnsp = true;\r\n\t\tstr += obj.nsp;\r\n\t  }\r\n\r\n\t  // immediately followed by the id\r\n\t  if (null != obj.id) {\r\n\t\tif (nsp) {\r\n\t\t  str += ',';\r\n\t\t  nsp = false;\r\n\t\t}\r\n\t\tstr += obj.id;\r\n\t  }\r\n\r\n\t  // json data\r\n\t  if (null != obj.data) {\r\n\t\tif (nsp) str += ',';\r\n\t\tstr += json.stringify(obj.data);\r\n\t  }\r\n\r\n\t  debug('encoded %j as %s', obj, str);\r\n\t  return str;\r\n\t}\r\n\r\n\t/**\r\n\t * Encode packet as 'buffer sequence' by removing blobs, and\r\n\t * deconstructing packet into object with placeholders and\r\n\t * a list of buffers.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @return {Buffer} encoded\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction encodeAsBinary(obj, callback) {\r\n\r\n\t  function writeEncoding(bloblessData) {\r\n\t\tvar deconstruction = binary.deconstructPacket(bloblessData);\r\n\t\tvar pack = encodeAsString(deconstruction.packet);\r\n\t\tvar buffers = deconstruction.buffers;\r\n\r\n\t\tbuffers.unshift(pack); // add packet info to beginning of data list\r\n\t\tcallback(buffers); // write all the buffers\r\n\t  }\r\n\r\n\t  binary.removeBlobs(obj, writeEncoding);\r\n\t}\r\n\r\n\t/**\r\n\t * A socket.io Decoder instance\r\n\t *\r\n\t * @return {Object} decoder\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Decoder() {\r\n\t  this.reconstructor = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Mix in `Emitter` with Decoder.\r\n\t */\r\n\r\n\tEmitter(Decoder.prototype);\r\n\r\n\t/**\r\n\t * Decodes an ecoded packet string into packet JSON.\r\n\t *\r\n\t * @param {String} obj - encoded packet\r\n\t * @return {Object} packet\r\n\t * @api public\r\n\t */\r\n\r\n\tDecoder.prototype.add = function(obj) {\r\n\t  var packet;\r\n\t  if ('string' == typeof obj) {\r\n\t\tpacket = decodeString(obj);\r\n\t\tif (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\r\n\t\t  this.reconstructor = new BinaryReconstructor(packet);\r\n\r\n\t\t  // no attachments, labeled binary but no binary data to follow\r\n\t\t  if (this.reconstructor.reconPack.attachments === 0) {\r\n\t\t\tthis.emit('decoded', packet);\r\n\t\t  }\r\n\t\t} else { // non-binary full packet\r\n\t\t  this.emit('decoded', packet);\r\n\t\t}\r\n\t  }\r\n\t  else if (isBuf(obj) || obj.base64) { // raw binary data\r\n\t\tif (!this.reconstructor) {\r\n\t\t  throw new Error('got binary data when not reconstructing a packet');\r\n\t\t} else {\r\n\t\t  packet = this.reconstructor.takeBinaryData(obj);\r\n\t\t  if (packet) { // received final buffer\r\n\t\t\tthis.reconstructor = null;\r\n\t\t\tthis.emit('decoded', packet);\r\n\t\t  }\r\n\t\t}\r\n\t  }\r\n\t  else {\r\n\t\tthrow new Error('Unknown type: ' + obj);\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * Decode a packet String (JSON data)\r\n\t *\r\n\t * @param {String} str\r\n\t * @return {Object} packet\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction decodeString(str) {\r\n\t  var p = {};\r\n\t  var i = 0;\r\n\r\n\t  // look up type\r\n\t  p.type = Number(str.charAt(0));\r\n\t  if (null == exports.types[p.type]) return error();\r\n\r\n\t  // look up attachments if type binary\r\n\t  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\r\n\t\tvar buf = '';\r\n\t\twhile (str.charAt(++i) != '-') {\r\n\t\t  buf += str.charAt(i);\r\n\t\t  if (i == str.length) break;\r\n\t\t}\r\n\t\tif (buf != Number(buf) || str.charAt(i) != '-') {\r\n\t\t  throw new Error('Illegal attachments');\r\n\t\t}\r\n\t\tp.attachments = Number(buf);\r\n\t  }\r\n\r\n\t  // look up namespace (if any)\r\n\t  if ('/' == str.charAt(i + 1)) {\r\n\t\tp.nsp = '';\r\n\t\twhile (++i) {\r\n\t\t  var c = str.charAt(i);\r\n\t\t  if (',' == c) break;\r\n\t\t  p.nsp += c;\r\n\t\t  if (i == str.length) break;\r\n\t\t}\r\n\t  } else {\r\n\t\tp.nsp = '/';\r\n\t  }\r\n\r\n\t  // look up id\r\n\t  var next = str.charAt(i + 1);\r\n\t  if ('' !== next && Number(next) == next) {\r\n\t\tp.id = '';\r\n\t\twhile (++i) {\r\n\t\t  var c = str.charAt(i);\r\n\t\t  if (null == c || Number(c) != c) {\r\n\t\t\t--i;\r\n\t\t\tbreak;\r\n\t\t  }\r\n\t\t  p.id += str.charAt(i);\r\n\t\t  if (i == str.length) break;\r\n\t\t}\r\n\t\tp.id = Number(p.id);\r\n\t  }\r\n\r\n\t  // look up json data\r\n\t  if (str.charAt(++i)) {\r\n\t\ttry {\r\n\t\t  p.data = json.parse(str.substr(i));\r\n\t\t} catch(e){\r\n\t\t  return error();\r\n\t\t}\r\n\t  }\r\n\r\n\t  debug('decoded %s as %j', str, p);\r\n\t  return p;\r\n\t}\r\n\r\n\t/**\r\n\t * Deallocates a parser's resources\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tDecoder.prototype.destroy = function() {\r\n\t  if (this.reconstructor) {\r\n\t\tthis.reconstructor.finishedReconstruction();\r\n\t  }\r\n\t};\r\n\r\n\t/**\r\n\t * A manager of a binary event's 'buffer sequence'. Should\r\n\t * be constructed whenever a packet of type BINARY_EVENT is\r\n\t * decoded.\r\n\t *\r\n\t * @param {Object} packet\r\n\t * @return {BinaryReconstructor} initialized reconstructor\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction BinaryReconstructor(packet) {\r\n\t  this.reconPack = packet;\r\n\t  this.buffers = [];\r\n\t}\r\n\r\n\t/**\r\n\t * Method to be called when binary data received from connection\r\n\t * after a BINARY_EVENT packet.\r\n\t *\r\n\t * @param {Buffer | ArrayBuffer} binData - the raw binary data received\r\n\t * @return {null | Object} returns null if more binary data is expected or\r\n\t *   a reconstructed packet object if all buffers have been received.\r\n\t * @api private\r\n\t */\r\n\r\n\tBinaryReconstructor.prototype.takeBinaryData = function(binData) {\r\n\t  this.buffers.push(binData);\r\n\t  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\r\n\t\tvar packet = binary.reconstructPacket(this.reconPack, this.buffers);\r\n\t\tthis.finishedReconstruction();\r\n\t\treturn packet;\r\n\t  }\r\n\t  return null;\r\n\t};\r\n\r\n\t/**\r\n\t * Cleans up binary packet reconstruction variables.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tBinaryReconstructor.prototype.finishedReconstruction = function() {\r\n\t  this.reconPack = null;\r\n\t  this.buffers = [];\r\n\t};\r\n\r\n\tfunction error(data){\r\n\t  return {\r\n\t\ttype: exports.ERROR,\r\n\t\tdata: 'parser error'\r\n\t  };\r\n\t}\r\n\r\n\t},{\"./binary\":46,\"./is-buffer\":48,\"component-emitter\":49,\"debug\":39,\"isarray\":43,\"json3\":50}],48:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\r\n\tmodule.exports = isBuf;\r\n\r\n\t/**\r\n\t * Returns true if obj is a buffer or an arraybuffer.\r\n\t *\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction isBuf(obj) {\r\n\t  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\r\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer);\r\n\t}\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{}],49:[function(_dereq_,module,exports){\r\n\targuments[4][15][0].apply(exports,arguments)\r\n\t},{\"dup\":15}],50:[function(_dereq_,module,exports){\r\n\t(function (global){\r\n\t/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\r\n\t;(function () {\r\n\t  // Detect the `define` function exposed by asynchronous module loaders. The\r\n\t  // strict `define` check is necessary for compatibility with `r.js`.\r\n\t  var isLoader = typeof define === \"function\" && define.amd;\r\n\r\n\t  // A set of types used to distinguish objects from primitives.\r\n\t  var objectTypes = {\r\n\t\t\"function\": true,\r\n\t\t\"object\": true\r\n\t  };\r\n\r\n\t  // Detect the `exports` object exposed by CommonJS implementations.\r\n\t  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\r\n\r\n\t  // Use the `global` object exposed by Node (including Browserify via\r\n\t  // `insert-module-globals`), Narwhal, and Ringo as the default context,\r\n\t  // and the `window` object in browsers. Rhino exports a `global` function\r\n\t  // instead.\r\n\t  var root = objectTypes[typeof window] && window || this,\r\n\t\t  freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\r\n\r\n\t  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\r\n\t\troot = freeGlobal;\r\n\t  }\r\n\r\n\t  // Public: Initializes JSON 3 using the given `context` object, attaching the\r\n\t  // `stringify` and `parse` functions to the specified `exports` object.\r\n\t  function runInContext(context, exports) {\r\n\t\tcontext || (context = root[\"Object\"]());\r\n\t\texports || (exports = root[\"Object\"]());\r\n\r\n\t\t// Native constructor aliases.\r\n\t\tvar Number = context[\"Number\"] || root[\"Number\"],\r\n\t\t\tString = context[\"String\"] || root[\"String\"],\r\n\t\t\tObject = context[\"Object\"] || root[\"Object\"],\r\n\t\t\tDate = context[\"Date\"] || root[\"Date\"],\r\n\t\t\tSyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\r\n\t\t\tTypeError = context[\"TypeError\"] || root[\"TypeError\"],\r\n\t\t\tMath = context[\"Math\"] || root[\"Math\"],\r\n\t\t\tnativeJSON = context[\"JSON\"] || root[\"JSON\"];\r\n\r\n\t\t// Delegate to the native `stringify` and `parse` implementations.\r\n\t\tif (typeof nativeJSON == \"object\" && nativeJSON) {\r\n\t\t  exports.stringify = nativeJSON.stringify;\r\n\t\t  exports.parse = nativeJSON.parse;\r\n\t\t}\r\n\r\n\t\t// Convenience aliases.\r\n\t\tvar objectProto = Object.prototype,\r\n\t\t\tgetClass = objectProto.toString,\r\n\t\t\tisProperty, forEach, undef;\r\n\r\n\t\t// Test the `Date#getUTC*` methods. Based on work by @Yaffle.\r\n\t\tvar isExtended = new Date(-3509827334573292);\r\n\t\ttry {\r\n\t\t  // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\r\n\t\t  // results for certain dates in Opera >= 10.53.\r\n\t\t  isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\r\n\t\t\t// Safari < 2.0.2 stores the internal millisecond time value correctly,\r\n\t\t\t// but clips the values returned by the date methods to the range of\r\n\t\t\t// signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\r\n\t\t\tisExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\r\n\t\t} catch (exception) {}\r\n\r\n\t\t// Internal: Determines whether the native `JSON.stringify` and `parse`\r\n\t\t// implementations are spec-compliant. Based on work by Ken Snyder.\r\n\t\tfunction has(name) {\r\n\t\t  if (has[name] !== undef) {\r\n\t\t\t// Return cached feature test result.\r\n\t\t\treturn has[name];\r\n\t\t  }\r\n\t\t  var isSupported;\r\n\t\t  if (name == \"bug-string-char-index\") {\r\n\t\t\t// IE <= 7 doesn't support accessing string characters using square\r\n\t\t\t// bracket notation. IE 8 only supports this for primitives.\r\n\t\t\tisSupported = \"a\"[0] != \"a\";\r\n\t\t  } else if (name == \"json\") {\r\n\t\t\t// Indicates whether both `JSON.stringify` and `JSON.parse` are\r\n\t\t\t// supported.\r\n\t\t\tisSupported = has(\"json-stringify\") && has(\"json-parse\");\r\n\t\t  } else {\r\n\t\t\tvar value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\r\n\t\t\t// Test `JSON.stringify`.\r\n\t\t\tif (name == \"json-stringify\") {\r\n\t\t\t  var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\r\n\t\t\t  if (stringifySupported) {\r\n\t\t\t\t// A test function object with a custom `toJSON` method.\r\n\t\t\t\t(value = function () {\r\n\t\t\t\t  return 1;\r\n\t\t\t\t}).toJSON = value;\r\n\t\t\t\ttry {\r\n\t\t\t\t  stringifySupported =\r\n\t\t\t\t\t// Firefox 3.1b1 and b2 serialize string, number, and boolean\r\n\t\t\t\t\t// primitives as object literals.\r\n\t\t\t\t\tstringify(0) === \"0\" &&\r\n\t\t\t\t\t// FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\r\n\t\t\t\t\t// literals.\r\n\t\t\t\t\tstringify(new Number()) === \"0\" &&\r\n\t\t\t\t\tstringify(new String()) == '\"\"' &&\r\n\t\t\t\t\t// FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\r\n\t\t\t\t\t// does not define a canonical JSON representation (this applies to\r\n\t\t\t\t\t// objects with `toJSON` properties as well, *unless* they are nested\r\n\t\t\t\t\t// within an object or array).\r\n\t\t\t\t\tstringify(getClass) === undef &&\r\n\t\t\t\t\t// IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\r\n\t\t\t\t\t// FF 3.1b3 pass this test.\r\n\t\t\t\t\tstringify(undef) === undef &&\r\n\t\t\t\t\t// Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\r\n\t\t\t\t\t// respectively, if the value is omitted entirely.\r\n\t\t\t\t\tstringify() === undef &&\r\n\t\t\t\t\t// FF 3.1b1, 2 throw an error if the given value is not a number,\r\n\t\t\t\t\t// string, array, object, Boolean, or `null` literal. This applies to\r\n\t\t\t\t\t// objects with custom `toJSON` methods as well, unless they are nested\r\n\t\t\t\t\t// inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\r\n\t\t\t\t\t// methods entirely.\r\n\t\t\t\t\tstringify(value) === \"1\" &&\r\n\t\t\t\t\tstringify([value]) == \"[1]\" &&\r\n\t\t\t\t\t// Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\r\n\t\t\t\t\t// `\"[null]\"`.\r\n\t\t\t\t\tstringify([undef]) == \"[null]\" &&\r\n\t\t\t\t\t// YUI 3.0.0b1 fails to serialize `null` literals.\r\n\t\t\t\t\tstringify(null) == \"null\" &&\r\n\t\t\t\t\t// FF 3.1b1, 2 halts serialization if an array contains a function:\r\n\t\t\t\t\t// `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\r\n\t\t\t\t\t// elides non-JSON values from objects and arrays, unless they\r\n\t\t\t\t\t// define custom `toJSON` methods.\r\n\t\t\t\t\tstringify([undef, getClass, null]) == \"[null,null,null]\" &&\r\n\t\t\t\t\t// Simple serialization test. FF 3.1b1 uses Unicode escape sequences\r\n\t\t\t\t\t// where character escape codes are expected (e.g., `\\b` => `\\u0008`).\r\n\t\t\t\t\tstringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\r\n\t\t\t\t\t// FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\r\n\t\t\t\t\tstringify(null, value) === \"1\" &&\r\n\t\t\t\t\tstringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\r\n\t\t\t\t\t// JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\r\n\t\t\t\t\t// serialize extended years.\r\n\t\t\t\t\tstringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\r\n\t\t\t\t\t// The milliseconds are optional in ES 5, but required in 5.1.\r\n\t\t\t\t\tstringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\r\n\t\t\t\t\t// Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\r\n\t\t\t\t\t// four-digit years instead of six-digit years. Credits: @Yaffle.\r\n\t\t\t\t\tstringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\r\n\t\t\t\t\t// Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\r\n\t\t\t\t\t// values less than 1000. Credits: @Yaffle.\r\n\t\t\t\t\tstringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\r\n\t\t\t\t} catch (exception) {\r\n\t\t\t\t  stringifySupported = false;\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  isSupported = stringifySupported;\r\n\t\t\t}\r\n\t\t\t// Test `JSON.parse`.\r\n\t\t\tif (name == \"json-parse\") {\r\n\t\t\t  var parse = exports.parse;\r\n\t\t\t  if (typeof parse == \"function\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t  // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\r\n\t\t\t\t  // Conforming implementations should also coerce the initial argument to\r\n\t\t\t\t  // a string prior to parsing.\r\n\t\t\t\t  if (parse(\"0\") === 0 && !parse(false)) {\r\n\t\t\t\t\t// Simple parsing test.\r\n\t\t\t\t\tvalue = parse(serialized);\r\n\t\t\t\t\tvar parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\r\n\t\t\t\t\tif (parseSupported) {\r\n\t\t\t\t\t  try {\r\n\t\t\t\t\t\t// Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\r\n\t\t\t\t\t\tparseSupported = !parse('\"\\t\"');\r\n\t\t\t\t\t  } catch (exception) {}\r\n\t\t\t\t\t  if (parseSupported) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t  // FF 4.0 and 4.0.1 allow leading `+` signs and leading\r\n\t\t\t\t\t\t  // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\r\n\t\t\t\t\t\t  // certain octal literals.\r\n\t\t\t\t\t\t  parseSupported = parse(\"01\") !== 1;\r\n\t\t\t\t\t\t} catch (exception) {}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  if (parseSupported) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t  // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\r\n\t\t\t\t\t\t  // points. These environments, along with FF 3.1b1 and 2,\r\n\t\t\t\t\t\t  // also allow trailing commas in JSON objects and arrays.\r\n\t\t\t\t\t\t  parseSupported = parse(\"1.\") !== 1;\r\n\t\t\t\t\t\t} catch (exception) {}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t  }\r\n\t\t\t\t} catch (exception) {\r\n\t\t\t\t  parseSupported = false;\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  isSupported = parseSupported;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t  return has[name] = !!isSupported;\r\n\t\t}\r\n\r\n\t\tif (!has(\"json\")) {\r\n\t\t  // Common `[[Class]]` name aliases.\r\n\t\t  var functionClass = \"[object Function]\",\r\n\t\t\t  dateClass = \"[object Date]\",\r\n\t\t\t  numberClass = \"[object Number]\",\r\n\t\t\t  stringClass = \"[object String]\",\r\n\t\t\t  arrayClass = \"[object Array]\",\r\n\t\t\t  booleanClass = \"[object Boolean]\";\r\n\r\n\t\t  // Detect incomplete support for accessing string characters by index.\r\n\t\t  var charIndexBuggy = has(\"bug-string-char-index\");\r\n\r\n\t\t  // Define additional utility methods if the `Date` methods are buggy.\r\n\t\t  if (!isExtended) {\r\n\t\t\tvar floor = Math.floor;\r\n\t\t\t// A mapping between the months of the year and the number of days between\r\n\t\t\t// January 1st and the first of the respective month.\r\n\t\t\tvar Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\r\n\t\t\t// Internal: Calculates the number of days between the Unix epoch and the\r\n\t\t\t// first day of the given month.\r\n\t\t\tvar getDay = function (year, month) {\r\n\t\t\t  return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\r\n\t\t\t};\r\n\t\t  }\r\n\r\n\t\t  // Internal: Determines if a property is a direct property of the given\r\n\t\t  // object. Delegates to the native `Object#hasOwnProperty` method.\r\n\t\t  if (!(isProperty = objectProto.hasOwnProperty)) {\r\n\t\t\tisProperty = function (property) {\r\n\t\t\t  var members = {}, constructor;\r\n\t\t\t  if ((members.__proto__ = null, members.__proto__ = {\r\n\t\t\t\t// The *proto* property cannot be set multiple times in recent\r\n\t\t\t\t// versions of Firefox and SeaMonkey.\r\n\t\t\t\t\"toString\": 1\r\n\t\t\t  }, members).toString != getClass) {\r\n\t\t\t\t// Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\r\n\t\t\t\t// supports the mutable *proto* property.\r\n\t\t\t\tisProperty = function (property) {\r\n\t\t\t\t  // Capture and break the object's prototype chain (see section 8.6.2\r\n\t\t\t\t  // of the ES 5.1 spec). The parenthesized expression prevents an\r\n\t\t\t\t  // unsafe transformation by the Closure Compiler.\r\n\t\t\t\t  var original = this.__proto__, result = property in (this.__proto__ = null, this);\r\n\t\t\t\t  // Restore the original prototype chain.\r\n\t\t\t\t  this.__proto__ = original;\r\n\t\t\t\t  return result;\r\n\t\t\t\t};\r\n\t\t\t  } else {\r\n\t\t\t\t// Capture a reference to the top-level `Object` constructor.\r\n\t\t\t\tconstructor = members.constructor;\r\n\t\t\t\t// Use the `constructor` property to simulate `Object#hasOwnProperty` in\r\n\t\t\t\t// other environments.\r\n\t\t\t\tisProperty = function (property) {\r\n\t\t\t\t  var parent = (this.constructor || constructor).prototype;\r\n\t\t\t\t  return property in this && !(property in parent && this[property] === parent[property]);\r\n\t\t\t\t};\r\n\t\t\t  }\r\n\t\t\t  members = null;\r\n\t\t\t  return isProperty.call(this, property);\r\n\t\t\t};\r\n\t\t  }\r\n\r\n\t\t  // Internal: Normalizes the `for...in` iteration algorithm across\r\n\t\t  // environments. Each enumerated key is yielded to a `callback` function.\r\n\t\t  forEach = function (object, callback) {\r\n\t\t\tvar size = 0, Properties, members, property;\r\n\r\n\t\t\t// Tests for bugs in the current environment's `for...in` algorithm. The\r\n\t\t\t// `valueOf` property inherits the non-enumerable flag from\r\n\t\t\t// `Object.prototype` in older versions of IE, Netscape, and Mozilla.\r\n\t\t\t(Properties = function () {\r\n\t\t\t  this.valueOf = 0;\r\n\t\t\t}).prototype.valueOf = 0;\r\n\r\n\t\t\t// Iterate over a new instance of the `Properties` class.\r\n\t\t\tmembers = new Properties();\r\n\t\t\tfor (property in members) {\r\n\t\t\t  // Ignore all properties inherited from `Object.prototype`.\r\n\t\t\t  if (isProperty.call(members, property)) {\r\n\t\t\t\tsize++;\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t\tProperties = members = null;\r\n\r\n\t\t\t// Normalize the iteration algorithm.\r\n\t\t\tif (!size) {\r\n\t\t\t  // A list of non-enumerable properties inherited from `Object.prototype`.\r\n\t\t\t  members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\r\n\t\t\t  // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\r\n\t\t\t  // properties.\r\n\t\t\t  forEach = function (object, callback) {\r\n\t\t\t\tvar isFunction = getClass.call(object) == functionClass, property, length;\r\n\t\t\t\tvar hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\r\n\t\t\t\tfor (property in object) {\r\n\t\t\t\t  // Gecko <= 1.0 enumerates the `prototype` property of functions under\r\n\t\t\t\t  // certain conditions; IE does not.\r\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\r\n\t\t\t\t\tcallback(property);\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t\t// Manually invoke the callback for each non-enumerable property.\r\n\t\t\t\tfor (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\r\n\t\t\t  };\r\n\t\t\t} else if (size == 2) {\r\n\t\t\t  // Safari <= 2.0.4 enumerates shadowed properties twice.\r\n\t\t\t  forEach = function (object, callback) {\r\n\t\t\t\t// Create a set of iterated properties.\r\n\t\t\t\tvar members = {}, isFunction = getClass.call(object) == functionClass, property;\r\n\t\t\t\tfor (property in object) {\r\n\t\t\t\t  // Store each property name to prevent double enumeration. The\r\n\t\t\t\t  // `prototype` property of functions is not enumerated due to cross-\r\n\t\t\t\t  // environment inconsistencies.\r\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\r\n\t\t\t\t\tcallback(property);\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t  };\r\n\t\t\t} else {\r\n\t\t\t  // No bugs detected; use the standard `for...in` algorithm.\r\n\t\t\t  forEach = function (object, callback) {\r\n\t\t\t\tvar isFunction = getClass.call(object) == functionClass, property, isConstructor;\r\n\t\t\t\tfor (property in object) {\r\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\r\n\t\t\t\t\tcallback(property);\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t\t// Manually invoke the callback for the `constructor` property due to\r\n\t\t\t\t// cross-environment inconsistencies.\r\n\t\t\t\tif (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\r\n\t\t\t\t  callback(property);\r\n\t\t\t\t}\r\n\t\t\t  };\r\n\t\t\t}\r\n\t\t\treturn forEach(object, callback);\r\n\t\t  };\r\n\r\n\t\t  // Public: Serializes a JavaScript `value` as a JSON string. The optional\r\n\t\t  // `filter` argument may specify either a function that alters how object and\r\n\t\t  // array members are serialized, or an array of strings and numbers that\r\n\t\t  // indicates which properties should be serialized. The optional `width`\r\n\t\t  // argument may be either a string or number that specifies the indentation\r\n\t\t  // level of the output.\r\n\t\t  if (!has(\"json-stringify\")) {\r\n\t\t\t// Internal: A map of control characters and their escaped equivalents.\r\n\t\t\tvar Escapes = {\r\n\t\t\t  92: \"\\\\\\\\\",\r\n\t\t\t  34: '\\\\\"',\r\n\t\t\t  8: \"\\\\b\",\r\n\t\t\t  12: \"\\\\f\",\r\n\t\t\t  10: \"\\\\n\",\r\n\t\t\t  13: \"\\\\r\",\r\n\t\t\t  9: \"\\\\t\"\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Converts `value` into a zero-padded string such that its\r\n\t\t\t// length is at least equal to `width`. The `width` must be <= 6.\r\n\t\t\tvar leadingZeroes = \"000000\";\r\n\t\t\tvar toPaddedString = function (width, value) {\r\n\t\t\t  // The `|| 0` expression is necessary to work around a bug in\r\n\t\t\t  // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\r\n\t\t\t  return (leadingZeroes + (value || 0)).slice(-width);\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Double-quotes a string `value`, replacing all ASCII control\r\n\t\t\t// characters (characters with code unit values between 0 and 31) with\r\n\t\t\t// their escaped equivalents. This is an implementation of the\r\n\t\t\t// `Quote(value)` operation defined in ES 5.1 section 15.12.3.\r\n\t\t\tvar unicodePrefix = \"\\\\u00\";\r\n\t\t\tvar quote = function (value) {\r\n\t\t\t  var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\r\n\t\t\t  var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\r\n\t\t\t  for (; index < length; index++) {\r\n\t\t\t\tvar charCode = value.charCodeAt(index);\r\n\t\t\t\t// If the character is a control character, append its Unicode or\r\n\t\t\t\t// shorthand escape sequence; otherwise, append the character as-is.\r\n\t\t\t\tswitch (charCode) {\r\n\t\t\t\t  case 8: case 9: case 10: case 12: case 13: case 34: case 92:\r\n\t\t\t\t\tresult += Escapes[charCode];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t  default:\r\n\t\t\t\t\tif (charCode < 32) {\r\n\t\t\t\t\t  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\r\n\t\t\t\t\t  break;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult += useCharIndex ? symbols[index] : value.charAt(index);\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  return result + '\"';\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Recursively serializes an object. Implements the\r\n\t\t\t// `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\r\n\t\t\tvar serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\r\n\t\t\t  var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\r\n\t\t\t  try {\r\n\t\t\t\t// Necessary for host object support.\r\n\t\t\t\tvalue = object[property];\r\n\t\t\t  } catch (exception) {}\r\n\t\t\t  if (typeof value == \"object\" && value) {\r\n\t\t\t\tclassName = getClass.call(value);\r\n\t\t\t\tif (className == dateClass && !isProperty.call(value, \"toJSON\")) {\r\n\t\t\t\t  if (value > -1 / 0 && value < 1 / 0) {\r\n\t\t\t\t\t// Dates are serialized according to the `Date#toJSON` method\r\n\t\t\t\t\t// specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\r\n\t\t\t\t\t// for the ISO 8601 date time string format.\r\n\t\t\t\t\tif (getDay) {\r\n\t\t\t\t\t  // Manually compute the year, month, date, hours, minutes,\r\n\t\t\t\t\t  // seconds, and milliseconds if the `getUTC*` methods are\r\n\t\t\t\t\t  // buggy. Adapted from @Yaffle's `date-shim` project.\r\n\t\t\t\t\t  date = floor(value / 864e5);\r\n\t\t\t\t\t  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\r\n\t\t\t\t\t  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\r\n\t\t\t\t\t  date = 1 + date - getDay(year, month);\r\n\t\t\t\t\t  // The `time` value specifies the time within the day (see ES\r\n\t\t\t\t\t  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\r\n\t\t\t\t\t  // to compute `A modulo B`, as the `%` operator does not\r\n\t\t\t\t\t  // correspond to the `modulo` operation for negative numbers.\r\n\t\t\t\t\t  time = (value % 864e5 + 864e5) % 864e5;\r\n\t\t\t\t\t  // The hours, minutes, seconds, and milliseconds are obtained by\r\n\t\t\t\t\t  // decomposing the time within the day. See section 15.9.1.10.\r\n\t\t\t\t\t  hours = floor(time / 36e5) % 24;\r\n\t\t\t\t\t  minutes = floor(time / 6e4) % 60;\r\n\t\t\t\t\t  seconds = floor(time / 1e3) % 60;\r\n\t\t\t\t\t  milliseconds = time % 1e3;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t  year = value.getUTCFullYear();\r\n\t\t\t\t\t  month = value.getUTCMonth();\r\n\t\t\t\t\t  date = value.getUTCDate();\r\n\t\t\t\t\t  hours = value.getUTCHours();\r\n\t\t\t\t\t  minutes = value.getUTCMinutes();\r\n\t\t\t\t\t  seconds = value.getUTCSeconds();\r\n\t\t\t\t\t  milliseconds = value.getUTCMilliseconds();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Serialize extended years correctly.\r\n\t\t\t\t\tvalue = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\r\n\t\t\t\t\t  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\r\n\t\t\t\t\t  // Months, dates, hours, minutes, and seconds should have two\r\n\t\t\t\t\t  // digits; milliseconds should have three.\r\n\t\t\t\t\t  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\r\n\t\t\t\t\t  // Milliseconds are optional in ES 5.0, but required in 5.1.\r\n\t\t\t\t\t  \".\" + toPaddedString(3, milliseconds) + \"Z\";\r\n\t\t\t\t  } else {\r\n\t\t\t\t\tvalue = null;\r\n\t\t\t\t  }\r\n\t\t\t\t} else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\r\n\t\t\t\t  // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\r\n\t\t\t\t  // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\r\n\t\t\t\t  // ignores all `toJSON` methods on these objects unless they are\r\n\t\t\t\t  // defined directly on an instance.\r\n\t\t\t\t  value = value.toJSON(property);\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  if (callback) {\r\n\t\t\t\t// If a replacement function was provided, call it to obtain the value\r\n\t\t\t\t// for serialization.\r\n\t\t\t\tvalue = callback.call(object, property, value);\r\n\t\t\t  }\r\n\t\t\t  if (value === null) {\r\n\t\t\t\treturn \"null\";\r\n\t\t\t  }\r\n\t\t\t  className = getClass.call(value);\r\n\t\t\t  if (className == booleanClass) {\r\n\t\t\t\t// Booleans are represented literally.\r\n\t\t\t\treturn \"\" + value;\r\n\t\t\t  } else if (className == numberClass) {\r\n\t\t\t\t// JSON numbers must be finite. `Infinity` and `NaN` are serialized as\r\n\t\t\t\t// `\"null\"`.\r\n\t\t\t\treturn value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\r\n\t\t\t  } else if (className == stringClass) {\r\n\t\t\t\t// Strings are double-quoted and escaped.\r\n\t\t\t\treturn quote(\"\" + value);\r\n\t\t\t  }\r\n\t\t\t  // Recursively serialize objects and arrays.\r\n\t\t\t  if (typeof value == \"object\") {\r\n\t\t\t\t// Check for cyclic structures. This is a linear search; performance\r\n\t\t\t\t// is inversely proportional to the number of unique nested objects.\r\n\t\t\t\tfor (length = stack.length; length--;) {\r\n\t\t\t\t  if (stack[length] === value) {\r\n\t\t\t\t\t// Cyclic structures cannot be serialized by `JSON.stringify`.\r\n\t\t\t\t\tthrow TypeError();\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t\t// Add the object to the stack of traversed objects.\r\n\t\t\t\tstack.push(value);\r\n\t\t\t\tresults = [];\r\n\t\t\t\t// Save the current indentation level and indent one additional level.\r\n\t\t\t\tprefix = indentation;\r\n\t\t\t\tindentation += whitespace;\r\n\t\t\t\tif (className == arrayClass) {\r\n\t\t\t\t  // Recursively serialize array elements.\r\n\t\t\t\t  for (index = 0, length = value.length; index < length; index++) {\r\n\t\t\t\t\telement = serialize(index, value, callback, properties, whitespace, indentation, stack);\r\n\t\t\t\t\tresults.push(element === undef ? \"null\" : element);\r\n\t\t\t\t  }\r\n\t\t\t\t  result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\r\n\t\t\t\t} else {\r\n\t\t\t\t  // Recursively serialize object members. Members are selected from\r\n\t\t\t\t  // either a user-specified list of property names, or the object\r\n\t\t\t\t  // itself.\r\n\t\t\t\t  forEach(properties || value, function (property) {\r\n\t\t\t\t\tvar element = serialize(property, value, callback, properties, whitespace, indentation, stack);\r\n\t\t\t\t\tif (element !== undef) {\r\n\t\t\t\t\t  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\r\n\t\t\t\t\t  // is not the empty string, let `member` {quote(property) + \":\"}\r\n\t\t\t\t\t  // be the concatenation of `member` and the `space` character.\"\r\n\t\t\t\t\t  // The \"`space` character\" refers to the literal space\r\n\t\t\t\t\t  // character, not the `space` {width} argument provided to\r\n\t\t\t\t\t  // `JSON.stringify`.\r\n\t\t\t\t\t  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\r\n\t\t\t\t\t}\r\n\t\t\t\t  });\r\n\t\t\t\t  result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\r\n\t\t\t\t}\r\n\t\t\t\t// Remove the object from the traversed object stack.\r\n\t\t\t\tstack.pop();\r\n\t\t\t\treturn result;\r\n\t\t\t  }\r\n\t\t\t};\r\n\r\n\t\t\t// Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\r\n\t\t\texports.stringify = function (source, filter, width) {\r\n\t\t\t  var whitespace, callback, properties, className;\r\n\t\t\t  if (objectTypes[typeof filter] && filter) {\r\n\t\t\t\tif ((className = getClass.call(filter)) == functionClass) {\r\n\t\t\t\t  callback = filter;\r\n\t\t\t\t} else if (className == arrayClass) {\r\n\t\t\t\t  // Convert the property names array into a makeshift set.\r\n\t\t\t\t  properties = {};\r\n\t\t\t\t  for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  if (width) {\r\n\t\t\t\tif ((className = getClass.call(width)) == numberClass) {\r\n\t\t\t\t  // Convert the `width` to an integer and create a string containing\r\n\t\t\t\t  // `width` number of space characters.\r\n\t\t\t\t  if ((width -= width % 1) > 0) {\r\n\t\t\t\t\tfor (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\r\n\t\t\t\t  }\r\n\t\t\t\t} else if (className == stringClass) {\r\n\t\t\t\t  whitespace = width.length <= 10 ? width : width.slice(0, 10);\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  // Opera <= 7.54u2 discards the values associated with empty string keys\r\n\t\t\t  // (`\"\"`) only if they are used directly within an object member list\r\n\t\t\t  // (e.g., `!(\"\" in { \"\": 1})`).\r\n\t\t\t  return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\r\n\t\t\t};\r\n\t\t  }\r\n\r\n\t\t  // Public: Parses a JSON source string.\r\n\t\t  if (!has(\"json-parse\")) {\r\n\t\t\tvar fromCharCode = String.fromCharCode;\r\n\r\n\t\t\t// Internal: A map of escaped control characters and their unescaped\r\n\t\t\t// equivalents.\r\n\t\t\tvar Unescapes = {\r\n\t\t\t  92: \"\\\\\",\r\n\t\t\t  34: '\"',\r\n\t\t\t  47: \"/\",\r\n\t\t\t  98: \"\\b\",\r\n\t\t\t  116: \"\\t\",\r\n\t\t\t  110: \"\\n\",\r\n\t\t\t  102: \"\\f\",\r\n\t\t\t  114: \"\\r\"\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Stores the parser state.\r\n\t\t\tvar Index, Source;\r\n\r\n\t\t\t// Internal: Resets the parser state and throws a `SyntaxError`.\r\n\t\t\tvar abort = function () {\r\n\t\t\t  Index = Source = null;\r\n\t\t\t  throw SyntaxError();\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Returns the next token, or `\"$\"` if the parser has reached\r\n\t\t\t// the end of the source string. A token may be a string, number, `null`\r\n\t\t\t// literal, or Boolean literal.\r\n\t\t\tvar lex = function () {\r\n\t\t\t  var source = Source, length = source.length, value, begin, position, isSigned, charCode;\r\n\t\t\t  while (Index < length) {\r\n\t\t\t\tcharCode = source.charCodeAt(Index);\r\n\t\t\t\tswitch (charCode) {\r\n\t\t\t\t  case 9: case 10: case 13: case 32:\r\n\t\t\t\t\t// Skip whitespace tokens, including tabs, carriage returns, line\r\n\t\t\t\t\t// feeds, and space characters.\r\n\t\t\t\t\tIndex++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t  case 123: case 125: case 91: case 93: case 58: case 44:\r\n\t\t\t\t\t// Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\r\n\t\t\t\t\t// the current position.\r\n\t\t\t\t\tvalue = charIndexBuggy ? source.charAt(Index) : source[Index];\r\n\t\t\t\t\tIndex++;\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t  case 34:\r\n\t\t\t\t\t// `\"` delimits a JSON string; advance to the next character and\r\n\t\t\t\t\t// begin parsing the string. String tokens are prefixed with the\r\n\t\t\t\t\t// sentinel `@` character to distinguish them from punctuators and\r\n\t\t\t\t\t// end-of-string tokens.\r\n\t\t\t\t\tfor (value = \"@\", Index++; Index < length;) {\r\n\t\t\t\t\t  charCode = source.charCodeAt(Index);\r\n\t\t\t\t\t  if (charCode < 32) {\r\n\t\t\t\t\t\t// Unescaped ASCII control characters (those with a code unit\r\n\t\t\t\t\t\t// less than the space character) are not permitted.\r\n\t\t\t\t\t\tabort();\r\n\t\t\t\t\t  } else if (charCode == 92) {\r\n\t\t\t\t\t\t// A reverse solidus (`\\`) marks the beginning of an escaped\r\n\t\t\t\t\t\t// control character (including `\"`, `\\`, and `/`) or Unicode\r\n\t\t\t\t\t\t// escape sequence.\r\n\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\r\n\t\t\t\t\t\tswitch (charCode) {\r\n\t\t\t\t\t\t  case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\r\n\t\t\t\t\t\t\t// Revive escaped control characters.\r\n\t\t\t\t\t\t\tvalue += Unescapes[charCode];\r\n\t\t\t\t\t\t\tIndex++;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t  case 117:\r\n\t\t\t\t\t\t\t// `\\u` marks the beginning of a Unicode escape sequence.\r\n\t\t\t\t\t\t\t// Advance to the first character and validate the\r\n\t\t\t\t\t\t\t// four-digit code point.\r\n\t\t\t\t\t\t\tbegin = ++Index;\r\n\t\t\t\t\t\t\tfor (position = Index + 4; Index < position; Index++) {\r\n\t\t\t\t\t\t\t  charCode = source.charCodeAt(Index);\r\n\t\t\t\t\t\t\t  // A valid sequence comprises four hexdigits (case-\r\n\t\t\t\t\t\t\t  // insensitive) that form a single hexadecimal value.\r\n\t\t\t\t\t\t\t  if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\r\n\t\t\t\t\t\t\t\t// Invalid Unicode escape sequence.\r\n\t\t\t\t\t\t\t\tabort();\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Revive the escaped character.\r\n\t\t\t\t\t\t\tvalue += fromCharCode(\"0x\" + source.slice(begin, Index));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t  default:\r\n\t\t\t\t\t\t\t// Invalid escape sequence.\r\n\t\t\t\t\t\t\tabort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  } else {\r\n\t\t\t\t\t\tif (charCode == 34) {\r\n\t\t\t\t\t\t  // An unescaped double-quote character marks the end of the\r\n\t\t\t\t\t\t  // string.\r\n\t\t\t\t\t\t  break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\r\n\t\t\t\t\t\tbegin = Index;\r\n\t\t\t\t\t\t// Optimize for the common case where a string is valid.\r\n\t\t\t\t\t\twhile (charCode >= 32 && charCode != 92 && charCode != 34) {\r\n\t\t\t\t\t\t  charCode = source.charCodeAt(++Index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Append the string as-is.\r\n\t\t\t\t\t\tvalue += source.slice(begin, Index);\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (source.charCodeAt(Index) == 34) {\r\n\t\t\t\t\t  // Advance to the next character and return the revived string.\r\n\t\t\t\t\t  Index++;\r\n\t\t\t\t\t  return value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Unterminated string.\r\n\t\t\t\t\tabort();\r\n\t\t\t\t  default:\r\n\t\t\t\t\t// Parse numbers and literals.\r\n\t\t\t\t\tbegin = Index;\r\n\t\t\t\t\t// Advance past the negative sign, if one is specified.\r\n\t\t\t\t\tif (charCode == 45) {\r\n\t\t\t\t\t  isSigned = true;\r\n\t\t\t\t\t  charCode = source.charCodeAt(++Index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Parse an integer or floating-point value.\r\n\t\t\t\t\tif (charCode >= 48 && charCode <= 57) {\r\n\t\t\t\t\t  // Leading zeroes are interpreted as octal literals.\r\n\t\t\t\t\t  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\r\n\t\t\t\t\t\t// Illegal octal literal.\r\n\t\t\t\t\t\tabort();\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  isSigned = false;\r\n\t\t\t\t\t  // Parse the integer component.\r\n\t\t\t\t\t  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\r\n\t\t\t\t\t  // Floats cannot contain a leading decimal point; however, this\r\n\t\t\t\t\t  // case is already accounted for by the parser.\r\n\t\t\t\t\t  if (source.charCodeAt(Index) == 46) {\r\n\t\t\t\t\t\tposition = ++Index;\r\n\t\t\t\t\t\t// Parse the decimal component.\r\n\t\t\t\t\t\tfor (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\r\n\t\t\t\t\t\tif (position == Index) {\r\n\t\t\t\t\t\t  // Illegal trailing decimal.\r\n\t\t\t\t\t\t  abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIndex = position;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  // Parse exponents. The `e` denoting the exponent is\r\n\t\t\t\t\t  // case-insensitive.\r\n\t\t\t\t\t  charCode = source.charCodeAt(Index);\r\n\t\t\t\t\t  if (charCode == 101 || charCode == 69) {\r\n\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\r\n\t\t\t\t\t\t// Skip past the sign following the exponent, if one is\r\n\t\t\t\t\t\t// specified.\r\n\t\t\t\t\t\tif (charCode == 43 || charCode == 45) {\r\n\t\t\t\t\t\t  Index++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Parse the exponential component.\r\n\t\t\t\t\t\tfor (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\r\n\t\t\t\t\t\tif (position == Index) {\r\n\t\t\t\t\t\t  // Illegal empty exponent.\r\n\t\t\t\t\t\t  abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIndex = position;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  // Coerce the parsed value to a JavaScript number.\r\n\t\t\t\t\t  return +source.slice(begin, Index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// A negative sign may only precede numbers.\r\n\t\t\t\t\tif (isSigned) {\r\n\t\t\t\t\t  abort();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// `true`, `false`, and `null` literals.\r\n\t\t\t\t\tif (source.slice(Index, Index + 4) == \"true\") {\r\n\t\t\t\t\t  Index += 4;\r\n\t\t\t\t\t  return true;\r\n\t\t\t\t\t} else if (source.slice(Index, Index + 5) == \"false\") {\r\n\t\t\t\t\t  Index += 5;\r\n\t\t\t\t\t  return false;\r\n\t\t\t\t\t} else if (source.slice(Index, Index + 4) == \"null\") {\r\n\t\t\t\t\t  Index += 4;\r\n\t\t\t\t\t  return null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Unrecognized token.\r\n\t\t\t\t\tabort();\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  // Return the sentinel `$` character if the parser has reached the end\r\n\t\t\t  // of the source string.\r\n\t\t\t  return \"$\";\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Parses a JSON `value` token.\r\n\t\t\tvar get = function (value) {\r\n\t\t\t  var results, hasMembers;\r\n\t\t\t  if (value == \"$\") {\r\n\t\t\t\t// Unexpected end of input.\r\n\t\t\t\tabort();\r\n\t\t\t  }\r\n\t\t\t  if (typeof value == \"string\") {\r\n\t\t\t\tif ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\r\n\t\t\t\t  // Remove the sentinel `@` character.\r\n\t\t\t\t  return value.slice(1);\r\n\t\t\t\t}\r\n\t\t\t\t// Parse object and array literals.\r\n\t\t\t\tif (value == \"[\") {\r\n\t\t\t\t  // Parses a JSON array, returning a new JavaScript array.\r\n\t\t\t\t  results = [];\r\n\t\t\t\t  for (;; hasMembers || (hasMembers = true)) {\r\n\t\t\t\t\tvalue = lex();\r\n\t\t\t\t\t// A closing square bracket marks the end of the array literal.\r\n\t\t\t\t\tif (value == \"]\") {\r\n\t\t\t\t\t  break;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// If the array literal contains elements, the current token\r\n\t\t\t\t\t// should be a comma separating the previous element from the\r\n\t\t\t\t\t// next.\r\n\t\t\t\t\tif (hasMembers) {\r\n\t\t\t\t\t  if (value == \",\") {\r\n\t\t\t\t\t\tvalue = lex();\r\n\t\t\t\t\t\tif (value == \"]\") {\r\n\t\t\t\t\t\t  // Unexpected trailing `,` in array literal.\r\n\t\t\t\t\t\t  abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  } else {\r\n\t\t\t\t\t\t// A `,` must separate each array element.\r\n\t\t\t\t\t\tabort();\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Elisions and leading commas are not permitted.\r\n\t\t\t\t\tif (value == \",\") {\r\n\t\t\t\t\t  abort();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresults.push(get(value));\r\n\t\t\t\t  }\r\n\t\t\t\t  return results;\r\n\t\t\t\t} else if (value == \"{\") {\r\n\t\t\t\t  // Parses a JSON object, returning a new JavaScript object.\r\n\t\t\t\t  results = {};\r\n\t\t\t\t  for (;; hasMembers || (hasMembers = true)) {\r\n\t\t\t\t\tvalue = lex();\r\n\t\t\t\t\t// A closing curly brace marks the end of the object literal.\r\n\t\t\t\t\tif (value == \"}\") {\r\n\t\t\t\t\t  break;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// If the object literal contains members, the current token\r\n\t\t\t\t\t// should be a comma separator.\r\n\t\t\t\t\tif (hasMembers) {\r\n\t\t\t\t\t  if (value == \",\") {\r\n\t\t\t\t\t\tvalue = lex();\r\n\t\t\t\t\t\tif (value == \"}\") {\r\n\t\t\t\t\t\t  // Unexpected trailing `,` in object literal.\r\n\t\t\t\t\t\t  abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  } else {\r\n\t\t\t\t\t\t// A `,` must separate each object member.\r\n\t\t\t\t\t\tabort();\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Leading commas are not permitted, object property names must be\r\n\t\t\t\t\t// double-quoted strings, and a `:` must separate each property\r\n\t\t\t\t\t// name and value.\r\n\t\t\t\t\tif (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\r\n\t\t\t\t\t  abort();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresults[value.slice(1)] = get(lex());\r\n\t\t\t\t  }\r\n\t\t\t\t  return results;\r\n\t\t\t\t}\r\n\t\t\t\t// Unexpected token encountered.\r\n\t\t\t\tabort();\r\n\t\t\t  }\r\n\t\t\t  return value;\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Updates a traversed object member.\r\n\t\t\tvar update = function (source, property, callback) {\r\n\t\t\t  var element = walk(source, property, callback);\r\n\t\t\t  if (element === undef) {\r\n\t\t\t\tdelete source[property];\r\n\t\t\t  } else {\r\n\t\t\t\tsource[property] = element;\r\n\t\t\t  }\r\n\t\t\t};\r\n\r\n\t\t\t// Internal: Recursively traverses a parsed JSON object, invoking the\r\n\t\t\t// `callback` function for each value. This is an implementation of the\r\n\t\t\t// `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\r\n\t\t\tvar walk = function (source, property, callback) {\r\n\t\t\t  var value = source[property], length;\r\n\t\t\t  if (typeof value == \"object\" && value) {\r\n\t\t\t\t// `forEach` can't be used to traverse an array in Opera <= 8.54\r\n\t\t\t\t// because its `Object#hasOwnProperty` implementation returns `false`\r\n\t\t\t\t// for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\r\n\t\t\t\tif (getClass.call(value) == arrayClass) {\r\n\t\t\t\t  for (length = value.length; length--;) {\r\n\t\t\t\t\tupdate(value, length, callback);\r\n\t\t\t\t  }\r\n\t\t\t\t} else {\r\n\t\t\t\t  forEach(value, function (property) {\r\n\t\t\t\t\tupdate(value, property, callback);\r\n\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t  return callback.call(source, property, value);\r\n\t\t\t};\r\n\r\n\t\t\t// Public: `JSON.parse`. See ES 5.1 section 15.12.2.\r\n\t\t\texports.parse = function (source, callback) {\r\n\t\t\t  var result, value;\r\n\t\t\t  Index = 0;\r\n\t\t\t  Source = \"\" + source;\r\n\t\t\t  result = get(lex());\r\n\t\t\t  // If a JSON string contains multiple tokens, it is invalid.\r\n\t\t\t  if (lex() != \"$\") {\r\n\t\t\t\tabort();\r\n\t\t\t  }\r\n\t\t\t  // Reset the parser state.\r\n\t\t\t  Index = Source = null;\r\n\t\t\t  return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\r\n\t\t\t};\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\texports[\"runInContext\"] = runInContext;\r\n\t\treturn exports;\r\n\t  }\r\n\r\n\t  if (freeExports && !isLoader) {\r\n\t\t// Export for CommonJS environments.\r\n\t\trunInContext(root, freeExports);\r\n\t  } else {\r\n\t\t// Export for web browsers and JavaScript engines.\r\n\t\tvar nativeJSON = root.JSON,\r\n\t\t\tpreviousJSON = root[\"JSON3\"],\r\n\t\t\tisRestored = false;\r\n\r\n\t\tvar JSON3 = runInContext(root, (root[\"JSON3\"] = {\r\n\t\t  // Public: Restores the original value of the global `JSON` object and\r\n\t\t  // returns a reference to the `JSON3` object.\r\n\t\t  \"noConflict\": function () {\r\n\t\t\tif (!isRestored) {\r\n\t\t\t  isRestored = true;\r\n\t\t\t  root.JSON = nativeJSON;\r\n\t\t\t  root[\"JSON3\"] = previousJSON;\r\n\t\t\t  nativeJSON = previousJSON = null;\r\n\t\t\t}\r\n\t\t\treturn JSON3;\r\n\t\t  }\r\n\t\t}));\r\n\r\n\t\troot.JSON = {\r\n\t\t  \"parse\": JSON3.parse,\r\n\t\t  \"stringify\": JSON3.stringify\r\n\t\t};\r\n\t  }\r\n\r\n\t  // Export for asynchronous module loaders.\r\n\t  if (isLoader) {\r\n\t\tdefine(function () {\r\n\t\t  return JSON3;\r\n\t\t});\r\n\t  }\r\n\t}).call(this);\r\n\r\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\r\n\t},{}],51:[function(_dereq_,module,exports){\r\n\tmodule.exports = toArray\r\n\r\n\tfunction toArray(list, index) {\r\n\t\tvar array = []\r\n\r\n\t\tindex = index || 0\r\n\r\n\t\tfor (var i = index || 0; i < list.length; i++) {\r\n\t\t\tarray[i - index] = list[i]\r\n\t\t}\r\n\r\n\t\treturn array\r\n\t}\r\n\r\n\t},{}]},{},[31])(31)\r\n\t});\r\n}\r\n"]}